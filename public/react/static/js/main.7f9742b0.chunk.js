(this.webpackJsonpsakkaku=this.webpackJsonpsakkaku||[]).push([[0],{147:function(e,t,n){e.exports={layout:"roller_layout__2TyHW"}},148:function(e,t,n){e.exports={submit:"Intent_submit__3pMAY"}},156:function(e,t,n){e.exports=n.p+"static/media/black.f14fed51.png"},157:function(e,t,n){e.exports=n.p+"static/media/blackot.3a5ad7bb.png"},158:function(e,t,n){e.exports=n.p+"static/media/blackst.3fad8195.png"},159:function(e,t,n){e.exports=n.p+"static/media/blacket.f0ca3076.png"},160:function(e,t,n){e.exports=n.p+"static/media/blacko.e44a1dd0.png"},161:function(e,t,n){e.exports=n.p+"static/media/blacks.216d4546.png"},162:function(e,t,n){e.exports=n.p+"static/media/white.c24c0c51.png"},163:function(e,t,n){e.exports=n.p+"static/media/whitee.7755ca79.png"},164:function(e,t,n){e.exports=n.p+"static/media/whiteet.d10cd0cc.png"},165:function(e,t,n){e.exports=n.p+"static/media/whiteo.1e81fee0.png"},166:function(e,t,n){e.exports=n.p+"static/media/whites.7cb9db03.png"},167:function(e,t,n){e.exports=n.p+"static/media/whiteso.f76a057b.png"},168:function(e,t,n){e.exports=n.p+"static/media/whitest.05051e66.png"},196:function(e,t,n){e.exports=n(355)},201:function(e,t,n){},202:function(e,t,n){},355:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),o=(n(201),n(202),n(37)),s=n(147),u=n.n(s),l=n(358),d=n(362),p=n(363),m=n(361),f=n(364),b=n(129),g=n(148),v=n.n(g),E={labelCol:{span:6},wrapperCol:{span:18}},h={labelCol:{span:0},wrapperCol:{span:24}},y=function(e){var t=e.completed,n=e.onFinish,a=e.values;return r.a.createElement(l.a,Object.assign({},E,{initialValues:a,onFinish:n}),r.a.createElement(l.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Roll description is required"}]},r.a.createElement(d.a,{disabled:t})),r.a.createElement(l.a.Item,{label:"TN",name:"tn",rules:[{required:!0}]},r.a.createElement(p.a,{disabled:t,min:1})),r.a.createElement(l.a.Item,{label:"Ring",name:"ring",rules:[{required:!0}]},r.a.createElement(p.a,{disabled:t,min:1,max:5})),r.a.createElement(l.a.Item,{label:"Skill",name:"skill",rules:[{required:!0}]},r.a.createElement(p.a,{disabled:t,min:0,max:5})),r.a.createElement(l.a.Item,{label:"Modifier",name:"modifier"},r.a.createElement(m.a.Group,{disabled:t},r.a.createElement(m.a.Button,{value:"none"},"None"),r.a.createElement(m.a.Button,{value:"distinction"},"Distinction"),r.a.createElement(m.a.Button,{value:"adversity"},"Adversity"))),r.a.createElement(l.a.Item,{label:"Compromised?",name:"compromised",valuePropName:"checked"},r.a.createElement(f.a,{disabled:t})),!t&&r.a.createElement(l.a.Item,h,r.a.createElement(b.a,{type:"primary",htmlType:"submit",className:v.a.submit},"Roll")))},k=n(90),O=n(117),j=n(74),x=n.n(j),w=n(118),_=n(39),C=[{},{opportunity:1,strife:1},{opportunity:1},{success:1,strife:1},{success:1},{explosion:1,strife:1}],S=[{},{},{opportunity:1},{opportunity:1},{opportunity:1},{success:1,strife:1},{success:1,strife:1},{success:1},{success:1},{success:1,opportunity:1},{explosion:1,strife:1},{explosion:1}],F=function(e){return e[Math.floor(Math.random()*e.length)]},I=function(e){var t=e.type;return{type:t,value:F("skill"===t?S:C),status:"pending"}},q=function(e){var t=e.ring,n=e.skill;return[].concat(Object(_.a)(Object(_.a)(Array(t)).map((function(){return{type:"ring",value:F(C),status:"pending"}}))),Object(_.a)(Object(_.a)(Array(n)).map((function(){return{type:"skill",value:F(S),status:"pending"}}))))},D=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.a)({},t,{dices:q(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(w.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.a)({},t,{dices:[].concat(Object(_.a)(t.dices.map((function(e,t){return Object(o.a)({},e,{status:"pending"===e.status?n.includes(t)?"kept":"dropped":e.status})}))),Object(_.a)(t.dices.filter((function(e,t){return"pending"===e.status&&n.includes(t)&&e.value.explosion})).map((function(e){return I(e)}))))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.a)({},t,{rerolled:!0,dices:[].concat(Object(_.a)(t.dices.map((function(e,t){return n.includes(t)?Object(o.a)({},e,{status:"rerolled"}):e}))),Object(_.a)(t.dices.filter((function(e,t){return n.includes(t)})).map((function(e){return I(e)}))))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=Object(O.b)({name:"roll",initialState:{description:"Example",tn:2,ring:2,skill:2,modifier:"none",compromised:!1,dices:[],rerolled:!1},reducers:{set:function(e,t){var n=t.payload,a=n.description,r=n.tn,c=n.ring,i=n.skill,o=n.modifier,s=n.dices,u=n.rerolled,l=n.compromised;e.description=a,e.tn=r,e.ring=c,e.skill=i,e.modifier=o,e.compromised=l,e.dices=s,e.rerolled=u},softReset:function(e){e.dices=[],e.rerolled=!1}}}),R=M.actions.set,Y=M.actions.softReset,A=function(e,t){return function(n){N(e,t).then((function(e){n(R(e))}))}},T=function(e,t){return function(n){B(e,t).then((function(e){n(R(e))}))}},G=function(e){return e.roll},W=M.reducer,H=n(356),J=n(67),P=n(72),Q=n(357),K=n(82),U=n.n(K),V=n(3),$=n.n(V),z=n(360),L=n(156),X=n.n(L),Z=n(157),ee=n.n(Z),te=n(158),ne=n.n(te),ae=n(159),re=n.n(ae),ce=n(160),ie=n.n(ce),oe=n(161),se=n.n(oe),ue=n(162),le=n.n(ue),de=n(163),pe=n.n(de),me=n(164),fe=n.n(me),be=n(165),ge=n.n(be),ve=n(166),Ee=n.n(ve),he=n(167),ye=n.n(he),ke=n(168),Oe=n.n(ke),je=function(e){var t=e.type,n=e.value,a=n.opportunity,r=n.strife,c=n.success,i=n.explosion;return"skill"===t?i?r?fe.a:pe.a:c?a?ye.a:r?Oe.a:Ee.a:a?ge.a:le.a:r?i?re.a:c?ne.a:ee.a:c?se.a:a?ie.a:X.a},xe=function(e){var t=e.dice,n=function(e){var t=e.value,n=t.opportunity,a=t.strife,r=t.success,c=t.explosion;return[n&&"Opportunity: ".concat(n),r&&"Success: ".concat(r),c&&"Explosion: ".concat(c),a&&"Strife: ".concat(a)].filter(Boolean).join("; ")||"Nothing"}(t);return r.a.createElement(z.a,{src:je(t),alt:n,title:n,preview:!1})},we=function(e){var t=e.dices;if(!(null===t||void 0===t?void 0:t.length))return null;var n=t.map((function(e,t){return{key:t.toString(),dice:e,selectable:e.selectable,selected:e.selected,toggle:e.toggle,disabled:e.disabled}}));return r.a.createElement(Q.b,{grid:{gutter:0,column:10},dataSource:n,renderItem:function(e){var t,n=e.key,a=e.dice,c=e.selectable,i=e.selected,o=e.toggle,s=e.disabled;return r.a.createElement(Q.b.Item,{key:n,className:$()(U.a.dice,(t={},Object(P.a)(t,U.a.selectable,c),Object(P.a)(t,U.a.selected,i),Object(P.a)(t,U.a.unselectable,s),Object(P.a)(t,U.a.rerolled,"rerolled"===a.status),t)),onClick:c?o:void 0},r.a.createElement(xe,{dice:a}))}})},_e=n(359),Ce=_e.a.Paragraph,Se=function(e){var t=e.dices,n=e.text,a=e.footer;return r.a.createElement("div",null,r.a.createElement(Ce,null,n),r.a.createElement(we,{dices:t}),a)},Fe=function(e){var t=e.dices,n=e.max,c=e.onFinish,i=e.compromised,s=Object(a.useState)([]),u=Object(J.a)(s,2),l=u[0],d=u[1],p=n>l.length,m="You can choose up to ".concat(n," dice").concat(n>1?"s":""," to keep (min 1).");return r.a.createElement(Se,{text:m,dices:t.map((function(e,t){var n=l.includes(t),a="pending"===e.status&&(!i||!e.value.strife),r=(n||p)&&a;return Object(o.a)({},e,{selectable:r,selected:n,disabled:!r,toggle:function(){return function(e){return l.includes(e)?d(l.filter((function(t){return t!==e}))):d([].concat(Object(_.a)(l),[e]))}(t)}})})),footer:l.length>=1&&r.a.createElement(b.a,{type:"primary",onClick:function(){return c(l)}},"Continue")})},Ie=function(e){var t=e.dices,n=e.onFinish,c=e.compromised,i=Object(a.useState)([]),s=Object(J.a)(i,2),u=s[0],l=s[1];return r.a.createElement(Se,{text:"Select which explosions you wish to keep (if any):",dices:t.map((function(e,t){var n="pending"===e.status&&(!c||!e.value.strife);return Object(o.a)({},e,{selectable:n,selected:"kept"===e.status||u.includes(t),disabled:!n&&"kept"!==e.status,toggle:function(){return function(e){return u.includes(e)?l(u.filter((function(t){return t!==e}))):l([].concat(Object(_.a)(u),[e]))}(t)}})})),footer:r.a.createElement(b.a,{type:"primary",onClick:function(){return n(u)}},"Continue")})},qe=function(e){var t=e.dices,n=e.trulyCompromised?"You cannot keep any dice due to being compromised.":"You have kept:";return r.a.createElement(Se,{text:n,dices:t.map((function(e){var t="kept"===e.status;return Object(o.a)({},e,{disabled:!t,selected:t})}))})},De=_e.a.Text,Ne=function(e){var t=e.dices,n=e.tn,a=[{type:"Successes",count:t.reduce((function(e,t){return e+(t.value.explosion||0)+(t.value.success||0)}),0),target:n},{type:"Strifes",count:t.reduce((function(e,t){return e+(t.value.strife||0)}),0)},{type:"Opportunities",count:t.reduce((function(e,t){return e+(t.value.opportunity||0)}),0)}];return r.a.createElement(Q.b,{grid:{gutter:16,column:3},dataSource:a,renderItem:function(e){var t=e.type,n=e.count,a=e.target;return r.a.createElement(Q.b.Item,null,r.a.createElement(De,{strong:!0,type:a&&(n>=a?"success":"warning")},"".concat(t,": ").concat(n)),a&&r.a.createElement(De,null," (required: ".concat(a,")")))}})},Be=function(e){var t=e.dices,n=e.onFinish,c=Object(a.useState)([]),i=Object(J.a)(c,2),s=i[0],u=i[1];return r.a.createElement(Se,{text:"You can choose up to ".concat(2," dices to reroll."),dices:t.map((function(e,t){var n=s.includes(t),a=n||s.length<2;return Object(o.a)({},e,{selectable:a,selected:n,disabled:!a,toggle:function(){return function(e){return s.includes(e)?u(s.filter((function(t){return t!==e}))):u([].concat(Object(_.a)(s),[e]))}(t)}})})),footer:r.a.createElement(b.a,{type:"primary",onClick:function(){return n(s)}},"Continue")})},Me=function(e){var t=e.dices,n=e.onFinish,c=Object(a.useState)([]),i=Object(J.a)(c,2),s=i[0],u=i[1],l=t.filter((function(e){var t=e.value;return t.success||t.explosion})),d=Math.min(2,l.length);return r.a.createElement(Se,{text:"You must reroll two success dices (if possible).",dices:t.map((function(e,t){var n=s.includes(t),a=(e.value.success||e.value.explosion)&&(n||s.length<2);return Object(o.a)({},e,{selectable:a,selected:n,disabled:!a,toggle:function(){return function(e){return s.includes(e)?u(s.filter((function(t){return t!==e}))):u([].concat(Object(_.a)(s),[e]))}(t)}})})),footer:s.length>=d&&r.a.createElement(b.a,{type:"primary",onClick:function(){return n(s)}},"Continue")})},Re=function(){var e=Object(k.c)(G),t=Object(k.b)(),n=e.dices,a=e.tn,c=e.rerolled,i=e.modifier,s=e.ring,l=e.compromised,d=n.length>0,p=d&&n.some((function(e){return"pending"===e.status})),m=n.filter((function(e){return"kept"===e.status})),f=m.length>0,g=c||"none"===i,v=l&&d&&g&&!f&&n.filter((function(e){return"pending"===e.status})).every((function(e){return e.value.strife})),E=f&&!p||v;return r.a.createElement("div",{className:u.a.layout},r.a.createElement(H.a,null,r.a.createElement(y,{completed:d,onFinish:function(n){return t((a=Object(o.a)({},e,{},n),function(e){D(a).then((function(t){e(R(t))}))}));var a},values:e}),d&&r.a.createElement(r.a.Fragment,null,!g&&r.a.createElement(r.a.Fragment,null,"distinction"===i&&r.a.createElement(Be,{dices:n,onFinish:function(n){return t(T(e,n))}}),"adversity"===i&&r.a.createElement(Me,{dices:n,onFinish:function(n){return t(T(e,n))}})),g&&r.a.createElement(r.a.Fragment,null,!v&&p&&r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement(Fe,{dices:n,max:s,onFinish:function(n){return t(A(e,n))},compromised:l}),f&&r.a.createElement(Ie,{dices:n,onFinish:function(n){return t(A(e,n))},compromised:l})),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{dices:n,trulyCompromised:v}),r.a.createElement(Ne,{dices:m,tn:a}),r.a.createElement(b.a,{type:"primary",onClick:function(){return t(Y())}},"Reroll"))))))},Ye=function(){return r.a.createElement(Re,null)},Ae=Object(O.a)({reducer:{roll:W}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k.a,{store:Ae},r.a.createElement(Ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,n){e.exports={dice:"Dices_dice__cqowQ",selectable:"Dices_selectable__2UH3q",selected:"Dices_selected__1Gb1I",unselectable:"Dices_unselectable__KQSGp",rerolled:"Dices_rerolled__2e0qS"}}},[[196,1,2]]]);
//# sourceMappingURL=main.7f9742b0.chunk.js.map