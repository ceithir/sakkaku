(this.webpackJsonpsakkaku=this.webpackJsonpsakkaku||[]).push([[0],{121:function(e,t,a){e.exports={layout:"Keep_layout__3iSnl",figures:"Keep_figures__29jyx","add-kept-form":"Keep_add-kept-form__3VbB8",text:"Keep_text__136fi"}},122:function(e,t,a){e.exports={layout:"Layout_layout__UFIxE",logo:"Layout_logo__1Oa8g",footer:"Layout_footer__1d2pN",login:"Layout_login__2luPa"}},175:function(e,t,a){e.exports={form:"Intent_form__3Tlpw",voided:"Intent_voided__1GBC5"}},176:function(e,t,a){e.exports={layout:"NextButton_layout__1V0iF"}},178:function(e,t,a){e.exports={group:"DiceSideSelector_group__2wbOR"}},179:function(e,t,a){e.exports={dices:"Summary_dices__1WJbN"}},183:function(e,t,a){e.exports={alert:"roller_alert__a7FQm",steps:"roller_steps__37v8v"}},184:function(e,t,a){e.exports={layout:"Resolve_layout__6Gw1E",container:"Resolve_container__3LORR"}},185:function(e,t,a){e.exports={"see-more":"List_see-more__3H9Sv",time:"List_time__3D77V"}},186:function(e,t,a){e.exports={container:"Loader_container__3tlr0",loader:"Loader_loader__Jgwkb"}},187:function(e,t,a){e.exports={container:"Breadcrumb_container__1pLMq",description:"Breadcrumb_description__3x45S"}},188:function(e,t,a){e.exports={footer:"Roll_footer__1xu18"}},189:function(e,t,a){e.exports={layout:"Layout_layout__3zsMY",dice:"Layout_dice__3dlxn"}},211:function(e,t,a){e.exports={steps:"Steps_steps__xQjGe"}},213:function(e,t,a){e.exports=a.p+"static/media/black.f14fed51.png"},214:function(e,t,a){e.exports=a.p+"static/media/blackot.3a5ad7bb.png"},215:function(e,t,a){e.exports=a.p+"static/media/blackst.3fad8195.png"},216:function(e,t,a){e.exports=a.p+"static/media/blacket.f0ca3076.png"},217:function(e,t,a){e.exports=a.p+"static/media/blacko.e44a1dd0.png"},218:function(e,t,a){e.exports=a.p+"static/media/blacks.216d4546.png"},219:function(e,t,a){e.exports=a.p+"static/media/white.c24c0c51.png"},220:function(e,t,a){e.exports=a.p+"static/media/whitee.7755ca79.png"},221:function(e,t,a){e.exports=a.p+"static/media/whiteet.d10cd0cc.png"},222:function(e,t,a){e.exports=a.p+"static/media/whiteo.1e81fee0.png"},223:function(e,t,a){e.exports=a.p+"static/media/whites.7cb9db03.png"},224:function(e,t,a){e.exports=a.p+"static/media/whiteso.f76a057b.png"},225:function(e,t,a){e.exports=a.p+"static/media/whitest.05051e66.png"},230:function(e,t,a){e.exports={"pseudo-radio":"DynamicDiceSelector_pseudo-radio__3_xZn"}},238:function(e,t,a){e.exports={layout:"Result_layout__1eJNj"}},245:function(e,t,a){e.exports={buttons:"LineContainer_buttons__2C_Fm"}},246:function(e,t,a){e.exports={text:"DicesBox_text__eNZEC"}},248:function(e,t,a){e.exports={alterators:"Ishiken_alterators__37a44"}},249:function(e,t,a){e.exports={list:"Alter_list__3b8nO"}},250:function(e,t,a){e.exports=a.p+"static/media/logo.20098cc4.png"},252:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkUzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRkQzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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"},253:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REUyNDExOEIzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REUyNDExOEEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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"},254:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRjkzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkxMi0zNTM4YjhhODdmZmEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o8HzfAAAFIUlEQVR42uydi3GbQBCGF00aoAVSAikBl0BKICWQEuQSSAlWCagEqwSpBCjB4TLHDHYkwd7uPbjbf+ZmbI8t4f3YF7pH9vHxAaJwdBATCBCRABEgIkN9o75AlmU+rjufRqlHoYdSded3L9MYp3Gexk1/f+O6EO6iKKO+oCMguTb2PAri681gLhrUJRQg/16QMiyrmcabukzLY5hGpz3Oqf3+s2eAQEptnMEBiHvjXd8ISQNRIaidxtUThEdgKtdAfOSQWgOoFh6RB1z4vOoxxpZD6sA8AOstZSwhS3lDv1MQXxN/s3cgrcfkbGsc95hDcl2uVpbi+rKPGPX3twcNX74IN+Uif1F6GdW7/FTvvYccUlrIFVddCjcMTeEyp/XUvBJ6yGoYQ5Rxs4ZURQCjrrEKFUjDCKL1UArXhJupCQ1Iw5gwffYkOcFbulCAlAxh6mqxADBRZ/h/KJi5NyD6jqIm8C7QTr0hJPvcFxDqk9g28M+LTPPKYFqBUWDURBgN7EOmIdnIUyihagCmbncHMk32R1dAjsSGaq8ySfaFVSC6U6aEqhL2LSyU3jYQSiLvYP8yqSwrK0B0r0DxjgLiUGPLS7BA+sS9Y+kl2KKmZAXCkDsqiEvYXNJxA+mA9mgkNmHD97ClL8H0HSk0gVhhy/+GC0hLgNFDvMJWXB0ZCENX3kLcwjxCGoyA6PjYAs8MwiJmGgbVZ2kChOtj2C5y75jt1XDlERvl7aennSkA0XbbmkuePnC8t2CHI8So6Tkv8GD6ZaT6g3icv06Y0UOS8Iw7HrLVboNJDhEYSCDabu9b7IQNWRT9SixMfdVpyy9lWfYwbB2e5ACTvHGBtHVGNJQoICZ3+S1xGCrkXKgRghNI6t6BCluuQpaIaAfOpH4WFvaA3ASGnzzClUMkXDHZgyuHjMLAIpDJ7cTANLGHLOkrAgtZWCDiUUw6MFEWb8JVYmcTIJi7vhQzf1Lu20MKYbDZHhcB4l6laXg/PIlzIyI3VMJgMxBjD1E6MV1EMsqyLF+JGGcKEEzYqgXHqh1G/azLDMj0xydEtSVA1iPFesRhXk+YXC5BTrstOeb2YqYFvSUO5NkMxp5tfQjg5q4WCQN5ZqeKEwhmhnefIpCVSMK/xhBw6yCqBIF0QFxfiAWCmeF9TQnIine01tapI72kTQjIoxVmb1a31gD8+uwUuvdH3uFm8xlkxTWAn8nXuS5EWn29/Z3+YNA/74g5rwOf2zMBfjmwyxnxBZgvw+sNPLrihEHZDQi734mLpW2UlcKfjIl4z3vRonG+xZ++E4dAoOSwcV0Gs0e3YGF3UsqOcq1hWOAOX5wwtm6wdu+GbLzvSgpmG2BeGauvI9jb473cmDtIOYMbCGXfRWqfUlmEsfkRUIhbjV+Bvp24yZ7uLo7AqPYIpGW+K/OV2N0yvyfJS0IEUlg2Qg7uTmtDP20I9XQEX8ZyMVqXQLhWUJ1AxCJOIDK/NyAgSq9izrCAqM1XYlxr6HSpBfehYAXEt9/J92fhmPtQMO69TtSFx7Qt09l1brRxwL2aKvkjkvDlvnq0fLBkA/s9bvXqwn6+Touud9g81j6AuD4tev6suwT6aZu2Q9XPrUBCrrKwKjSgGsKZoTLqympMEchSS69ZnrfuGsYLINbF7Pk8dVMPasDOx7TUCQ5R5BCq5tA2D64GVD1l+G3SP8Ucskw0H81d6K+XR3XnT+74ueG76AQ+UiJMUEBE4XfqIgEiQEQCRICIPOivAAMA3yRcglkl3R0AAAAASUVORK5CYII="},255:function(e,t,a){e.exports={result:"Result_result__pmIP7"}},256:function(e,t,a){e.exports={pagination:"Pagination_pagination__ztuKC"}},262:function(e,t,a){e.exports={form:"Form_form__3gH8o"}},263:function(e,t,a){e.exports={container:"Summary_container__2VaV7"}},272:function(e,t,a){e.exports=a(447)},277:function(e,t,a){},278:function(e,t,a){},447:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),i=a.n(o),l=(a(277),a(278),a(25)),c=a(28),s=a(56),u=a.n(s),m=a(94),d=a(53),p=a(32),f=a(460),h=a(459),b=a(456),y=a(450),g=a(463),v=a(451),E=a(466),k=a(159),x=a(80),j=a(175),A=a.n(j),O=a(112),I=a(81),w=a(176),C=a.n(w),S=a(20),R=a(92),D=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,i,l,s,m,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=t.method,r=t.body,o=t.success,i=t.error,l=t.extraHeaders,s=void 0===l?{}:l,m={Accept:"application/json"},r&&(m["Content-Type"]="application/json"),e.prev=3,e.next=6,fetch("".concat("/api").concat(a),{method:n,headers:Object(c.a)({},m,{},s),body:r?JSON.stringify(r):void 0});case 6:if((d=e.sent).ok){e.next=9;break}throw new Error("Bad status: ".concat(d.status));case 9:return e.next=11,d.json();case 11:p=e.sent,o(p),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),i?i(e.t0):console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=t.body,r=t.success,o=t.error,e.abrupt("return",D({uri:a,method:"POST",body:n,success:r,error:o}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=t.success,r=t.error,e.abrupt("return",D({uri:a,method:"GET",success:n,error:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=t.method,r=t.body,o=t.success,i=t.error,e.abrupt("return",D({uri:a,method:n,body:r,success:o,error:i,extraHeaders:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":decodeURIComponent(document.cookie.match("(^|;) ?XSRF-TOKEN=([^;]*)(;|$)")[2])}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=t.body,r=t.success,o=t.error,e.abrupt("return",M({uri:a,method:"POST",body:n,success:r,error:o}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=a(457),F=a(211),B=a.n(F),U=a(1),P=a.n(U),V="declare",Q="reroll",Z="keep",L="resolve",_=Y.a.Step,z=function(e){var t=e.current,a=e.className;return r.a.createElement(Y.a,{current:[V,Q,Z,L].indexOf(t),className:P()(B.a.steps,Object(d.a)({},a,!!a))},r.a.createElement(_,{title:"Declare",description:"Declare Intention"}),r.a.createElement(_,{title:"Modify",description:"Modify Rolled Dice"}),r.a.createElement(_,{title:"Keep",description:"Choose Kept Dice"}),r.a.createElement(_,{title:"Resolve",description:"Resolve Symbols"}))},W=["adversity","distinction","shadow","deathdealer","manipulator","ishiken","2heavens","ruthless","sailor"],J=function(e){return!(!H(e)&&!K(e))||W.includes(e)},H=function(e){return/^ruleless([0-9]{2})?$/.test(e)},K=function(e){return/^reasonless([0-9]{2})?$/.test(e)},q=function(e){var t=e.ring,a=e.skill,n=e.modifiers;return X({ring:t,modifiers:n})+a},X=function(e){return e.ring+(e.modifiers.includes("void")?1:0)},$=function(e){return["ishiken"].includes(e)||K(e)},ee=function(e){return{successCount:e.reduce((function(e,t){return e+(t.value.explosion||0)+(t.value.success||0)}),0),opportunityCount:e.reduce((function(e,t){return e+(t.value.opportunity||0)}),0),strifeCount:e.reduce((function(e,t){return e+(t.value.strife||0)}),0),blankCount:e.filter((function(e){var t=e.value,a=t.strife,n=t.opportunity,r=t.success,o=t.explosion;return 0===a&&0===n&&0===r&&0===o})).length}},te=function(e){var t=Object(p.a)(e);return t.sort((function(e,t){return"ring"===e.type&&"skill"===t.type?-1:"ring"===t.type&&"skill"===e.type?1:0})),t},ae=function(e,t){var a=e.status,n=e.metadata;return"rerolled"===a&&(n.end?n.end===t:n.modifier===t)},ne=function(e,t){var a=e.status,n=e.metadata;return n.source||n.end||!n.modifier?n.source===t:"rerolled"!==a&&n.modifier===t},re=function e(t){var a=t.dices,n=t.rerollType,r=t.previousRerollTypes,o=void 0===r?[]:r,i=t.basePool,l=a.filter((function(e){return ne(e,n)})),c=l.filter((function(e){return"ring"===e.type})),s=l.filter((function(e){return"skill"===e.type}));return function(){if(0===o.length)return a.slice(0,i);var t=Object(p.a)(o),n=t.pop();return e({dices:a,rerollType:n,previousRerollTypes:t,basePool:i})}().map((function(e){return function(e){return ae(e,n)}(e)?("skill"===e.type?s:c).shift():e}))},oe=function(e){var t=e.dices,a=e.rerollTypes,n=e.basePool,r=t.filter((function(e){return"rerolled"===e.status})).length;if(0===r)return t;var o=Object(p.a)(a),i=o.pop();return[].concat(Object(p.a)(re({dices:t,rerollType:i,previousRerollTypes:o,basePool:n})),Object(p.a)(t.slice(n+r)))},ie={tn:3,ring:3,skill:1,modifiers:[],dices:[],metadata:{},loading:!1,error:!1,toKeep:[],channeled:[],addkept:[],explicitGoToKeep:!1},le=Object(R.b)({name:"roll",initialState:ie,reducers:{softReset:function(e){e.tn=ie.tn,e.ring=ie.ring,e.skill=ie.skill,e.description=null,e.dices=[],e.metadata={},e.modifiers=[],e.toKeep=[],e.channeled=[],e.addkept=[],e.explicitGoToKeep=!1,e.id=null,window.history.pushState(null,null,"/")},setParameters:function(e,t){var a=t.payload,n=a.campaign,r=a.character,o=a.description,i=a.tn,l=a.ring,c=a.skill,s=a.modifiers,u=a.channeled,m=a.addkept;e.campaign=n,e.character=r,e.description=o,e.tn=i,e.ring=l,e.skill=c,e.modifiers=s,e.channeled=u,e.addkept=m},setLoading:function(e,t){e.loading=t.payload},setError:function(e,t){e.error=t.payload},setAnimatedStep:function(e,t){e.animatedStep=t.payload},load:function(e,t){var a=t.payload,n=a.id,r=a.player,o=a.dices,i=a.metadata;e.id=n,e.player=r,e.dices=o,e.metadata=i,e.loading=!1,window.history.pushState(null,null,"/rolls/".concat(n)),e.toKeep=[]},update:function(e,t){var a=t.payload,n=a.dices,r=a.metadata;e.dices=n,e.metadata=r,e.loading=!1,e.toKeep=[]},setToKeep:function(e,t){e.toKeep=t.payload},setAddKept:function(e,t){e.addkept=t.payload},goToKeepStep:function(e){e.explicitGoToKeep=!0},setModifiers:function(e,t){e.modifiers=t.payload}}}),ce=le.actions,se=ce.setParameters,ue=ce.setLoading,me=ce.softReset,de=ce.setAnimatedStep,pe=ce.load,fe=ce.setToKeep,he=ce.setAddKept,be=ce.goToKeepStep,ye=le.actions,ge=ye.update,ve=ye.setError,Ee=ye.setModifiers,ke=function(e,t,a){return function(n){n(ue(!0));var r=function(e){n(ge(e))},o=function(){n(ve(!0))},i=e.id;if(i)N({uri:"/ffg/l5r/rolls/".concat(i,"/reroll"),body:{positions:t,modifier:a},success:r,error:o});else{var l=e.tn,c=e.ring,s=e.skill,u=e.modifiers,m=e.dices,d=e.metadata;T({uri:"/public/ffg/l5r/rolls/reroll",body:{roll:{parameters:{tn:l,ring:c,skill:s,modifiers:u},dices:m,metadata:d},positions:t,modifier:a},success:r,error:o})}}},xe=function(e,t,a){return function(n){n(ue(!0));var r=function(e){n(ge(e))},o=function(){n(ve(!0))},i=e.id;if(i)N({uri:"/ffg/l5r/rolls/".concat(i,"/alter"),body:{alterations:t,modifier:a},success:r,error:o});else{var l=e.tn,c=e.ring,s=e.skill,u=e.modifiers,m=e.dices,d=e.metadata;T({uri:"/public/ffg/l5r/rolls/alter",body:{roll:{parameters:{tn:l,ring:c,skill:s,modifiers:u},dices:m,metadata:d},alterations:t,modifier:a},success:r,error:o})}}},je=function(e,t){return function(a){a(ue(!0));var n=e.id,r=e.modifiers,o=[].concat(Object(p.a)(r),Object(p.a)(t));n?N({uri:"/ffg/l5r/rolls/".concat(n,"/parameters"),body:{modifiers:o},success:function(e){var t=e.parameters.modifiers;a(Ee(t)),a(ue(!1))},error:function(){a(ve(!0))}}):(a(Ee(o)),a(ue(!1)))}},Ae=function(e){return e.roll},Oe=function(e){return e.roll.loading},Ie=function(e){var t,a=e.roll,n=a.dices,r=a.metadata,o=a.modifiers,i=a.animatedStep,l=a.explicitGoToKeep;if(i)return i;var c=n.length>0,s=c&&n.some((function(e){return"pending"===e.status})),u=o.filter(J),m=u.length>0,d=!m||(null===r||void 0===r||null===(t=r.rerolls)||void 0===t?void 0:t.length)===u.length;return c&&d&&!s?L:c&&d?l?Z:Q:c&&m?Q:V},we=function(e){var t=e.roll;return{campaign:t.campaign,character:t.character,description:t.description,tn:t.tn,ring:t.ring,skill:t.skill,modifiers:t.modifiers,player:t.player,channeled:t.channeled,addkept:t.addkept}},Ce=function(e){return e.roll.loading&&!e.roll.animatedStep},Se=function(e){return e.roll.toKeep},Re=le.reducer,De=function(e){var t=e.children,a=e.disabled,n=Object(O.a)(e,["children","disabled"]),o=Object(S.c)(Oe);return r.a.createElement("div",{className:C.a.layout},r.a.createElement(I.a,Object.assign({type:"primary",className:C.a.button,disabled:a||o},n),t))},Te=Object(R.b)({name:"user",initialState:{campaigns:[],characters:[]},reducers:{setUser:function(e,t){var a=t.payload,n=a.id,r=a.name,o=a.campaigns,i=a.characters;e.id=n,e.name=r,e.campaigns=o,e.characters=i},addCampaign:function(e,t){var a=t.payload;a&&!e.campaigns.includes(a)&&e.campaigns.push(a)},addCharacter:function(e,t){var a=t.payload;a&&!e.characters.includes(a)&&e.characters.push(a)}}}),Ge=Te.actions,Me=Ge.setUser,Ne=Ge.addCampaign,Ye=Ge.addCharacter,Fe=function(e){return e.user.id?e.user:void 0},Be=function(e){return e.user.campaigns},Ue=function(e){return e.user.characters},Pe=Te.reducer,Ve=a(266),Qe=a(468),Ze=a(469),Le=a(212),_e=a(76),ze=a(455),We=a(213),Je=a.n(We),He=a(214),Ke=a.n(He),qe=a(215),Xe=a.n(qe),$e=a(216),et=a.n($e),tt=a(217),at=a.n(tt),nt=a(218),rt=a.n(nt),ot=a(219),it=a.n(ot),lt=a(220),ct=a.n(lt),st=a(221),ut=a.n(st),mt=a(222),dt=a.n(mt),pt=a(223),ft=a.n(pt),ht=a(224),bt=a.n(ht),yt=a(225),gt=a.n(yt),vt=function(e){var t=e.type,a=e.value,n=a.opportunity,r=a.strife,o=a.success,i=a.explosion;return"skill"===t?i?r?ut.a:ct.a:o?n?bt.a:r?gt.a:ft.a:n?dt.a:it.a:r?i?et.a:o?Xe.a:Ke.a:o?rt.a:n?at.a:Je.a},Et=function(e){var t=e.value,a=t.opportunity,n=t.strife,r=t.success,o=t.explosion;return[a&&"Opportunity: ".concat(a),r&&"Success: ".concat(r),o&&"Explosion: ".concat(o),n&&"Strife: ".concat(n)].filter(Boolean).join("; ")||"Blank"},kt=function(e){var t=e.dice;return r.a.createElement(_e.a,{title:Et(t)},r.a.createElement("div",null,r.a.createElement(ze.a,{src:vt(t),alt:Et(t),preview:!1})))},xt=a(178),jt=a.n(xt),At=function(e){var t=e.type,a=e.value,n=a.opportunity,r=a.strife,o=a.success,i=a.explosion;return[t].concat(Object(p.a)([n,r,o,i].map((function(e){return(e||0).toString()})))).join("-")},Ot=function(e){var t=e.split("-"),a=Object(Le.a)(t),n=a[0],r=a.slice(1).map((function(e){return parseInt(e)})),o=Object(l.a)(r,4);return{type:n,value:{opportunity:o[0],strife:o[1],success:o[2],explosion:o[3]}}},It=[{type:"ring",value:{}},{type:"ring",value:{opportunity:1,strife:1}},{type:"ring",value:{opportunity:1}},{type:"ring",value:{success:1}},{type:"ring",value:{success:1,strife:1}},{type:"ring",value:{explosion:1,strife:1}},{type:"skill",value:{}},{type:"skill",value:{opportunity:1}},{type:"skill",value:{success:1,strife:1}},{type:"skill",value:{success:1}},{type:"skill",value:{explosion:1,strife:1}},{type:"skill",value:{success:1,opportunity:1}},{type:"skill",value:{explosion:1}}],wt=function(e){var t=e.facets,a=e.button;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.type,a=e.value,n=e.disabled,o=At({type:t,value:a});return r.a.createElement(k.a.Button,{key:o,value:o,disabled:n},r.a.createElement(kt,{dice:{type:t,value:a}}))})),a)},Ct=function(e){var t=e.initialValue,a=e.onChange,n=e.facets,o=void 0===n?It:n,i=e.button;return r.a.createElement(k.a.Group,{onChange:function(e){var t=e.target.value;return a(Ot(t))},className:jt.a.group,defaultValue:At(t)},r.a.createElement(wt,{facets:o,button:i}))},St=function(e){var t=e.value,a=e.onChange,n=e.facets,o=void 0===n?It:n;return r.a.createElement(k.a.Group,{onChange:function(e){var t=e.target.value;return a(Ot(t))},className:jt.a.group,value:At(t)},r.a.createElement(wt,{facets:o}))},Rt=a(230),Dt=a.n(Rt),Tt=function(e){var t=e.fields,a=e.labelText,n=e.defaultValue,o=e.buttonText,i=e.errors,l=e.add,c=e.remove,s=e.values,u=void 0===s?[]:s,m=e.facets,d=e.buttonLayout;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(b.a.Item,{required:!1,key:e.key,label:a},r.a.createElement(b.a.Item,Object.assign({},e,{noStyle:!0}),r.a.createElement(Ct,{initialValue:u[t]||n,button:r.a.createElement("div",{className:P()("ant-radio-button-wrapper",Dt.a["pseudo-radio"]),onClick:function(){return c(e.name)}},r.a.createElement(Qe.a,{className:"dynamic-delete-button"})),facets:m})))})),r.a.createElement(b.a.Item,d,r.a.createElement(I.a,{type:"dashed",onClick:function(){return l(n)},icon:r.a.createElement(Ze.a,null)},o),r.a.createElement(b.a.ErrorList,{errors:i})))},Gt=f.a.TextArea,Mt=h.a.Panel,Nt={labelCol:{span:8},wrapperCol:{span:16}},Yt={labelCol:{span:0},wrapperCol:{span:24}},Ft=[{required:!0,message:"Please fill this field"}],Bt=function(e){if(e)return e.map((function(e){return{value:e}}))},Ut=function(e){var t=e.onFinish,a=e.values,o=e.onComplete,i=Object(S.c)(Be),s=Object(S.c)(Ue),f=Object(S.b)(),j=b.a.useForm(),O=Object(l.a)(j,1)[0],I=Object(S.c)(Fe),w=Object(n.useState)(!1),C=Object(l.a)(w,2),R=C[0],D=C[1];return r.a.createElement(b.a,Object.assign({className:"boxed ".concat(A.a.form)},Nt,{initialValues:a,onFinish:function(e){o&&o(),f(Ne(e.campaign)),f(Ye(e.character));var a=e.techniques||[],n=e.misc||[];t(Object(c.a)({},e,{modifiers:[e.modifier,e.compromised&&"compromised",e.void&&"void",e.school].concat(Object(p.a)(a),Object(p.a)(n)).filter(Boolean)}))},scrollToFirstError:!0,form:O,onValuesChange:function(e){Object.keys(e).some((function(e){return["ring","skill","void","channeled"].includes(e)}))&&O.validateFields(["channeled"]),Object.keys(e).some((function(e){return["void"].includes(e)}))&&D(O.getFieldValue("void"))}}),!!I&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Item,{label:"Campaign",name:"campaign",rules:Ft},r.a.createElement(y.a,{options:Bt(i),placeholder:"The Dead of Winter"})),r.a.createElement(b.a.Item,{label:"Character",name:"character",rules:Ft},r.a.createElement(y.a,{options:Bt(s),placeholder:"Doji Sakura"})),r.a.createElement(b.a.Item,{label:"Description",name:"description",rules:Ft},r.a.createElement(Gt,{placeholder:"Running at the foe! Fire, Fitness, Keen Balance"}))),r.a.createElement(b.a.Item,{label:"TN",name:"tn"},r.a.createElement(g.a,{min:1})),r.a.createElement(v.a,null),r.a.createElement(b.a.Item,{label:"Ring",name:"ring",rules:Ft,className:P()(Object(d.a)({},A.a.voided,R))},r.a.createElement(g.a,{min:1,max:10})),r.a.createElement(b.a.Item,{label:"Skill",name:"skill",rules:Ft},r.a.createElement(g.a,{min:0,max:10})),r.a.createElement(v.a,null),r.a.createElement(h.a,{ghost:!0},r.a.createElement(Mt,{header:"Common modifiers"},r.a.createElement(b.a.Item,{label:"Void for +1 Ring die?",name:"void",valuePropName:"checked"},r.a.createElement(E.a,null)),r.a.createElement(b.a.Item,{label:"(Dis)Advantage",name:"modifier"},r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Button,{value:""},"None"),r.a.createElement(k.a.Button,{value:"distinction"},"Distinction"),r.a.createElement(k.a.Button,{value:"adversity"},"Adversity"))),r.a.createElement(b.a.Item,{label:"Compromised?",name:"compromised",valuePropName:"checked"},r.a.createElement(E.a,null)))),r.a.createElement(v.a,null),r.a.createElement(h.a,{ghost:!0},r.a.createElement(Mt,{header:"Schools, techniques, magic\u2026"},r.a.createElement(b.a.Item,{label:"School Ability",name:"school"},r.a.createElement(x.a,{showSearch:!0,allowClear:!0,options:[{value:"deathdealer",label:"Bayushi Deathdealer \u2014 Way of the Scorpion"},{value:"manipulator",label:"Bayushi Manipulator \u2014 Weakness Is My Strength"},{value:"shadow",label:"Ikoma Shadow \u2014 Victory before Honor"},{value:"ishiken",label:"Ishiken Initiate \u2014 Way of the Void"},{value:"sailor",label:"Storm Fleet Sailor \u2014 Sailor\u2019s Fortune"}],optionFilterProp:"label"})),r.a.createElement(b.a.Item,{label:"Techniques",name:"techniques"},r.a.createElement(x.a,{mode:"multiple",placeholder:"Relevant sh\u016bji, kata, etc.",options:[{value:"stirring",label:"Sh\u016bji \u2014 Stirring the Embers"}],optionFilterProp:"label"})),r.a.createElement(b.a.List,{name:"channeled",rules:[{validator:function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a?void 0:a.length){e.next=2;break}return e.abrupt("return");case 2:if(n=O.getFieldValue("ring"),r=O.getFieldValue("skill"),o=O.getFieldValue("void"),!(a.filter((function(e){return"ring"===e.type})).length>n+(o?1:0))){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("More channeled ring dice than rolled ring dice")));case 7:if(!(a.filter((function(e){return"skill"===e.type})).length>r)){e.next=9;break}return e.abrupt("return",Promise.reject(new Error("More channeled skill dice than rolled skill dice")));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]},(function(e,t,a){var n=t.add,o=t.remove,i=a.errors;return r.a.createElement(Tt,{fields:e,defaultValue:{type:"skill",value:{success:1}},errors:i,labelText:"Channeled Die",buttonText:"Use Channeled Die",add:n,remove:o,buttonLayout:{labelCol:{span:0},wrapperCol:{span:16,offset:8}}})})),r.a.createElement(b.a.Item,{label:"Misc.",name:"misc"},r.a.createElement(x.a,{mode:"multiple",placeholder:"Extra options for unusual cases",options:[{value:"2heavens",label:"Attacking a warding Mirumoto Two-Heavens Adept"}],optionFilterProp:"label"})))),r.a.createElement(v.a,null),r.a.createElement(b.a.Item,Yt,r.a.createElement(De,{htmlType:"submit"},"Roll")))},Pt=function(e){var t=e.onFinish,a=e.values,o=Object(n.useState)(!1),i=Object(l.a)(o,2),c=i[0],s=i[1],u=Object(S.b)(),m=Object(S.c)(Ce);Object(n.useEffect)((function(){c&&window.scrollTo({top:0,behavior:"smooth"})}),[c]);return m?null:r.a.createElement(Ve.a,{transitionName:"fade",transitionEnter:!1,transitionLeave:!0,showProp:"visible",onEnd:function(){return u(de(null))}},r.a.createElement(Ut,{visible:!c,onComplete:function(){s(!0),u(de(V))},onFinish:t,values:a}))},Vt=a(458),Qt=a(467),Zt=a(238),Lt=a.n(Zt),_t=Vt.a.Text,zt=function(e){var t=e.dices,a=e.tn,n=e.extra,o=e.className,i=e.modifiers,l=void 0===i?[]:i,c=t.filter((function(e,t){return"kept"===e.status||n&&n.includes(t)})),s=ee(c),u=s.successCount,m=s.opportunityCount,p=s.strifeCount,f=s.blankCount,h=[{type:"Success",count:u,color:a?u>=a?"success":"warning":null,extra:a?" (required: ".concat(a,")"):" (unknown TN)"},{type:"Opportunity",count:m},{type:"Strife",count:p,color:p>0&&"danger"}];if(l.includes("ishiken")&&h.push({type:"Magnitude",count:f}),l.includes("shadow")&&t.some((function(e){var t=e.metadata;return"shadow"===(null===t||void 0===t?void 0:t.source)}))){var b=t.filter((function(e){var t=e.metadata;return"shadow"===(null===t||void 0===t?void 0:t.source)})),y=b.length,g=Math.ceil(y/2),v=Math.min(g,b.filter((function(e){var t=e.value,a=t.success,n=t.explosion;return 0===a&&0===n})).length);h.push({type:"Honor Loss from Ability",count:v,color:v>0&&"danger"})}return r.a.createElement(Qt.b,{className:P()(Lt.a.layout,Object(d.a)({},o,!!o)),grid:{gutter:16,column:3},dataSource:h,renderItem:function(e){var t=e.type,a=e.count,n=e.color,o=e.extra;return r.a.createElement(Qt.b.Item,null,r.a.createElement(_t,{strong:!0,type:n},"".concat(t,": ").concat(a)),o&&r.a.createElement(_t,null,o))}})},Wt=a(95),Jt=a.n(Wt),Ht=function(e){var t=e.dices,a=e.theme,n=e.className;return(null===t||void 0===t?void 0:t.length)?r.a.createElement("div",{className:P()(Jt.a.dices,Object(d.a)({},n,!!n))},t.map((function(e,t){var n,o=e.selectable,i=e.selected,l=e.disabled,c=e.toggle,s=e.value;return r.a.createElement("div",{key:t.toString(),className:P()(Jt.a.dice,(n={},Object(d.a)(n,Jt.a.selectable,o),Object(d.a)(n,Jt.a.selected,i),Object(d.a)(n,Jt.a.unselectable,l),Object(d.a)(n,Jt.a["theme-".concat(a)],!!a),Object(d.a)(n,Jt.a.explosion,null===s||void 0===s?void 0:s.explosion),n)),onClick:o?c:void 0},r.a.createElement(kt,{dice:e}))}))):null},Kt=function(e){var t=e.dices,a=e.basePool,n=e.className,o=e.rerollTypes;if(!a||a>t.length)throw new Error("Better than infite loop");return r.a.createElement("div",{className:n},function(e){for(var t=e.dices,a=e.basePool,n=e.rerollTypes,r=[],o=oe({dices:t,basePool:a,rerollTypes:n}),i=a+t.filter((function(e){var t=e.metadata;return"addkept"===(null===t||void 0===t?void 0:t.source)})).length;o.length>0;){var l=te(o.slice(0,i));o=o.slice(i,o.length),i=l.filter((function(e){var t=e.status,a=e.value.explosion;return"kept"===t&&a>0})).length,r.push(l)}return r}({dices:t,basePool:a,rerollTypes:o}).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t.toString()},t>0&&r.a.createElement(v.a,null),r.a.createElement(Ht,{dices:e,theme:"shiny"}))})))},qt=a(121),Xt=a.n(qt),$t=Vt.a.Paragraph,ea=function(e){var t=e.dices,a=e.onChange,n=e.compromised;return r.a.createElement(b.a,{onValuesChange:function(e,t){a(t.dices)},initialValues:{dices:t},className:Xt.a["add-kept-form"]},r.a.createElement(b.a.List,{name:"dices"},(function(e,a,o){var i=a.add,l=a.remove,s=o.errors;return r.a.createElement(Tt,{fields:e,defaultValue:{type:"ring",value:{opportunity:1}},errors:s,buttonText:"Add Kept Die",add:i,remove:l,values:t,facets:n?It.map((function(e){return e.value.strife>0?Object(c.a)({},e,{disabled:!0}):e})):It})})))},ta=function(e){var t=e.dices,a=e.ring,n=e.skill,o=e.onFinish,i=e.tn,l=e.rerollTypes,s=e.addkept,u=e.setAddKept,m=e.modifiers,d=Object(S.c)(Se),f=Object(S.b)(),h=m.includes("compromised"),b=X({ring:a,modifiers:m}),y=q({ring:a,skill:n,modifiers:m}),g=t.some((function(e){return"kept"===e.status})),v=h&&t.filter((function(e){return"pending"===e.status})).every((function(e){return e.value.strife})),E=(null===s||void 0===s?void 0:s.length)&&!g;return r.a.createElement("div",{className:Xt.a.layout},r.a.createElement(Kt,{dices:function(){var e=t.map((function(e,t){var a=e.status,n=e.value,r="kept"===a||d.includes(t),o="pending"===a&&(!h||!n.strife)&&(r||g||b>d.length),i="kept"!==a&&("pending"!==a||!o);return Object(c.a)({},e,{selectable:o,selected:r,disabled:i,toggle:function(){return function(e){return d.includes(e)?f(fe(d.filter((function(t){return t!==e})))):f(fe([].concat(Object(p.a)(d),[e])))}(t)}})}));return E?[].concat(Object(p.a)(e),Object(p.a)(s.map((function(e){return Object(c.a)({},e,{status:"pending",metadata:{source:"addkept"},selected:!0,selectable:!1})})))):e}(),basePool:y,rerollTypes:l}),r.a.createElement($t,{className:Xt.a.text},function(){if(v)return"Being compromised, you cannot keep any die with strife\u2026 Which, in this very specific case, means you cannot keep any die at all.";if(g)return"Select which explosions you wish to keep (if any).";var e=b>1?"You can keep up to ".concat(b," dice (min 1)"):"You must choose one die to keep";return(null===s||void 0===s?void 0:s.length)&&(e+=" in top of your added dice"),e+=".",h?"".concat(e," However, due to being compromised, you cannot keep any die with strife."):e}()),r.a.createElement(zt,{dices:E?[].concat(Object(p.a)(t),Object(p.a)(s.map((function(e){return Object(c.a)({},e,{status:"kept"})})))):t,tn:i,extra:d,className:Xt.a.figures,modifiers:l}),!g&&r.a.createElement(ea,{dices:s,onChange:u,compromised:h}),r.a.createElement(De,{onClick:function(){g||!(null===s||void 0===s?void 0:s.length)?o(d):o(d,s)},disabled:!(g||v)&&0===d.length},v?"Continue":g?0===d.length?"Don't keep anything else":1===d.length?"Also keep that die":"Also keep these dice":1===d.length?"Keep that die":0===d.length?"Must select at least one die":"Keep these dice"))},aa=a(461),na=a(37),ra=a(179),oa=a.n(ra),ia=function(e){var t=e.campaign,a=e.character,n=e.description,o=e.tn,i=e.ring,l=e.skill,c=e.modifiers,s=e.player,u=e.channeled,m=e.addkept,d=[c.includes("compromised")&&"Compromised",c.includes("adversity")&&"Adversity",c.includes("distinction")&&"Distinction",c.includes("stirring")&&"Sh\u016bji \u2014 Stirring the Embers",c.includes("deathdealer")&&"Bayushi Deathdealer School Ability",c.includes("manipulator")&&"Bayushi Manipulator School Ability",c.includes("2heavens")&&"Attacking a warding Mirumoto Two-Heavens Adept",c.includes("ruthless")&&"Custom reroll (from NPCs' or other PCs' effects)",c.includes("shadow")&&"Ikoma Shadow School Ability",c.includes("sailor")&&"Storm Fleet Sailor School Ability",c.some(H)&&"Custom reroll",c.includes("ishiken")&&"Ishiken Initiate School Ability",c.some(K)&&"Custom alteration"].filter(Boolean).join(" / ");return r.a.createElement(aa.a,{column:{md:3,sm:1,xs:1},bordered:!0},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a.Item,{label:"Campaign"},r.a.createElement(na.b,{to:"/rolls?campaign=".concat(t)},t)),r.a.createElement(aa.a.Item,{label:"Character"},r.a.createElement(na.b,{to:"/rolls?campaign=".concat(t,"&character=").concat(a)},a)),r.a.createElement(aa.a.Item,{label:"Player"},r.a.createElement(na.b,{to:"/rolls?player=".concat(s.id)},s.name))),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a.Item,{label:"Description",span:2},n),r.a.createElement(aa.a.Item,{label:"TN"},o||"?")),r.a.createElement(aa.a.Item,{label:"Ring"},i),r.a.createElement(aa.a.Item,{label:"Skill"},l),r.a.createElement(aa.a.Item,{label:"Voided?"},c.includes("void")?"Yes":"No"),(null===u||void 0===u?void 0:u.length)&&r.a.createElement(aa.a.Item,{label:"Channeled Dice Used",span:3},r.a.createElement("div",{className:oa.a.dices},te(u).map((function(e,t){return r.a.createElement(kt,{key:t.toString(),dice:e})})))),(null===m||void 0===m?void 0:m.length)&&r.a.createElement(aa.a.Item,{label:"Kept Dice Added",span:3},r.a.createElement("div",{className:oa.a.dices},te(m).map((function(e,t){return r.a.createElement(kt,{key:t.toString(),dice:e})})))),d&&r.a.createElement(aa.a.Item,{label:"Additional Modifiers",span:3},d))},la=a(183),ca=a.n(la),sa=a(464),ua=function(){return r.a.createElement(sa.a,{message:"Something bad happened. Try reloading the page. If things are still broken, please contact administrator through the link at the bottom of the page.",type:"error",banner:!0})},ma=a(70),da=a.n(ma),pa=Vt.a.Title,fa=Vt.a.Paragraph,ha={distinction:"Distinction",adversity:"Adversity",shadow:"Ikoma Shadow School Ability",deathdealer:"Bayushi Deathdealer School Ability",manipulator:"Bayushi Manipulator School Ability",ishiken:"Ishiken Initiate School Ability","2heavens":"Enemy Mirumoto Two-Heavens Adept School Ability",ruthless:"Custom reroll (from NPCs' or other PCs' effects)",sailor:"Storm Fleet Sailor School Ability"},ba={adversity:"No die with a success or an explosion","2heavens":"No die with a success or an explosion"},ya=function(e){var t=e.dices,a=e.basePool,n=e.rerollType,o=e.rerollTypes;if(("deathdealer"===n||"manipulator"===n)&&o.includes("distinction"))return null;var i,l=H(i=n)?"Custom reroll":K(i)?"Custom alteration":ha[i];if(!t.some((function(e){return ae(e,n)})))return r.a.createElement("div",{className:da.a.layout},r.a.createElement(pa,{level:4,className:da.a.title},l),r.a.createElement(fa,{className:da.a.empty},ba[n]||"Ability not used"));var s=o.indexOf(n),u=o.filter((function(e,t){return t<s}));return r.a.createElement("div",{className:da.a.layout},r.a.createElement(pa,{level:4,className:da.a.title},l),r.a.createElement("div",{className:da.a.container},r.a.createElement(Ht,{dices:(s<=0?t.slice(0,a):re({dices:t,rerollType:o[s-1],previousRerollTypes:u,basePool:a})).map((function(e){return Object(c.a)({},e,{selected:ae(e,n)})})),theme:"reroll",className:da.a.dices}),r.a.createElement("div",{className:da.a["arrow-right"]},"\u21e8"),r.a.createElement("div",{className:da.a["arrow-down"]},"\u21e9"),r.a.createElement(Ht,{dices:re({dices:t,rerollType:n,previousRerollTypes:u,basePool:a}).map((function(e){return ne(e,n)?Object(c.a)({},e,{selected:!0}):e})),theme:"reroll",className:da.a.dices})))},ga=function(e){var t=e.dices,a=e.basePool,n=e.rerollTypes;return 0===n.length?null:r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement(ya,{key:e,dices:t,basePool:a,rerollType:e,rerollTypes:n})})))},va=function(e){var t=e.dices,a=e.basePool,n=e.rerollTypes;return r.a.createElement(Kt,{className:"boxed",basePool:a,rerollTypes:n,dices:t.map((function(e){var t="kept"===e.status;return Object(c.a)({},e,{disabled:!t,selected:t})}))})},Ea=a(270),ka=a(156),xa=function(e){var t=e.id,a=e.description,n=e.tn,o=e.dices,i=e.modifiers,l=void 0===i?[]:i;if(!t)return r.a.createElement(I.a,{disabled:!0},"Copy as BBCode");var c=o.filter((function(e){return"kept"===e.status})),s=ee(c),u=s.successCount,m=s.opportunityCount,d=s.strifeCount,p=s.blankCount,f="Success: [b]".concat(u,"[/b] / Opportunity: [b]").concat(m,"[/b] / Strife: [b]").concat(d,"[/b]");l.includes("ishiken")&&(f+=" / Magnitude: [b]".concat(p,"[/b]"));var h='[url="'.concat(window.location.origin,"/rolls/").concat(t,'"]').concat(a,"[/url] | TN: ").concat(n||"?"," | ").concat(f);return r.a.createElement(ka.CopyToClipboard,{text:h,onCopy:function(){return Ea.b.success("Copied to clipboard!")}},r.a.createElement(I.a,null,"Copy as BBCode"))},ja=a(184),Aa=a.n(ja),Oa=function(e){var t=e.id;if(!t)return r.a.createElement(I.a,{disabled:!0},"Copy link");var a="".concat(window.location.origin,"/rolls/").concat(t);return r.a.createElement(ka.CopyToClipboard,{text:a,onCopy:function(){return Ea.b.success("Copied to clipboard!")}},r.a.createElement(I.a,null,"Copy link"))},Ia=a(245),wa=a.n(Ia),Ca=function(e){var t=e.children;return r.a.createElement("div",{className:wa.a.buttons},t)},Sa=function(e){var t=e.dices,a=e.tn,n=e.description,o=e.id,i=e.button,l=e.basePool,c=e.rerollTypes;return r.a.createElement("div",{className:Aa.a.layout},r.a.createElement("div",{className:Aa.a.container},r.a.createElement(Ht,{dices:te(oe({dices:t,basePool:l,rerollTypes:c}).filter((function(e){return"kept"===e.status})))}),r.a.createElement(zt,{dices:t,tn:a,modifiers:c}),r.a.createElement(Ca,null,r.a.createElement(Oa,{id:o}),r.a.createElement(xa,{id:o,dices:t,tn:a,description:n,modifiers:c}),i)))},Ra=a(465),Da=Vt.a.Link,Ta=Vt.a.Paragraph,Ga=function(e){var t=e.className;return r.a.createElement(Ra.a,null,r.a.createElement(sa.a,{className:t,showIcon:!0,closable:!0,message:"Mono no aware",description:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta,null,"You are not logged in. While you can totally use the roller as a guest, please take note that"," ",r.a.createElement("strong",null,"any roll made won't be persisted"),"."),r.a.createElement(Ta,null,"You will need to ",r.a.createElement(Da,{href:"/login"},"log in")," first if you wish to keep and share your results.")),type:"warning"}))},Ma=a(454),Na=a(246),Ya=a.n(Na),Fa=Vt.a.Paragraph,Ba=function(e){var t=e.dices,a=e.text,n=e.footer,o=e.theme;return r.a.createElement(Ma.a,{bordered:!1},r.a.createElement("div",{className:"boxed"},a&&r.a.createElement(Fa,{className:Ya.a.text},a),r.a.createElement(Ht,{dices:t,theme:o}),n&&r.a.createElement("div",null,n)))},Ua=function(e){var t=e.dices,a=e.onFinish,o=e.modifiers,i=Object(n.useState)([]),s=Object(l.a)(i,2),u=s[0],m=s[1],d=o.includes("stirring")?3:2,f=o.includes("deathdealer")||o.includes("manipulator");return r.a.createElement(Ba,{text:f?"Thanks to your Distinction and your School Ability, you can select up to ".concat(d," plus your school rank dice to be rerolled."):"Thanks to your Distinction, you can select up to ".concat(d," dice to be rerolled."),dices:t.map((function(e,t){var a=u.includes(t),n=a||u.length<d||f;return Object(c.a)({},e,{selectable:n,selected:a,disabled:!n,toggle:function(){return function(e){return u.includes(e)?m(u.filter((function(t){return t!==e}))):m([].concat(Object(p.a)(u),[e]))}(t)}})})),footer:r.a.createElement(De,{onClick:function(){return a(u)}},0===u.length?"Don't reroll anything":1===u.length?"Reroll that die":"Reroll these dice"),theme:"reroll"})},Pa=function(e){var t=e.dices,a=e.onFinish,o=Object(n.useState)([]),i=Object(l.a)(o,2),s=i[0],u=i[1],m=t.filter((function(e){var t=e.value;return t.success||t.explosion})),d=Math.min(2,m.length);return r.a.createElement(Ba,{text:"Due to your Adversity, you must select two success dice (or as much as possible if you don't have two) that will be rerolled.",dices:t.map((function(e,t){var a=s.includes(t),n=(e.value.success||e.value.explosion)&&(a||s.length<2);return Object(c.a)({},e,{selectable:n,selected:a,disabled:!n,toggle:function(){return function(e){return s.includes(e)?u(s.filter((function(t){return t!==e}))):u([].concat(Object(p.a)(s),[e]))}(t)}})})),footer:r.a.createElement(De,{disabled:s.length<d,onClick:function(){return a(s)}},"Continue"),theme:"reroll"})},Va=function(e){var t=e.dices,a=e.onFinish,o=e.text,i=e.basePool,s=e.rerollTypes,u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],f=m[1];return r.a.createElement(Ba,{text:o,dices:oe({dices:t.map((function(e,t){var a=d.includes(t);return Object(c.a)({},e,{selectable:!0,selected:a,disabled:!1,toggle:function(){return function(e){return d.includes(e)?f(d.filter((function(t){return t!==e}))):f([].concat(Object(p.a)(d),[e]))}(t)}})})),basePool:i,rerollTypes:s}),footer:r.a.createElement(De,{onClick:function(){return a(d)}},0===d.length?"Skip":1===d.length?"Reroll that die":"Reroll these dice"),theme:"reroll"})},Qa=a(248),Za=a.n(Qa),La=Vt.a.Text,_a=Vt.a.Paragraph,za=function(e){var t=e.value,a=t.opportunity,n=t.strife,r=t.success,o=t.explosion;return 0===a&&0===n&&0===r&&0===o},Wa={ring:[{opportunity:1,strife:1},{opportunity:1},{success:1,strife:1},{success:1},{explosion:1,strife:1}],skill:[{opportunity:1},{success:1,strife:1},{success:1},{explosion:1,strife:1},{success:1,opportunity:1},{explosion:1}]},Ja=function(e){var t=e.dices,a=e.onFinish,o=e.basePool,i=e.rerollTypes,s=Object(n.useState)([]),u=Object(l.a)(s,2),m=u[0],d=u[1],f=m.map((function(e){return e.position})),h=m.length>0&&t.filter((function(e,t){return f.includes(t)})).some(za),b=m.length>0&&!h,y=r.a.createElement(_a,null,"Your School Ability allows you to receive a number of fatigue up to your school rank to either:",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(La,null,"Choose a number of dice with non-blank results equal to the fatigue you received , and alter each to a blank result.")),r.a.createElement("li",null,r.a.createElement(La,null,"Choose a number of dice with blank results equal to the fatigue you received, and alter each to a non-blank result of your choice."))));return r.a.createElement(Ba,{text:y,dices:oe({dices:t.map((function(e,a){var n=f.includes(a),r=!h&&!b||h&&za(e)||b&&!za(e);return Object(c.a)({},e,{selectable:r,selected:n,disabled:!r,toggle:function(){return function(e){if(m.some((function(t){return t.position===e})))return d(m.filter((function(t){return t.position!==e})));var a=t[e];return d([].concat(Object(p.a)(m),[{position:e,value:za(a)?{success:1}:{}}]))}(a)}})})),basePool:o,rerollTypes:i}),footer:r.a.createElement(r.a.Fragment,null,h&&r.a.createElement("div",{className:Za.a.alterators},r.a.createElement(La,null,"Choose your desired non-blank result".concat(m.length>1?"s":"")),m.map((function(e){var a=e.position,n=e.value,o=t[a].type;return r.a.createElement(St,{key:a.toString(),value:{type:o,value:n},onChange:function(e){var t=e.value,n=Object(p.a)(m),r=n.findIndex((function(e){return e.position===a}));n[r].value=t,d(n)},facets:Wa[o].map((function(e){return{type:o,value:e}}))})}))),r.a.createElement(De,{onClick:function(){return a(m)}},b?"Pull":h?"Push":"Skip")),theme:"reroll"})},Ha=function(e){var t=e.dices,a=e.onFinish,o=e.basePool,i=e.rerollTypes,s=Object(n.useState)([]),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Math.min(1,t.filter((function(e){var t=e.value,a=t.success,n=t.explosion;return a>0||n>0})).length);return r.a.createElement(Ba,{text:"You must reroll dice containing success up to the attacked Mirumoto's school rank.",dices:oe({dices:t.map((function(e,t){var a=m.includes(t),n=e.value.success>0||e.value.explosion>0;return Object(c.a)({},e,{selectable:n,selected:a,disabled:!n,toggle:function(){return function(e){return m.includes(e)?d(m.filter((function(t){return t!==e}))):d([].concat(Object(p.a)(m),[e]))}(t)}})})),basePool:o,rerollTypes:i}),footer:r.a.createElement(De,{disabled:m.length<f,onClick:function(){return a(m)}},"Continue"),theme:"reroll"})},Ka=Vt.a.Paragraph,qa=function(e){var t=e.dices,a=e.onFinish,n=e.basePool,o=e.rerollTypes;return e.compromised?r.a.createElement(Ma.a,{bordered:!1},r.a.createElement("div",{className:"boxed"},r.a.createElement(Ka,null,"You may not use your School Ability as you are compromised."),r.a.createElement(De,{onClick:function(){return a([])}},"Continue"))):r.a.createElement(Va,{text:"You may receive a number of strife up to your school rank to reroll that many rolled dice.",dices:t,onFinish:a,basePool:n,rerollTypes:o})},Xa=a(249),$a=a.n(Xa),en={ring:[{},{opportunity:1,strife:1},{opportunity:1},{success:1,strife:1},{success:1},{explosion:1,strife:1}],skill:[{},{opportunity:1},{success:1,strife:1},{success:1},{explosion:1,strife:1},{success:1,opportunity:1},{explosion:1}]},tn=function(e){var t=e.text,a=e.dices,o=e.onFinish,i=e.basePool,s=e.rerollTypes,u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],f=m[1],h=d.map((function(e){return e.position}));return r.a.createElement(Ba,{text:t,dices:oe({dices:a.map((function(e,t){var a=h.includes(t);return Object(c.a)({},e,{selectable:!0,selected:a,disabled:!1,toggle:function(){return function(e){return d.some((function(t){return t.position===e}))?f(d.filter((function(t){return t.position!==e}))):f([].concat(Object(p.a)(d),[{position:e,value:{success:1}}]))}(t)}})})),basePool:i,rerollTypes:s}),footer:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$a.a.list},d.map((function(e){var t=e.position,n=e.value,o=a[t].type;return r.a.createElement(St,{key:t.toString(),value:{type:o,value:n},onChange:function(e){var a=e.value,n=Object(p.a)(d),r=n.findIndex((function(e){return e.position===t}));n[r].value=a,f(n)},facets:en[o].map((function(e){return{type:o,value:e}}))})}))),r.a.createElement(De,{onClick:function(){return o(d)}},"Continue")),theme:"reroll"})},an=function(e){var t=e.dices,a=e.onFinish,n=e.basePool,o=e.rerollTypes,i=e.addReroll,l=e.addAlteration,c="If need be you may add ".concat(o.length>0?"extra":""," effects that modify dice at this step."),s="Apply ".concat(o.filter((function(e){return!$(e)})).length>0?"another":"a"," reroll"),u="Apply ".concat(o.filter((function(e){return $(e)})).length>0?"another":"an"," alteration");return r.a.createElement(Ba,{text:c,dices:oe({dices:t,basePool:n,rerollTypes:o}),footer:r.a.createElement(Ca,null,r.a.createElement(I.a,{disabled:!i,onClick:i},s),r.a.createElement(I.a,{disabled:!l,onClick:l},u),r.a.createElement(De,{onClick:a},"Skip"))})},nn=function(e){var t=e.roll,a=e.dispatch,n=t.dices,o=t.modifiers,i=t.metadata,l=o.includes("compromised"),c=q(t),s=(null===i||void 0===i?void 0:i.rerolls)||[],u=function(e){return o.includes(e)&&!s.includes(e)};if(u("distinction"))return r.a.createElement(Ua,{dices:n,onFinish:function(e){return a(ke(t,e,"distinction"))},modifiers:o});if(u("adversity"))return r.a.createElement(Pa,{dices:n,onFinish:function(e){return a(ke(t,e,"adversity"))}});var m=function(e){var o=e.name,i=e.text;return r.a.createElement(Va,{dices:n,onFinish:function(e){return a(ke(t,e,o))},text:i,basePool:c,rerollTypes:s})};if(u("deathdealer"))return r.a.createElement(m,{name:"deathdealer",text:"Thanks to your School Ability, you may reroll dice up to your school rank."});if(u("manipulator"))return r.a.createElement(m,{name:"manipulator",text:"Thanks to your School Ability, you may reroll dice up to your school rank."});if(u("2heavens"))return r.a.createElement(Ha,{dices:n,onFinish:function(e){return a(ke(t,e,"2heavens"))},basePool:c,rerollTypes:s});if(u("ruthless"))return r.a.createElement(m,{name:"ruthless",text:"Custom reroll: Select the dice you have to reroll."});if(u("shadow"))return r.a.createElement(m,{name:"shadow",text:"Thanks to your School Ability, you can stake honor up to your school rank to re-roll a number of dice equal to twice the amount of honor staked."});if(u("sailor"))return r.a.createElement(qa,{dices:n,onFinish:function(e){return a(ke(t,e,"sailor"))},basePool:c,rerollTypes:s,compromised:l});var d=o.find((function(e){return H(e)&&u(e)}));if(d)return r.a.createElement(m,{name:d,text:"Custom reroll: Select the dice you want/have to reroll."});if(u("ishiken"))return r.a.createElement(Ja,{dices:n,onFinish:function(e){return a(xe(t,e,"ishiken"))},basePool:c,rerollTypes:s});var p=o.find((function(e){return K(e)&&u(e)}));if(p)return r.a.createElement(tn,{dices:n,onFinish:function(e){return a(xe(t,e,p))},basePool:c,rerollTypes:s,text:"Custom alteration: Change the result as you want/have to."});return r.a.createElement(an,{dices:n,onFinish:function(){return a(be())},basePool:c,rerollTypes:s,addReroll:o.length<100&&function(){return a(je(t,["ruleless".concat(o.length.toString().padStart(2,"0"))]))},addAlteration:o.length<100&&function(){return a(je(t,["reasonless".concat(o.length.toString().padStart(2,"0"))]))}})},rn=function(e){var t=e.roll,a=e.dispatch,n=t.dices,o=t.metadata,i=q(t),l=(null===o||void 0===o?void 0:o.rerolls)||[];return r.a.createElement(r.a.Fragment,null,l.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ga,{dices:n,basePool:i,rerollTypes:l}),r.a.createElement(v.a,null)),r.a.createElement(nn,{roll:t,dispatch:a}))},on=h.a.Panel,ln=function(e){var t=e.children,a=Object(S.c)(Fe),n=Object(S.c)(Ie);return r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement(Ga,{className:ca.a.alert}),r.a.createElement(z,{current:n,className:ca.a.steps}),r.a.createElement(r.a.Fragment,null,t))},cn=function(e){var t=e.save,a=Object(S.c)(Ae),o=Object(S.c)(Fe),i=Object(S.c)(Ie),s=Object(S.c)(we),u=Object(S.b)();Object(n.useEffect)((function(){t&&u&&(u(se(Object(c.a)({},t,{},t.roll.parameters))),u(pe({id:t.id,dices:t.roll.dices,metadata:t.roll.metadata,player:t.user})))}),[t,u]);var m=Object(n.useState)([V]),d=Object(l.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){f(i!==Q?[i]:["modify"])}),[i]);var b=a.dices,y=a.tn,g=a.modifiers,v=a.ring,E=a.skill,k=a.error,x=a.id,j=a.description,A=a.metadata,O=a.addkept,I=q(a),w=(null===A||void 0===A?void 0:A.rerolls)||[];if(k)return r.a.createElement(ua,null);var C=function(e){return i!==e&&(e===L?i!==L:e===Z?![Z,L].includes(i):e===Q&&(i===V||!g.some(J)))},R=function(e){var t=e.name;return C(t)?null:t===L?r.a.createElement(Sa,{dices:b,tn:y,button:r.a.createElement(De,{onClick:function(){return u(me())}},"New roll"),id:x,description:j,basePool:I,rerollTypes:w}):t===Z?i===Z?r.a.createElement(ta,{dices:b,onFinish:function(e,t){return u(function(e,t,a){return function(n){n(ue(!0));var r=function(e){n(ge(e))},o=function(){n(ve(!0))},i=e.id;if(i){var l=function(){return N({uri:"/ffg/l5r/rolls/".concat(i,"/keep"),body:{positions:t},success:r,error:o})};return(null===a||void 0===a?void 0:a.length)?void N({uri:"/ffg/l5r/rolls/".concat(i,"/parameters"),body:{addkept:a},success:l,error:o}):void l()}var c=e.tn,s=e.ring,u=e.skill,m=e.modifiers,d=e.dices,p=e.metadata,f=e.addkept;T({uri:"/public/ffg/l5r/rolls/keep",body:{roll:{parameters:{tn:c,ring:s,skill:u,modifiers:m,addkept:f},dices:d,metadata:p},positions:t},success:r,error:o})}}(a,e,t))},tn:y,ring:v,skill:E,rerollTypes:w,addkept:O,setAddKept:function(e){return u(he(e))},modifiers:g}):r.a.createElement(va,{dices:b,basePool:I,rerollTypes:w}):t===Q?i===Q?r.a.createElement(rn,{roll:a,dispatch:u}):r.a.createElement(ga,{dices:b,basePool:I,rerollTypes:w}):null};return r.a.createElement(ln,null,r.a.createElement(h.a,{activeKey:p,onChange:f},r.a.createElement(on,{header:"Declare",key:"declare",collapsible:i===V?"disabled":"header"},i===V?r.a.createElement(Pt,{onFinish:function(e){return u(function(e,t){return function(a){a(ue(!0)),a(se(e));var n=function(){a(ve(!0))},r=e.tn,o=e.ring,i=e.skill,l=e.modifiers,s=e.campaign,u=e.character,m=e.description,d=e.channeled,p=e.addkept;t?N({uri:"/ffg/l5r/rolls/create",body:{tn:r,ring:o,skill:i,modifiers:l,campaign:s,character:u,description:m,channeled:d,addkept:p},success:function(e){a(pe(Object(c.a)({},e,{player:t})))},error:n}):T({uri:"/public/ffg/l5r/rolls/create",body:{tn:r,ring:o,skill:i,modifiers:l,channeled:d,addkept:p},success:function(e){a(ge(e))},error:n})}}(Object(c.a)({},a,{},e),o))},values:a}):r.a.createElement(ia,s)),r.a.createElement(on,{header:"Modify",key:"modify",collapsible:C(Q)||i===Q?"disabled":"header"},r.a.createElement(R,{name:Q})),r.a.createElement(on,{header:"Keep",key:"keep",collapsible:C(Z)||i===Z?"disabled":"header"},r.a.createElement(R,{name:Z})),r.a.createElement(on,{header:"Resolve",key:"resolve",collapsible:C(L)||i===L?"disabled":"header"},r.a.createElement(R,{name:L}))))},sn=a(452),un=a(73),mn=a(250),dn=a.n(mn),pn=a(122),fn=a.n(pn),hn=a(46),bn=sn.a.Header,yn=sn.a.Content,gn=sn.a.Footer,vn=function(e){var t=e.children,a=Object(S.c)(Fe),o=Object(hn.g)(),i=Object(n.useState)(),c=Object(l.a)(i,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){u(function(e){var t=e.pathname,n=e.search;return"/"===t?"new_roll":"/rolls"!==t||n?"/rolls"===t&&a&&n==="?player=".concat(a.id)?"my_rolls":null:"all_rolls"}(o))}),[o,a]),r.a.createElement(sn.a,{className:fn.a.layout},r.a.createElement(bn,null,r.a.createElement(un.a,{theme:"dark",mode:"horizontal",selectedKeys:[s],onSelect:function(e){var t=e.key;return u(t)}},r.a.createElement(un.a.Item,{className:fn.a.logo,key:"home"},r.a.createElement(na.b,{to:"/"},r.a.createElement("img",{alt:"Logo",src:dn.a}))),r.a.createElement(un.a.Item,{key:"new_roll"},r.a.createElement(na.b,{to:"/"},"Roll")),r.a.createElement(un.a.Item,{key:"all_rolls"},r.a.createElement(na.b,{to:"/rolls"},"All rolls")),a&&r.a.createElement(un.a.Item,{key:"my_rolls"},r.a.createElement(na.b,{to:"/rolls?player=".concat(a.id)},"My rolls")),r.a.createElement(un.a.Item,{className:fn.a.login},a?r.a.createElement("a",{href:"/user/profile"},a.name):r.a.createElement("a",{href:"/login"},"Login")))),r.a.createElement(yn,null,t),r.a.createElement(gn,{className:fn.a.footer},"Sakkaku Project / 2020 / ",r.a.createElement("a",{href:"mailto:contact.sakkaku@gmail.com"},"Issue? Suggestion?")))},En=a(453),kn=a(252),xn=a.n(kn),jn=a(253),An=a.n(jn),On=a(254),In=a.n(On),wn=a(255),Cn=a.n(wn),Sn=function(e){var t=e.opportunity,a=e.success,n=e.strife;return r.a.createElement("span",{className:Cn.a.result},r.a.createElement("img",{src:In.a,title:"Success",alt:"Success"}),r.a.createElement("span",null,": ".concat(a,", ")),r.a.createElement("img",{src:xn.a,title:"Opportunity",alt:"Opportunity"}),r.a.createElement("span",null,": ".concat(t,", ")),r.a.createElement("img",{src:An.a,title:"Strife",alt:"Strife"}),r.a.createElement("span",null,": ".concat(n)))},Rn=a(63),Dn=a.n(Rn),Tn=a(185),Gn=a.n(Tn),Mn=a(155),Nn=a(186),Yn=a.n(Nn),Fn=function(){return r.a.createElement("div",{className:Yn.a.container},r.a.createElement(Mn.a,{className:Yn.a.loader,size:"large"}))},Bn=a(158),Un=a(256),Pn=a.n(Un),Vn=function(e){var t=e.pageSize,a=e.current,n=e.total,o=Object(hn.g)(),i=Object(hn.f)(),l=function(e){return"".concat(o.pathname,"?").concat(Dn.a.stringify(Object(c.a)({},Dn.a.parse(o.search),{page:e})))};return r.a.createElement(Bn.a,{className:Pn.a.pagination,simple:!0,pageSize:t,current:a,total:n,itemRender:function(e,t,n){return"prev"===t?r.a.createElement(na.b,{to:l(a-1)},"<"):"next"===t?r.a.createElement(na.b,{to:l(a+1)},">"):n},onChange:function(e){i.push(l(e))}})},Qn=Vt.a.Text,Zn=[{title:"Date",dataIndex:"date",key:"date",render:function(e){return r.a.createElement(Qn,null,r.a.createElement("span",null,new Date(e).toLocaleDateString()),r.a.createElement("span",{className:Gn.a.time}," ",new Date(e).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"})))}},{title:"Campaign",dataIndex:"campaign",key:"campaign",render:function(e){return r.a.createElement(na.b,{to:"/rolls?".concat(Dn.a.stringify({campaign:e}))},e)}},{title:"Character",dataIndex:"character",key:"character",render:function(e){var t=e.character,a=e.campaign;return r.a.createElement(na.b,{to:"/rolls?".concat(Dn.a.stringify({campaign:a,character:t}))},t)}},{title:"Player",dataIndex:"player",key:"player",render:function(e){return e?r.a.createElement(na.b,{to:"/rolls?".concat(Dn.a.stringify({player:e.id}))},e.name):r.a.createElement(Qn,{delete:!0},"Deleted account")},responsive:["md"]},{title:"Description",dataIndex:"description",key:"description",responsive:["lg"]},{title:"Result",dataIndex:"result",key:"result",width:200,render:function(e){return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(Sn,e):r.a.createElement(Qn,{type:"secondary"},"Ongoing\u2026"))},responsive:["md"]},{title:"Success?",dataIndex:"success",key:"success",align:"center",render:function(e){var t=e.result,a=e.tn;return t?a?t.success>=a?r.a.createElement(Qn,{type:"success"},"Yes"):r.a.createElement(Qn,{type:"danger"},"No"):r.a.createElement(Qn,null,"?"):r.a.createElement(Qn,{type:"secondary"},"TBD")},responsive:["md"]},{title:"",dataIndex:"see_more",key:"see_more",render:function(e){var t=e.id;return r.a.createElement(na.b,{title:"See more",to:"/rolls/".concat(t),className:Gn.a["see-more"]},"\u27a5")}}],Ln=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(),p=Object(l.a)(d,2),f=p[0],h=p[1],b=Object(hn.g)(),y=Dn.a.parse(b.search),g=parseInt(y.page)||1,v="/public/ffg/l5r/rolls?".concat(Dn.a.stringify(Object(c.a)({},y,{page:g})));if(Object(n.useEffect)((function(){o(!0),G({uri:v,success:function(e){h(e),o(!1)},error:function(e){m(!0),o(!1)}})}),[v]),a)return r.a.createElement(Fn,null);if(u)return r.a.createElement(ua,null);if(!f)return null;var E=f.items.map((function(e){var t=e.id,a=e.created_at,n=e.campaign,r=e.character,o=e.user,i=e.description,l=e.result;return{key:t,date:a,campaign:n,character:{campaign:n,character:r},player:o,description:i,result:l,success:{result:l,tn:e.roll.parameters.tn},see_more:{id:t}}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(En.a,{columns:Zn,dataSource:E,pagination:!1}),r.a.createElement(Vn,{pageSize:f.per_page,current:g,total:f.total}))},_n=h.a.Panel,zn=function(e){var t,a,n=e.dices,o=e.button,i=e.intent,l=e.context,c=e.player,s=i.tn,u=l.id,m=l.description,d=q(i),p=(null===l||void 0===l||null===(t=l.roll)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.rerolls)||[];return r.a.createElement(h.a,{defaultActiveKey:["declare","resolve"]},r.a.createElement(_n,{header:"Declare",key:"declare"},r.a.createElement(ia,Object.assign({},l,i,{player:c}))),r.a.createElement(_n,{header:"Modify",key:"modify",disabled:0===p.length},r.a.createElement(ga,{dices:n,basePool:d,rerollTypes:p})),r.a.createElement(_n,{header:"Keep",key:"keep"},r.a.createElement(va,{dices:n,basePool:d,rerollTypes:p})),r.a.createElement(_n,{header:"Resolve",key:"resolve",collapsible:"disabled"},r.a.createElement(Sa,{dices:n,tn:s,button:o,id:u,description:m,basePool:d,rerollTypes:p})))},Wn=a(462),Jn=a(187),Hn=a.n(Jn),Kn=Vt.a.Text,qn=function(e){var t=e.campaign,a=e.character,n=e.description;return r.a.createElement(Wn.a,{className:Hn.a.container},r.a.createElement(Wn.a.Item,null,r.a.createElement(na.b,{to:"/rolls"},"All rolls")),r.a.createElement(Wn.a.Item,null,r.a.createElement(na.b,{to:"/rolls?campaign=".concat(t)},t)),r.a.createElement(Wn.a.Item,null,r.a.createElement(na.b,{to:"/rolls?campaign=".concat(t,"&character=").concat(a)},a)),r.a.createElement(Wn.a.Item,{className:Hn.a.description},r.a.createElement(Kn,{ellipsis:!0},n)))},Xn=function(e){var t=Object(hn.f)();return r.a.createElement(I.a,Object.assign({onClick:function(){t.length>2?t.goBack():t.push("/rolls")}},e),"Go back")},$n=function(){var e=Object(hn.h)().id,t=Object(S.c)(Fe),a=Object(n.useState)(!0),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(),f=Object(l.a)(p,2),h=f[0],b=f[1];if(Object(n.useEffect)((function(){c(!0),G({uri:"/public/ffg/l5r/rolls/".concat(e),success:function(e){b(e),c(!1)},error:function(e){c(!1),d(!0)}})}),[e]),i)return r.a.createElement(Fn,null);if(m)return r.a.createElement(ua,null);if(!h)return null;var y=h.roll,g=h.user,v=h.result,E=y.dices,k=y.parameters,x=h.campaign,j=h.character,A=h.description;return!v&&t&&g&&t.id===g.id?r.a.createElement(cn,{save:h}):r.a.createElement(r.a.Fragment,null,r.a.createElement(qn,{campaign:x,character:j,description:A}),v?r.a.createElement(zn,{dices:E,button:r.a.createElement(Xn,null),intent:k,context:h,player:g}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ma.a,{bordered:!1},r.a.createElement(ia,Object.assign({player:g},h,k))),r.a.createElement(Ba,{text:"Check in progress. Current dice pool:",dices:te(E.filter((function(e){var t=e.status;return["pending","kept"].includes(t)}))),footer:r.a.createElement(Xn,{style:{float:"right"}})})))},er=Object(R.b)({name:"heritage",initialState:{dices:[],loading:!1,error:null,metadata:{},context:{},uuid:null},reducers:{setLoading:function(e,t){e.loading=t.payload},setError:function(e,t){e.error=t.payload},update:function(e,t){var a=t.payload,n=a.dices,r=a.metadata;e.dices=n,e.metadata=r,e.loading=!1},reset:function(e){e.dices=[],e.metadata={},e.context={},e.uuid=null,window.history.pushState(null,null,"/heritage")},setContext:function(e,t){e.context=t.payload},setUuid:function(e,t){var a=t.payload;e.uuid=a,window.history.pushState(null,null,"/heritage/".concat(a))},load:function(e,t){var a=t.payload,n=a.uuid,r=a.dices,o=a.metadata,i=a.context;e.uuid=n,e.dices=r,e.metadata=o,e.context=i,window.history.pushState(null,null,"/heritage/".concat(n))}}}),tr=er.actions,ar=tr.setLoading,nr=tr.setError,rr=tr.reset,or=tr.load,ir=er.actions,lr=ir.update,cr=ir.setContext,sr=ir.setUuid,ur=function(e){return e.heritage.loading},mr=function(e){return e.heritage.error},dr=function(e){return{uuid:e.heritage.uuid,dices:e.heritage.dices,metadata:e.heritage.metadata}},pr=function(e){return e.heritage.context},fr=er.reducer,hr=a(188),br=a.n(hr),yr=a(262),gr=a.n(yr),vr={core:{name:"Core Rulebook (page 96)",entries:[{name:"Famous Deed",min:1,max:1,description:"One of your ancestors won a great victory for their clan or even the Emperor, and was rewarded with an item of incredible quality.",modifier:"Increase your glory by 3.",effect:{intro:"Roll a ten-sided die again and add the resulting family heirloom to your starting items (",outro:"). You choose one quality and the GM chooses one quality from the list of item qualities, on page 240 of the core rulebook; these are applied to the item.",options:[{min:1,max:3,text:"a weapon"},{min:4,max:6,text:"a set of armor"},{min:7,max:8,text:"another item"},{min:9,max:9,text:"a horse or other animal"},{min:10,max:10,text:"a boat or estate"}]}},{name:"Glorious Sacrifice",min:2,max:2,description:"One of your ancestors perished nobly in battle, and one of their signature items vanished with them or was lost in the subsequent years.",modifier:"Increase your honor by 5 and your glory by 5.",effect:{intro:"Roll a ten-sided die again to determine your lost family heirloom (",outro:"), which exists somewhere in the world. You choose one quality and the GM chooses one quality; these are applied to the item. You do not know where the heirloom is, but you could later reclaim it during the campaign.",options:[{min:1,max:3,text:"a weapon"},{min:4,max:6,text:"a set of armor"},{min:7,max:8,text:"another item"},{min:9,max:9,text:"a horse or other animal"},{min:10,max:10,text:"a boat or estate"}]}},{name:"Wondrous Work",min:3,max:3,description:"One of your ancestors crafted a piece of great beauty that won renown for your family, and others expect you to live up to that legacy.",modifier:"Increase your glory by 5.",effect:{intro:"Roll a ten-sided die again to determine an Artisan skill (",outro:"); gain +1 rank in that skill.",options:[{min:1,max:3,text:"Aesthetics"},{min:4,max:6,text:"Composition"},{min:7,max:8,text:"Design"},{min:9,max:10,text:"Smithing"}]}},{name:"Dynasty Builder",min:4,max:4,description:"One of your ancestors was instrumental in the rise of a powerful lord, using cunning stratagems and shrewd advice to secure their ascension. You have heard this story many times and know the importance of power subtly wielded.",modifier:"Decrease your glory by 3.",effect:{intro:"Roll a ten-sided die again to determine a Social skill (",outro:"); gain +1 rank in that skill.",options:[{min:1,max:3,text:"Command"},{min:4,max:6,text:"Courtesy"},{min:7,max:8,text:"Games"},{min:9,max:10,text:"Performance"}]}},{name:"Discovery",min:5,max:5,description:"One of your ancestors made an incredible discovery, invented something of great importance, or uncovered an ancient secret. Thanks to family lore, you have at least a rudimentary understanding of the subject of their discovery.",modifier:"Increase your glory by 3.",effect:{intro:"Roll a ten-sided die again to determine a Scholar skill (",outro:"); gain +1 rank in that skill.",options:[{min:1,max:3,text:"Culture"},{min:4,max:5,text:"Sentiment"},{min:6,max:7,text:"Government"},{min:8,max:9,text:"Medicine"},{min:10,max:10,text:"Theology"}]}},{name:"Ruthless Victor",min:6,max:6,description:"One of your ancestors claimed a bloody victory over a rival, smashing their forces with a cunning maneuver or seizing their domain after vanquishing them in battle. From this relative or their story, you learned well the importance of brute force.",modifier:"Decrease your honor by 5.",effect:{intro:"Roll a ten-sided die again to determine a Martial skill (",outro:"); gain +1 rank in that skill.",options:[{min:1,max:3,text:"Fitness"},{min:4,max:5,text:"Martial Arts [Melee]"},{min:6,max:7,text:"Martial Arts [Ranged]"},{min:8,max:8,text:"Martial Arts [Unarmed]"},{min:9,max:9,text:"Tactics"},{min:10,max:10,text:"Meditation"}]}},{name:"Elevated for Service",min:7,max:7,description:"One of your ancestors was a jizamurai or even a commoner who served with such distinction that their position was elevated to that of a Great Clan samurai by marriage or mandate of a daimy\u014d. As a child, you learned the basics of the skills for which they won their esteem.",modifier:"Decrease your glory by 3 and increase your honor by 3.",effect:{intro:"Roll a ten-sided die again to determine a Trade skill (",outro:"); gain +1 rank in that skill.",options:[{min:1,max:3,text:"Commerce"},{min:4,max:5,text:"Labor"},{min:6,max:7,text:"Seafaring"},{min:8,max:8,text:"Skulduggery"},{min:9,max:10,text:"Survival"}]}},{name:"Stolen Knowledge",min:8,max:8,description:"One of your ancestors learned a secret of another school and clandestinely passed it down through the ages; now, it has reached you.",modifier:"Decrease your honor by 5.",effect:{intro:"You know one additional technique. Roll a ten-sided die again to determine the category (",outro:"), and then select one technique with a prerequisite of school rank 1 and learn that technique. You can perform that technique even if it is not normally allowed by your school.",options:[{min:1,max:3,text:"kata"},{min:4,max:6,text:"sh\u016bji"},{min:7,max:7,text:"ritual"},{min:8,max:8,text:"invocation"},{min:9,max:9,text:"kih\u014d"},{min:10,max:10,text:"mah\u014d or ninjutsu"}]}},{name:"Imperial Heritage",min:9,max:9,description:"You can trace your lineage back to the Imperial line.",modifier:"Increase your status by 10.",effect:"You gain the Blessed Lineage advantage (see page 103 of the core rulebook) (this can be assigned in excess of the normal limitations on advantages at character creation)."},{name:"Unusual Name Origin",min:10,max:10,description:"Your character was not named for an ancestor\u2014perhaps they were named for an outsider who did a great service to the clan, perhaps their name was bestowed upon them for a unique deed, or perhaps someone was trying to send a specific message in the selection of their name.",modifier:"Decrease your glory by 3.",effect:"Choose two of your character\u2019s rings; you may reduce the value of one of these rings by 1 to increase the value of the other by 1 (this still cannot raise a ring above 3). If you do not do so, choose one item of rarity 6 or lower and assign it to your starting outfit."}]},court:{name:"Courts of Stone (page 104)",entries:[{name:"Dishonorable Cheat",min:1,max:1,description:"One of your kin was caught cheating in a high-profile duel. Instead of committing seppuku to purge their dishonor and redeem their family, they ran away and became a r\u014dnin, disgracing their bloodline.",modifier:"Decrease your glory by 5.",effect:{intro:"Roll a ten-sided die to determine a skill to aid you in bringing your disgraced kin to justice (",outro:").",options:[{min:1,max:3,text:"Martial Arts [ChooseOne]"},{min:4,max:6,text:"Survival"},{min:7,max:10,text:"Government"}]}},{name:"Triumph over the Lion",min:2,max:3,description:"In your family line one of your ancestors held a decisive victory over the Lion. It may have been a duel, a critical game of Go, a battle, or any number of things. The circumstances are irrelevant; the Lion were embarrassed, and your ancestor brought honor to your clan.",modifier:"Increase your honor by 5.",effect:{intro:"Roll a ten-sided die and add the resulting family heirloom to your starting items (",outro:"). You choose one quality and the GM chooses one quality from the list of item qualities; these are applied to the item.",options:[{min:1,max:3,text:"a weapon"},{min:4,max:6,text:"a game set of your choice"},{min:7,max:8,text:"some other item relevant to your ancestor\u2019s victory"},{min:9,max:9,text:"a horse or another animal"},{min:10,max:10,text:"the deed to a small piece of land on the border of Lion territory"}]}},{name:"Unforgivable Performance",min:4,max:5,description:"In the recent past one of your kin gave a truly horrible performance in the presence of the Imperial line. Through their embarrassing acting in a scene they caused the Emperor to leave the theatre and now rumors abound of your family being cursed by the Fortunes for such a failure.",modifier:"Decrease your status by 3.",effect:{intro:"You gain the Benten\u2019s Curse (Air) disadvantage (see page 116 of the core rulebook). Roll a ten-sided die to determine a skill that will help redeem your family (",outro:").",options:[{min:1,max:3,text:"Performance"},{min:4,max:6,text:"Culture"},{min:7,max:9,text:"Command"},{min:10,max:10,text:"Courtesy"}]}},{name:"Triumph During Gempuku",min:6,max:7,description:"One of your parents was a Topaz Champion and brought honor to your clan and your family.",modifier:"Increase your honor and glory by 3.",effect:"You gain the Support of the Kakita Dueling Academy distinction, where the Topaz Championship takes place."},{name:"A Little Too Close to Heaven",min:8,max:9,description:"One of your ancestors is rumored to have had an illegitimate child with an Emperor. While you may be able to link your heritage to the Imperial line, the disgrace of such an affair stains this joy.",modifier:"Increase your status by 5 and decrease your honor by 5.",effect:{intro:"Roll a ten-sided die to determine a skill that can aid you in discovering the truth about your lineage (",outro:").",options:[{min:1,max:2,text:"Government"},{min:3,max:4,text:"Commerce"},{min:5,max:6,text:"Sentiment"},{min:7,max:8,text:"Meditation"},{min:9,max:10,text:"Theology"}]}},{name:"Elegant Craftsman",min:10,max:10,description:"Your ancestor was a truly gifted artisan and produced in their lifetime a masterwork that is still renowned today. You now live in the shadow of this ancestor, and your clan expects your complete focus in bringing glory to your line once again.",modifier:"Increase your glory by 5.",effect:"You gain the Isolation anxiety (see page 103 of Courts of Stone). Choose one of your character\u2019s rings; you may reduce the value of this ring by 1 to increase the value of your Fire or Air Ring by 1 (this still cannot raise it above 3). "}]},custom:{name:"Other / Custom"}},Er=function(e){var t=e.table,a=e.firstRoll,n=e.secondRoll;if(!a)return{name:"TBD",description:"TBD",modifier:"TBD",effect:"TBD"};if(!t||"custom"===t){var r=[a,n].filter(Boolean).join(" / ");return{name:r,description:"TBD (you rolled: ".concat(r,")"),modifier:"TBD",effect:"TBD"}}return vr[t].entries.find((function(e){var t=e.min,n=e.max;return t<=a&&n>=a}))},kr=vr,xr=f.a.TextArea,jr=function(e){if(e)return e.map((function(e){return{value:e}}))},Ar={labelCol:{span:6},wrapperCol:{span:18}},Or={labelCol:{span:0},wrapperCol:{span:24}},Ir=function(){var e=Object(S.c)(ur),t=Object(S.c)(mr),a=Object(S.b)(),n=Object(S.c)(Fe),o=Object(S.c)(Be),i=Object(S.c)(Ue);if(t)return r.a.createElement(ua,null);var l=[{required:!!n,message:"Please fill in this field."}];return r.a.createElement(b.a,Object.assign({initialValues:{table:"core"},onFinish:function(e){var t=e.campaign,r=e.character,o=e.description,i=e.table;a(function(e){var t=e.context,a=e.metadata,n=e.user;return function(e){e(ar(!0)),e(cr(Object(c.a)({},t,{user:n})));var r=function(t){e(nr(t))};if(n){var o=t.campaign,i=t.character,l=t.description;N({uri:"/ffg/l5r/heritage-rolls/create",body:{campaign:o,character:i,description:l,metadata:a},success:function(t){var a=t.uuid,n=t.roll;e(sr(a)),e(lr(n))},error:r})}else T({uri:"/public/ffg/l5r/heritage-rolls/create",body:{metadata:a},success:function(t){e(lr(t))},error:r})}}({metadata:{table:i},context:{campaign:t,character:r,description:o},user:n})),a(Ne(t)),a(Ye(r))},className:gr.a.form},Ar),r.a.createElement(b.a.Item,{name:"table",label:"Book",rules:[{required:!0}]},r.a.createElement(x.a,{options:Object.keys(kr).map((function(e){return{value:e,label:kr[e].name}}))})),r.a.createElement(r.a.Fragment,null,!!n&&r.a.createElement(b.a.Item,{label:"Campaign",name:"campaign",rules:l},r.a.createElement(y.a,{options:jr(o),placeholder:"The Dead of Winter"})),r.a.createElement(b.a.Item,{label:"Character",name:"character",rules:l},r.a.createElement(y.a,{options:jr(i),placeholder:"Doji Sakura"})),!!n&&r.a.createElement(b.a.Item,{label:"Description",name:"description",rules:l},r.a.createElement(xr,{placeholder:"Using Celestial Realms Table to emphasize my character's mother was born Phoenix."}))),r.a.createElement(b.a.Item,Or,r.a.createElement(I.a,{type:"primary",htmlType:"submit",disabled:e},"Roll")))},wr=a(263),Cr=a.n(wr),Sr=Vt.a.Text,Rr=function(e){var t=e.effect,a=e.roll;if("string"===typeof t)return r.a.createElement(r.a.Fragment,null,t);var n=t.intro,o=t.outro,i=t.options;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n),i.map((function(e,t){var n=e.min,o=e.max,l=e.text;return r.a.createElement(r.a.Fragment,{key:n.toString()},r.a.createElement(Sr,{strong:!!a&&n<=a&&o>=a},o!==n?"".concat(n,"\u2013").concat(o,": ").concat(l):"".concat(n,": ").concat(l)),t<i.length-1&&r.a.createElement(r.a.Fragment,null,", "))})),r.a.createElement(r.a.Fragment,null,o))},Dr=function(e){var t,a=e.table,n=e.rolls,o=e.children,i=e.context;if(!a||!kr[a])return null;var c=Object(l.a)(n,2),s=c[0],u=c[1],m=Er({table:a,firstRoll:s,secondRoll:u}),d=m.name,p=m.description,f=m.modifier,h=m.effect;return r.a.createElement("div",{className:Cr.a.container},r.a.createElement(aa.a,{title:d,bordered:!0,layout:"vertical",column:3},i&&r.a.createElement(r.a.Fragment,null,i.character&&r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a.Item,{label:"Character"},i.character),r.a.createElement(aa.a.Item,{label:"Campaign"},i.campaign||"N/A"),r.a.createElement(aa.a.Item,{label:"Player"},(null===(t=i.user)||void 0===t?void 0:t.name)||"N/A")),i.description&&r.a.createElement(aa.a.Item,{label:"Description",span:3},i.description)),r.a.createElement(aa.a.Item,{label:"Result",span:2},p),r.a.createElement(aa.a.Item,{label:"Modifier"},f),r.a.createElement(aa.a.Item,{label:"Other effects",span:2},r.a.createElement(Rr,{effect:h,roll:u})),r.a.createElement(aa.a.Item,{label:"Ref."},kr[a].name)),r.a.createElement(r.a.Fragment,null,o))},Tr=a(189),Gr=a.n(Tr),Mr=Vt.a.Text,Nr=Vt.a.Title,Yr=function(e){var t=e.dices;return r.a.createElement(Ma.a,{className:Gr.a.dice},r.a.createElement(Mr,null,"Dice:"),t.map((function(e,t){var a=e.value,n=e.status;return r.a.createElement(Mr,{disabled:"dropped"===n,strong:"kept"===n,key:t.toString()},a)})))},Fr=function(e){var t=e.children,a=e.dices;return r.a.createElement("div",{className:Gr.a.layout},r.a.createElement(Nr,null,"Heritage Roll"),a&&r.a.createElement(Yr,{dices:a}),r.a.createElement(r.a.Fragment,null,t))},Br=function(){var e=Object(S.c)(mr),t=Object(S.b)(),a=Object(S.c)(dr),n=Object(S.c)(pr),o=Object(S.c)(Fe),i=a.dices,l=a.metadata;if(e)return r.a.createElement(ua,null);if(!i.length)return r.a.createElement(Fr,null,r.a.createElement(Ir,null));var c=l.table;return i.some((function(e){return"pending"===e.status}))?r.a.createElement(Fr,{dices:i},r.a.createElement("p",null,"Choose one of those two options as the relative for whom your character is named."),i.filter((function(e){return"pending"===e.status})).map((function(e,n){var i=e.value;return r.a.createElement(Dr,{key:n.toString(),table:c,rolls:[i]},r.a.createElement("div",{className:br.a.footer},r.a.createElement(I.a,{onClick:function(){return t(function(e){var t=e.roll,a=e.position,n=e.user;return function(e){e(ar(!0));var r=function(t){e(nr(t))};if(n){var o=t.uuid;N({uri:"/ffg/l5r/heritage-rolls/".concat(o,"/keep"),body:{position:a},success:function(t){var a=t.roll;e(lr(a))},error:r})}else T({uri:"/public/ffg/l5r/heritage-rolls/keep",body:{roll:t,position:a},success:function(t){e(lr(t))},error:r})}}({roll:a,position:n,user:o}))}},"Keep that result")))}))):r.a.createElement(Fr,{dices:i},r.a.createElement(Dr,{table:c,rolls:i.filter((function(e){return"kept"===e.status})).map((function(e){return e.value})),context:n}),r.a.createElement("div",{className:br.a.footer},r.a.createElement(I.a,{onClick:function(){t(rr())},type:"dashed"},"Roll another heritage")))},Ur=function(e){var t=e.roll,a=e.context,n=t.dices,o=t.metadata;if(!n.length)return null;var i=o.table;return n.some((function(e){return"pending"===e.status}))?r.a.createElement(Fr,{dices:n},r.a.createElement("p",null,"Player has yet to choose between the following options."),n.filter((function(e){return"pending"===e.status})).map((function(e,t){var a=e.value;return r.a.createElement(Dr,{key:t.toString(),table:i,rolls:[a]})}))):r.a.createElement(Fr,{dices:n},r.a.createElement(Dr,{table:i,rolls:n.filter((function(e){return"kept"===e.status})).map((function(e){return e.value})),context:a}))},Pr=function(){var e=Object(hn.h)().uuid,t=Object(S.c)(Fe),a=Object(S.c)(ur),o=Object(S.c)(mr),i=Object(S.b)(),c=Object(n.useState)(),s=Object(l.a)(c,2),u=s[0],m=s[1];if(Object(n.useEffect)((function(){i(ar(!0)),G({uri:"/public/ffg/l5r/heritage-rolls/".concat(e),success:function(e){m(e),i(ar(!1))},error:function(e){i(ar(!1)),i(nr(e))}})}),[e,i]),Object(n.useEffect)((function(){if(u&&t&&u.user&&t.id===u.user.id){var e=u.uuid,a=u.roll,n=a.dices,r=a.metadata,o=Object(O.a)(u,["uuid","roll"]);i(or({uuid:e,dices:n,metadata:r,context:o}))}}),[u,t,i]),!u)return a?r.a.createElement(Fn,null):o?r.a.createElement(ua,null):null;if(t&&u.user&&t.id===u.user.id)return r.a.createElement(Br,null);var d=u.roll;return r.a.createElement(Ur,{roll:d,context:u})},Vr=Vt.a.Text,Qr=[{title:"Campaign",dataIndex:"campaign",responsive:["sm"]},{title:"Character",dataIndex:"character"},{title:"Roll",dataIndex:"roll",render:function(e){var t=e.dices;return t.some((function(e){return"pending"===e.status}))?r.a.createElement(Vr,{type:"secondary"},t.map((function(e){return e.value})).join(" | ")):r.a.createElement(r.a.Fragment,null,t.filter((function(e){return"kept"===e.status})).map((function(e){return e.value})).join(" / "))}},{title:"Result",dataIndex:"succinct",render:function(e){var t=e.name,a=e.effect,n=e.secondRoll,o="object"===typeof a&&n&&a.options.find((function(e){var t=e.min,a=e.max;return t<=n&&a>=n}));return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(Vr,{strong:!0},t),r.a.createElement(r.a.Fragment,null," / "),r.a.createElement(Vr,{strong:!0},o.text)):r.a.createElement(Vr,{strong:!0},t)}},{title:"Ref.",dataIndex:"book",responsive:["sm"]},{title:"",dataIndex:"link",render:function(e){var t=e.uuid;return r.a.createElement(na.b,{title:"Details",to:"/heritage/".concat(t)},"\u27a5")}}],Zr=function(e){var t=e.rolls;return r.a.createElement(En.a,{columns:Qr,dataSource:t.map((function(e){var t=e.dices,a=e.metadata,n=e.context,r=e.uuid,o=r,i=t.filter((function(e){return"kept"===e.status})).map((function(e){return e.value})),c=Object(l.a)(i,2),s=c[0],u=c[1],m=a.table,d=Er({table:m,firstRoll:s,secondRoll:u}),p=d.name,f=d.effect,h=n.character,b=n.campaign;return{key:o,book:kr[m].name,roll:{dices:t},succinct:{name:p,effect:f,secondRoll:u},character:h,campaign:b,link:{uuid:r}}})),pagination:!1})},Lr=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),c=Object(l.a)(i,2),s=c[0],u=c[1],m=Object(n.useState)(),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(hn.g)(),b=Object(S.c)(Fe),y=parseInt(Dn.a.parse(h.search).page)||1,g="/ffg/l5r/heritage-rolls?".concat(Dn.a.stringify({page:y}));if(Object(n.useEffect)((function(){b&&(o(!0),G({uri:g,success:function(e){f(e),o(!1)},error:function(e){u(!0),o(!1)}}))}),[b,g]),!b)return null;if(a)return r.a.createElement(Fn,null);if(s)return r.a.createElement(ua,null);if(!p)return null;var v=p.items,E=p.per_page,k=p.total;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zr,{rolls:v.map((function(e){var t=e.uuid,a=e.roll;return{uuid:t,dices:a.dices,metadata:a.metadata,context:Object(O.a)(e,["uuid","roll"])}}))}),r.a.createElement(Vn,{pageSize:E,current:y,total:k}))},_r=function(){var e=Object(S.b)();return Object(n.useEffect)((function(){G({uri:"/user",success:function(t){e(Me(t))},error:function(e){}})}),[e]),r.a.createElement(na.a,null,r.a.createElement(vn,null,r.a.createElement(hn.c,null,r.a.createElement(hn.a,{path:"/heritage/list"},r.a.createElement(Lr,null)),r.a.createElement(hn.a,{path:"/heritage/:uuid"},r.a.createElement(Pr,null)),r.a.createElement(hn.a,{path:"/heritage"},r.a.createElement(Br,null)),r.a.createElement(hn.a,{path:"/rolls/:id"},r.a.createElement($n,null)),r.a.createElement(hn.a,{path:"/rolls"},r.a.createElement(Ln,null)),r.a.createElement(hn.a,{path:"/"},r.a.createElement(cn,null)))))},zr=Object(R.a)({reducer:{roll:Re,user:Pe,heritage:fr}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S.a,{store:zr},r.a.createElement(_r,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},70:function(e,t,a){e.exports={layout:"Reroll_layout__1ZSoQ",container:"Reroll_container__22Gl5",title:"Reroll_title__1pQuN","arrow-right":"Reroll_arrow-right__30zxm","arrow-down":"Reroll_arrow-down__2N_iE",empty:"Reroll_empty__2DGjW",dices:"Reroll_dices__2VbI0"}},95:function(e,t,a){e.exports={dices:"Dices_dices__1Cijf",dice:"Dices_dice__cqowQ",selectable:"Dices_selectable__2UH3q",selected:"Dices_selected__1Gb1I",unselectable:"Dices_unselectable__KQSGp","theme-reroll":"Dices_theme-reroll__KWvOz","theme-gray":"Dices_theme-gray__k0B1L","theme-shiny":"Dices_theme-shiny__5M1Hc",explosion:"Dices_explosion__3t8yW"}}},[[272,1,2]]]);
//# sourceMappingURL=main.1630af0b.chunk.js.map