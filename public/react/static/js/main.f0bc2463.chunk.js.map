{"version":3,"sources":["features/navigation/Layout.module.css","features/roller/Keep.module.css","features/roller/result/Resolve.module.css","features/browse/List.module.css","features/roller/NextButton.module.css","features/roller/DiceSideSelector.module.css","features/roller/Summary.module.css","features/roller/index.module.css","features/navigation/Loader.module.css","features/roller/Breadcrumb.module.css","features/roller/Intent.module.css","features/roller/Steps.module.css","features/roller/images/black.png","features/roller/images/blackot.png","features/roller/images/blackst.png","features/roller/images/blacket.png","features/roller/images/blacko.png","features/roller/images/blacks.png","features/roller/images/white.png","features/roller/images/whitee.png","features/roller/images/whiteet.png","features/roller/images/whiteo.png","features/roller/images/whites.png","features/roller/images/whiteso.png","features/roller/images/whitest.png","features/roller/form/DynamicDiceSelector.module.css","features/roller/Result.module.css","features/roller/button/LineContainer.module.css","features/roller/reroll/Ishiken.module.css","features/roller/reroll/Alter.module.css","features/navigation/logo.png","features/browse/images/opportunity.png","features/browse/images/strife.png","features/browse/images/success.png","features/browse/Result.module.css","server.js","features/roller/Steps.js","features/roller/utils.js","features/roller/reducer.js","features/roller/NextButton.js","features/user/reducer.js","features/roller/Dice.js","features/roller/DiceSideSelector.js","features/roller/form/DynamicDiceSelector.js","features/roller/Intent.js","features/roller/Result.js","features/roller/Dices.js","features/roller/ExplosionDices.js","features/roller/Keep.js","features/roller/Summary.js","DefaultErrorMessage.js","features/roller/result/Reroll.js","features/roller/result/Keep.js","features/roller/button/BbCode.js","features/roller/button/DirectLink.js","features/roller/button/LineContainer.js","features/roller/result/Resolve.js","features/roller/AnonymousAlert.js","features/roller/DicesBox.js","features/roller/reroll/Distinction.js","features/roller/reroll/Adversity.js","features/roller/reroll/Ability.js","features/roller/reroll/Ishiken.js","features/roller/reroll/DragonWard.js","features/roller/reroll/Sailor.js","features/roller/reroll/Alter.js","features/roller/reroll/Confirm.js","features/roller/Modifier.js","features/roller/index.js","features/navigation/Layout.js","features/browse/Result.js","features/navigation/Loader.js","features/browse/List.js","features/roller/Complete.js","features/roller/Breadcrumb.js","features/roller/IdentifiedRoll.js","App.js","app/store.js","serviceWorker.js","index.js","features/roller/result/Reroll.module.css","features/roller/Dices.module.css"],"names":["module","exports","requestOnServer","a","uri","method","body","success","error","headers","Accept","fetch","JSON","stringify","undefined","response","ok","Error","status","json","data","console","postOnServer","getOnServer","authentifiedPostOnServer","decodeURIComponent","document","cookie","match","DECLARE","REROLL","KEEP","RESOLVE","Step","Steps","CustomSteps","current","className","indexOf","classNames","styles","steps","title","description","REROLL_TYPES","isReroll","modifier","isSpecialReroll","isSpecialAlteration","includes","test","rolledDicesCount","ring","skill","modifiers","keptDicesCount","isAlteration","countDices","keptDices","successCount","reduce","acc","dice","value","explosion","opportunityCount","opportunity","strifeCount","strife","blankCount","filter","length","orderDices","dices","reorder","sort","b","type","isRerollOfType","rerollType","metadata","end","isFromRerollOfType","source","replaceRerollsOfType","previousRerollTypes","basePool","rerollResults","ringResults","skillResults","slice","previousTypesMinusOne","previousType","pop","previousDices","map","isRerollOfRightType","shift","replaceRerolls","rerollTypes","rerollCount","initialState","tn","loading","toKeep","channeled","addkept","explicitGoToKeep","createSlice","name","reducers","softReset","state","id","window","history","pushState","setParameters","action","payload","campaign","character","setLoading","setError","setAnimatedStep","animatedStep","load","player","update","setToKeep","setAddKept","goToKeepStep","setModifiers","actions","reroll","roll","positions","dispatch","parameters","alter","alterations","addModifiers","newModifiers","allModifiers","selectAll","selectLoading","selectStep","dicesRolled","atLeastOneUnresolvedDice","some","currentRerollModifiers","hasReroll","rerollDone","rerolls","selectIntent","selectHidden","selectToKeep","NextButton","children","disabled","props","useSelector","layout","button","campaigns","characters","setUser","addCampaign","push","addCharacter","selectUser","user","selectCampaigns","selectCharacters","getImage","explosionStrifeSkill","explosionSkill","successOpportunitySkill","successStrifeSkill","successSkill","opportunitySkill","blankSkill","strifeExplosionRing","strifeSuccessRing","strifeOpportunityRing","successRing","opportunityRing","blankRing","getText","Boolean","join","Dice","src","alt","preview","toString","number","toObject","string","split","s","parseInt","FACETS","Loop","facets","key","Button","UncontrolledDiceSideSelector","initialValue","onChange","Group","target","group","defaultValue","DiceSideSelector","DynamicDiceSelector","fields","labelText","buttonText","errors","add","remove","values","buttonLayout","field","index","Item","required","label","noStyle","onClick","MinusCircleOutlined","icon","PlusOutlined","ErrorList","TextArea","Input","Panel","Collapse","labelCol","span","wrapperCol","tailLayout","defaultRules","message","arrayToAutoCompleteOptions","Intent","onFinish","onComplete","useDispatch","Form","useForm","form","initialValues","techniques","misc","scrollToFirstError","onValuesChange","changedValues","Object","keys","validateFields","rules","options","placeholder","min","max","valuePropName","ghost","header","showSearch","allowClear","optionFilterProp","mode","List","validator","_","getFieldValue","voided","Promise","reject","offset","htmlType","AnimatedIntent","useState","completed","setCompleted","hidden","useEffect","scrollTo","top","behavior","Animate","transitionName","transitionEnter","transitionLeave","showProp","onEnd","visible","Text","Typography","Result","extra","count","color","shadowRerollDices","shadowCount","honorStaked","Math","ceil","honorLoss","grid","gutter","column","dataSource","renderItem","strong","Dices","theme","selectable","selected","toggle","unselectable","ExplosionDices","remainingDices","size","currentDices","splitExplosions","Fragment","Paragraph","AddKeptDiceForm","compromised","allValues","facet","Keep","keepingExplosions","trulyCompromised","every","showAddKept","baseDices","i","wrapDices","defaultText","text","figures","Summary","special","md","sm","xs","bordered","to","DefaultErrorMessage","banner","Title","THEMES","distinction","adversity","TITLES","shadow","deathdealer","manipulator","ishiken","ruthless","sailor","EMPTY","SingleReroll","level","empty","indexOfType","container","Reroll","BbCode","shortResult","location","origin","onCopy","DirectLink","LineContainer","buttons","Resolve","Link","AnonymousAlert","showIcon","closable","href","DicesBox","footer","Distinction","toReroll","setToReroll","bypassMax","Adversity","successDices","Ability","blank","AVAILABLE_FACETS","Ishiken","setAlterations","position","onlyBlanks","onlyNonBlanks","originalDice","alterators","findIndex","DragonWard","Sailor","Alter","list","Confirm","addReroll","addAlteration","Modifier","shouldShow","AbilityReroll","specialReroll","find","specialAlteration","padStart","WrappedModifier","Layout","currentStep","alert","Roller","save","intent","activeKeys","setActiveKeys","panel","PanelContent","toAdd","authKeep","keep","activeKey","collapsible","request","create","Header","Content","Footer","CustomLayout","useLocation","selectedKey","setSelectedKey","pathname","search","getMenuKey","selectedKeys","onSelect","logo","login","result","successImage","opportunityImage","strifeImage","Loader","loader","columns","dataIndex","render","date","Date","toLocaleDateString","time","toLocaleTimeString","hour","minute","second","timeZoneName","queryString","delete","responsive","width","align","setData","useHistory","query","parse","page","items","created_at","see_more","pageLink","pageNumber","pagination","simple","pageSize","total","itemRender","originalElement","Complete","context","defaultActiveKey","CustomBreadcrumb","ellipsis","GoBackButton","goBack","IdentifiedRoll","useParams","Breadcrumb","style","float","App","path","configureStore","reducer","rollerReducer","userReducer","hostname","ReactDOM","StrictMode","store","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f0bc2463.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__UFIxE\",\"logo\":\"Layout_logo__1Oa8g\",\"footer\":\"Layout_footer__1d2pN\",\"login\":\"Layout_login__2luPa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Keep_layout__3iSnl\",\"figures\":\"Keep_figures__29jyx\",\"add-kept-form\":\"Keep_add-kept-form__3VbB8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Resolve_layout__6Gw1E\",\"container\":\"Resolve_container__3LORR\",\"dices\":\"Resolve_dices__3Mfsg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"List_pagination__30JOr\",\"see-more\":\"List_see-more__3H9Sv\",\"time\":\"List_time__3D77V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"NextButton_layout__1V0iF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"group\":\"DiceSideSelector_group__2wbOR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dices\":\"Summary_dices__1WJbN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"roller_alert__a7FQm\",\"steps\":\"roller_steps__37v8v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loader_container__3tlr0\",\"loader\":\"Loader_loader__Jgwkb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Breadcrumb_container__1pLMq\",\"description\":\"Breadcrumb_description__3x45S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Intent_form__3Tlpw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"steps\":\"Steps_steps__xQjGe\"};","module.exports = __webpack_public_path__ + \"static/media/black.f14fed51.png\";","module.exports = __webpack_public_path__ + \"static/media/blackot.3a5ad7bb.png\";","module.exports = __webpack_public_path__ + \"static/media/blackst.3fad8195.png\";","module.exports = __webpack_public_path__ + \"static/media/blacket.f0ca3076.png\";","module.exports = __webpack_public_path__ + \"static/media/blacko.e44a1dd0.png\";","module.exports = __webpack_public_path__ + \"static/media/blacks.216d4546.png\";","module.exports = __webpack_public_path__ + \"static/media/white.c24c0c51.png\";","module.exports = __webpack_public_path__ + \"static/media/whitee.7755ca79.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteet.d10cd0cc.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteo.1e81fee0.png\";","module.exports = __webpack_public_path__ + \"static/media/whites.7cb9db03.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteso.f76a057b.png\";","module.exports = __webpack_public_path__ + \"static/media/whitest.05051e66.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pseudo-radio\":\"DynamicDiceSelector_pseudo-radio__3_xZn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Result_layout__1eJNj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"LineContainer_buttons__2C_Fm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alterators\":\"Ishiken_alterators__37a44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"Alter_list__3b8nO\"};","module.exports = __webpack_public_path__ + \"static/media/logo.20098cc4.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkUzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRkQzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REUyNDExOEIzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REUyNDExOEEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRjkzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkxMi0zNTM4YjhhODdmZmEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o8HzfAAAFIUlEQVR42uydi3GbQBCGF00aoAVSAikBl0BKICWQEuQSSAlWCagEqwSpBCjB4TLHDHYkwd7uPbjbf+ZmbI8t4f3YF7pH9vHxAaJwdBATCBCRABEgIkN9o75AlmU+rjufRqlHoYdSded3L9MYp3Gexk1/f+O6EO6iKKO+oCMguTb2PAri681gLhrUJRQg/16QMiyrmcabukzLY5hGpz3Oqf3+s2eAQEptnMEBiHvjXd8ISQNRIaidxtUThEdgKtdAfOSQWgOoFh6RB1z4vOoxxpZD6sA8AOstZSwhS3lDv1MQXxN/s3cgrcfkbGsc95hDcl2uVpbi+rKPGPX3twcNX74IN+Uif1F6GdW7/FTvvYccUlrIFVddCjcMTeEyp/XUvBJ6yGoYQ5Rxs4ZURQCjrrEKFUjDCKL1UArXhJupCQ1Iw5gwffYkOcFbulCAlAxh6mqxADBRZ/h/KJi5NyD6jqIm8C7QTr0hJPvcFxDqk9g28M+LTPPKYFqBUWDURBgN7EOmIdnIUyihagCmbncHMk32R1dAjsSGaq8ySfaFVSC6U6aEqhL2LSyU3jYQSiLvYP8yqSwrK0B0r0DxjgLiUGPLS7BA+sS9Y+kl2KKmZAXCkDsqiEvYXNJxA+mA9mgkNmHD97ClL8H0HSk0gVhhy/+GC0hLgNFDvMJWXB0ZCENX3kLcwjxCGoyA6PjYAs8MwiJmGgbVZ2kChOtj2C5y75jt1XDlERvl7aennSkA0XbbmkuePnC8t2CHI8So6Tkv8GD6ZaT6g3icv06Y0UOS8Iw7HrLVboNJDhEYSCDabu9b7IQNWRT9SixMfdVpyy9lWfYwbB2e5ACTvHGBtHVGNJQoICZ3+S1xGCrkXKgRghNI6t6BCluuQpaIaAfOpH4WFvaA3ASGnzzClUMkXDHZgyuHjMLAIpDJ7cTANLGHLOkrAgtZWCDiUUw6MFEWb8JVYmcTIJi7vhQzf1Lu20MKYbDZHhcB4l6laXg/PIlzIyI3VMJgMxBjD1E6MV1EMsqyLF+JGGcKEEzYqgXHqh1G/azLDMj0xydEtSVA1iPFesRhXk+YXC5BTrstOeb2YqYFvSUO5NkMxp5tfQjg5q4WCQN5ZqeKEwhmhnefIpCVSMK/xhBw6yCqBIF0QFxfiAWCmeF9TQnIine01tapI72kTQjIoxVmb1a31gD8+uwUuvdH3uFm8xlkxTWAn8nXuS5EWn29/Z3+YNA/74g5rwOf2zMBfjmwyxnxBZgvw+sNPLrihEHZDQi734mLpW2UlcKfjIl4z3vRonG+xZ++E4dAoOSwcV0Gs0e3YGF3UsqOcq1hWOAOX5wwtm6wdu+GbLzvSgpmG2BeGauvI9jb473cmDtIOYMbCGXfRWqfUlmEsfkRUIhbjV+Bvp24yZ7uLo7AqPYIpGW+K/OV2N0yvyfJS0IEUlg2Qg7uTmtDP20I9XQEX8ZyMVqXQLhWUJ1AxCJOIDK/NyAgSq9izrCAqM1XYlxr6HSpBfehYAXEt9/J92fhmPtQMO69TtSFx7Qt09l1brRxwL2aKvkjkvDlvnq0fLBkA/s9bvXqwn6+Touud9g81j6AuD4tev6suwT6aZu2Q9XPrUBCrrKwKjSgGsKZoTLqympMEchSS69ZnrfuGsYLINbF7Pk8dVMPasDOx7TUCQ5R5BCq5tA2D64GVD1l+G3SP8Ucskw0H81d6K+XR3XnT+74ueG76AQ+UiJMUEBE4XfqIgEiQEQCRICIPOivAAMA3yRcglkl3R0AAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"Result_result__pmIP7\"};","const serverRoot =\n  process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://127.0.0.1:8000/api\";\n\nconst requestOnServer = async ({ uri, method, body, success, error }) => {\n  const headers = {\n    Accept: \"application/json\",\n  };\n  if (body) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n\n  try {\n    const response = await fetch(`${serverRoot}${uri}`, {\n      method,\n      headers,\n      body: body ? JSON.stringify(body) : undefined,\n    });\n    if (!response.ok) {\n      throw new Error(`Bad status: ${response.status}`);\n    }\n    const data = await response.json();\n    success(data);\n  } catch (e) {\n    error ? error(e) : console.error(e);\n  }\n};\n\nexport const postOnServer = async ({ uri, body, success, error }) => {\n  return requestOnServer({ uri, method: \"POST\", body, success, error });\n};\n\nexport const getOnServer = async ({ uri, success, error }) => {\n  return requestOnServer({ uri, method: \"GET\", success, error });\n};\n\n// Source: https://plainjs.com/javascript/utilities/set-cookie-get-cookie-and-delete-cookie-5/\nconst getXsrfToken = () =>\n  decodeURIComponent(\n    document.cookie.match(\"(^|;) ?XSRF-TOKEN=([^;]*)(;|$)\")[2]\n  );\n\nexport const authentifiedPostOnServer = async ({\n  uri,\n  body,\n  success,\n  error,\n}) => {\n  try {\n    const response = await fetch(`${serverRoot}${uri}`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"X-Requested-With\": \"XMLHttpRequest\",\n        \"X-XSRF-TOKEN\": getXsrfToken(),\n      },\n      body: JSON.stringify(body),\n    });\n    if (!response.ok) {\n      throw new Error(`Bad status: ${response.status}`);\n    }\n    const data = await response.json();\n    success(data);\n  } catch (e) {\n    error ? error(e) : console.error(e);\n  }\n};\n","import React from \"react\";\nimport { Steps } from \"antd\";\nimport styles from \"./Steps.module.css\";\nimport classNames from \"classnames\";\n\nexport const DECLARE = \"declare\";\nexport const REROLL = \"reroll\";\nexport const KEEP = \"keep\";\nexport const RESOLVE = \"resolve\";\n\nconst { Step } = Steps;\n\nconst CustomSteps = ({ current, className }) => {\n  return (\n    <Steps\n      current={[DECLARE, REROLL, KEEP, RESOLVE].indexOf(current)}\n      className={classNames(styles.steps, { [className]: !!className })}\n    >\n      <Step title={\"Declare\"} description={\"Declare Intention\"} />\n      <Step title={\"Modify\"} description={\"Modify Rolled Dice\"} />\n      <Step title={\"Keep\"} description={\"Choose Kept Dice\"} />\n      <Step title={\"Resolve\"} description={\"Resolve Symbols\"} />\n    </Steps>\n  );\n};\n\nexport default CustomSteps;\n","const REROLL_TYPES = [\n  \"adversity\",\n  \"distinction\",\n  \"shadow\",\n  \"deathdealer\",\n  \"manipulator\",\n  \"ishiken\",\n  \"2heavens\",\n  \"ruthless\",\n  \"sailor\",\n];\n\nexport const isReroll = (modifier) => {\n  if (isSpecialReroll(modifier) || isSpecialAlteration(modifier)) {\n    return true;\n  }\n\n  return REROLL_TYPES.includes(modifier);\n};\n\nexport const isSpecialReroll = (modifier) => {\n  return /^ruleless([0-9]{2})?$/.test(modifier);\n};\n\nexport const isSpecialAlteration = (modifier) => {\n  return /^reasonless([0-9]{2})?$/.test(modifier);\n};\n\nexport const rolledDicesCount = ({ ring, skill, modifiers }) => {\n  return keptDicesCount({ ring, modifiers }) + skill;\n};\n\nexport const keptDicesCount = ({ ring, modifiers }) => {\n  return ring + (modifiers.includes(\"void\") ? 1 : 0);\n};\n\nexport const isAlteration = (modifier) => {\n  return [\"ishiken\"].includes(modifier) || isSpecialAlteration(modifier);\n};\n\nexport const countDices = (keptDices) => {\n  return {\n    successCount: keptDices.reduce(\n      (acc, dice) =>\n        acc + (dice.value.explosion || 0) + (dice.value.success || 0),\n      0\n    ),\n    opportunityCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.opportunity || 0),\n      0\n    ),\n    strifeCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.strife || 0),\n      0\n    ),\n    blankCount: keptDices.filter(\n      ({ value: { strife, opportunity, success, explosion } }) =>\n        strife === 0 && opportunity === 0 && success === 0 && explosion === 0\n    ).length,\n  };\n};\n\nexport const orderDices = (dices) => {\n  const reorder = [...dices];\n\n  reorder.sort((a, b) => {\n    if (a.type === \"ring\" && b.type === \"skill\") {\n      return -1;\n    }\n    if (b.type === \"ring\" && a.type === \"skill\") {\n      return 1;\n    }\n    return 0;\n  });\n\n  return reorder;\n};\n\nexport const isRerollOfType = ({ status, metadata }, rerollType) => {\n  if (status !== \"rerolled\") {\n    return false;\n  }\n\n  // Legacy\n  if (!metadata.end) {\n    return metadata.modifier === rerollType;\n  }\n\n  return metadata.end === rerollType;\n};\n\nexport const isFromRerollOfType = ({ status, metadata }, rerollType) => {\n  // Legacy\n  if (!metadata.source && !metadata.end && metadata.modifier) {\n    return status !== \"rerolled\" && metadata.modifier === rerollType;\n  }\n\n  return metadata.source === rerollType;\n};\n\nexport const replaceRerollsOfType = ({\n  dices,\n  rerollType,\n  previousRerollTypes = [],\n  basePool,\n}) => {\n  const isRerollOfRightType = (dice) => isRerollOfType(dice, rerollType);\n\n  const previousDices = () => {\n    if (previousRerollTypes.length === 0) {\n      return dices.slice(0, basePool);\n    }\n\n    const previousTypesMinusOne = [...previousRerollTypes];\n    const previousType = previousTypesMinusOne.pop();\n\n    return replaceRerollsOfType({\n      dices,\n      rerollType: previousType,\n      previousRerollTypes: previousTypesMinusOne,\n      basePool,\n    });\n  };\n\n  const rerollResults = dices.filter((dice) =>\n    isFromRerollOfType(dice, rerollType)\n  );\n  const ringResults = rerollResults.filter(({ type }) => type === \"ring\");\n  const skillResults = rerollResults.filter(({ type }) => type === \"skill\");\n\n  return previousDices().map((dice) => {\n    if (isRerollOfRightType(dice)) {\n      return (dice.type === \"skill\" ? skillResults : ringResults).shift();\n    }\n    return dice;\n  });\n};\n\nexport const replaceRerolls = ({ dices, rerollTypes, basePool }) => {\n  const rerollCount = dices.filter(({ status }) => status === \"rerolled\")\n    .length;\n  if (rerollCount === 0) {\n    return dices;\n  }\n\n  const previousRerollTypes = [...rerollTypes];\n  const rerollType = previousRerollTypes.pop();\n\n  return [\n    ...replaceRerollsOfType({\n      dices,\n      rerollType,\n      previousRerollTypes,\n      basePool,\n    }),\n    ...dices.slice(basePool + rerollCount), // Explosions\n  ];\n};\n\nexport const splitExplosions = ({ dices, basePool, rerollTypes }) => {\n  let split = [];\n  let remainingDices = replaceRerolls({ dices, basePool, rerollTypes });\n  let size =\n    basePool +\n    dices.filter(({ metadata }) => metadata?.source === \"addkept\").length;\n  while (remainingDices.length > 0) {\n    const currentDices = orderDices(remainingDices.slice(0, size));\n    remainingDices = remainingDices.slice(size, remainingDices.length);\n    size = currentDices.filter(\n      ({ status, value: { explosion } }) => status === \"kept\" && explosion > 0\n    ).length;\n    split.push(currentDices);\n  }\n  return split;\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { postOnServer, authentifiedPostOnServer } from \"../../server\";\nimport { DECLARE, REROLL, KEEP, RESOLVE } from \"./Steps\";\nimport { isReroll } from \"./utils\";\n\nconst initialState = {\n  tn: 3,\n  ring: 3,\n  skill: 1,\n  modifiers: [],\n  dices: [],\n  metadata: {},\n  loading: false,\n  error: false,\n  toKeep: [],\n  channeled: [],\n  addkept: [],\n  explicitGoToKeep: false,\n};\n\nconst slice = createSlice({\n  name: \"roll\",\n  initialState,\n  reducers: {\n    softReset: (state) => {\n      state.tn = initialState.tn;\n      state.ring = initialState.ring;\n      state.skill = initialState.skill;\n      state.description = null;\n      state.dices = [];\n      state.metadata = {};\n      state.modifiers = [];\n      state.toKeep = [];\n      state.channeled = [];\n      state.addkept = [];\n      state.explicitGoToKeep = false;\n\n      state.id = null;\n      window.history.pushState(null, null, \"/\");\n    },\n    setParameters: (state, action) => {\n      const {\n        campaign,\n        character,\n        description,\n        tn,\n        ring,\n        skill,\n        modifiers,\n        channeled,\n        addkept,\n      } = action.payload;\n      state.campaign = campaign;\n      state.character = character;\n      state.description = description;\n      state.tn = tn;\n      state.ring = ring;\n      state.skill = skill;\n      state.modifiers = modifiers;\n      state.channeled = channeled;\n      state.addkept = addkept;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setAnimatedStep: (state, action) => {\n      state.animatedStep = action.payload;\n    },\n    load: (state, action) => {\n      const { id, player, dices, metadata } = action.payload;\n      state.id = id;\n      state.player = player;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      window.history.pushState(null, null, `/rolls/${id}`);\n      state.toKeep = [];\n    },\n    update: (state, action) => {\n      const { dices, metadata } = action.payload;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      state.toKeep = [];\n    },\n    setToKeep: (state, action) => {\n      state.toKeep = action.payload;\n    },\n    setAddKept: (state, action) => {\n      state.addkept = action.payload;\n    },\n    goToKeepStep: (state) => {\n      state.explicitGoToKeep = true;\n    },\n    setModifiers: (state, action) => {\n      state.modifiers = action.payload;\n    },\n  },\n});\n\nexport const {\n  setParameters,\n  setLoading,\n  softReset,\n  setAnimatedStep,\n  load,\n  setToKeep,\n  setAddKept,\n  goToKeepStep,\n} = slice.actions;\n\nconst { update, setError, setModifiers } = slice.actions;\n\nexport const create = (request, user) => (dispatch) => {\n  dispatch(setLoading(true));\n  dispatch(setParameters(request));\n\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const {\n    tn,\n    ring,\n    skill,\n    modifiers,\n    campaign,\n    character,\n    description,\n    channeled,\n    addkept,\n  } = request;\n\n  if (user) {\n    authentifiedPostOnServer({\n      uri: \"/ffg/l5r/rolls/create\",\n      body: {\n        tn,\n        ring,\n        skill,\n        modifiers,\n        campaign,\n        character,\n        description,\n        channeled,\n        addkept,\n      },\n      success: (data) => {\n        dispatch(load({ ...data, player: user }));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/create\",\n    body: {\n      tn,\n      ring,\n      skill,\n      modifiers,\n      channeled,\n      addkept,\n    },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const reroll = (roll, positions, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/reroll`,\n      body: {\n        positions,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/reroll\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      positions,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const alter = (roll, alterations, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/alter`,\n      body: {\n        alterations,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/alter\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      alterations,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const keep = (roll, positions, toAdd) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    const authKeep = () =>\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/keep`,\n        body: {\n          positions,\n        },\n        success,\n        error,\n      });\n\n    if (toAdd?.length) {\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/parameters`,\n        body: {\n          addkept: toAdd,\n        },\n        success: authKeep,\n        error,\n      });\n      return;\n    }\n\n    authKeep();\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata, addkept } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/keep\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers, addkept },\n        dices,\n        metadata,\n      },\n      positions,\n    },\n    success,\n    error,\n  });\n};\n\nexport const addModifiers = (roll, newModifiers) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const { id, modifiers } = roll;\n  const allModifiers = [...modifiers, ...newModifiers];\n\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/parameters`,\n      body: {\n        modifiers: allModifiers,\n      },\n      success: ({ parameters: { modifiers } }) => {\n        dispatch(setModifiers(modifiers));\n        dispatch(setLoading(false));\n      },\n      error: () => {\n        dispatch(setError(true));\n      },\n    });\n    return;\n  }\n\n  dispatch(setModifiers(allModifiers));\n  dispatch(setLoading(false));\n};\n\nexport const selectAll = (state) => state.roll;\nexport const selectLoading = (state) => state.roll.loading;\nexport const selectStep = (state) => {\n  const {\n    dices,\n    metadata,\n    modifiers,\n    animatedStep,\n    explicitGoToKeep,\n  } = state.roll;\n\n  if (animatedStep) {\n    return animatedStep;\n  }\n\n  const dicesRolled = dices.length > 0;\n  const atLeastOneUnresolvedDice =\n    dicesRolled && dices.some((dice) => dice.status === \"pending\");\n\n  const currentRerollModifiers = modifiers.filter(isReroll);\n  const hasReroll = currentRerollModifiers.length > 0;\n  const rerollDone =\n    !hasReroll || metadata?.rerolls?.length === currentRerollModifiers.length;\n\n  if (dicesRolled && rerollDone && !atLeastOneUnresolvedDice) {\n    return RESOLVE;\n  }\n\n  if (dicesRolled && rerollDone) {\n    if (!explicitGoToKeep) {\n      return REROLL;\n    }\n\n    return KEEP;\n  }\n\n  if (dicesRolled && hasReroll) {\n    return REROLL;\n  }\n\n  return DECLARE;\n};\nexport const selectIntent = (state) => {\n  const {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  } = state.roll;\n\n  return {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  };\n};\nexport const selectHidden = (state) =>\n  state.roll.loading && !state.roll.animatedStep;\n\nexport const selectToKeep = (state) => state.roll.toKeep;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport styles from \"./NextButton.module.css\";\nimport { useSelector } from \"react-redux\";\nimport { selectLoading } from \"./reducer\";\n\nconst NextButton = ({ children, disabled, ...props }) => {\n  const loading = useSelector(selectLoading);\n\n  return (\n    <div className={styles.layout}>\n      <Button\n        type=\"primary\"\n        className={styles.button}\n        disabled={disabled || loading}\n        {...props}\n      >\n        {children}\n      </Button>\n    </div>\n  );\n};\n\nexport default NextButton;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst slice = createSlice({\n  name: \"user\",\n  initialState: {\n    campaigns: [],\n    characters: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      const { id, name, campaigns, characters } = action.payload;\n      state.id = id;\n      state.name = name;\n      state.campaigns = campaigns;\n      state.characters = characters;\n    },\n    addCampaign: (state, action) => {\n      const campaign = action.payload;\n      if (!state.campaigns.includes(campaign)) {\n        state.campaigns.push(campaign);\n      }\n    },\n    addCharacter: (state, action) => {\n      const character = action.payload;\n      if (!state.characters.includes(character)) {\n        state.characters.push(character);\n      }\n    },\n  },\n});\n\nexport const { setUser, addCampaign, addCharacter } = slice.actions;\n\nexport const selectUser = (state) => (state.user.id ? state.user : undefined);\nexport const selectCampaigns = (state) => state.user.campaigns;\nexport const selectCharacters = (state) => state.user.characters;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { Tooltip, Image } from \"antd\";\nimport blankRing from \"./images/black.png\";\nimport strifeOpportunityRing from \"./images/blackot.png\";\nimport strifeSuccessRing from \"./images/blackst.png\";\nimport strifeExplosionRing from \"./images/blacket.png\";\nimport opportunityRing from \"./images/blacko.png\";\nimport successRing from \"./images/blacks.png\";\nimport blankSkill from \"./images/white.png\";\nimport explosionSkill from \"./images/whitee.png\";\nimport explosionStrifeSkill from \"./images/whiteet.png\";\nimport opportunitySkill from \"./images/whiteo.png\";\nimport successSkill from \"./images/whites.png\";\nimport successOpportunitySkill from \"./images/whiteso.png\";\nimport successStrifeSkill from \"./images/whitest.png\";\n\nconst getImage = ({\n  type,\n  value: { opportunity, strife, success, explosion },\n}) => {\n  if (type === \"skill\") {\n    if (explosion) {\n      if (strife) {\n        return explosionStrifeSkill;\n      }\n      return explosionSkill;\n    }\n\n    if (success) {\n      if (opportunity) {\n        return successOpportunitySkill;\n      }\n      if (strife) {\n        return successStrifeSkill;\n      }\n      return successSkill;\n    }\n\n    if (opportunity) {\n      return opportunitySkill;\n    }\n\n    return blankSkill;\n  }\n\n  if (strife) {\n    if (explosion) {\n      return strifeExplosionRing;\n    }\n    if (success) {\n      return strifeSuccessRing;\n    }\n    return strifeOpportunityRing;\n  }\n\n  if (success) {\n    return successRing;\n  }\n  if (opportunity) {\n    return opportunityRing;\n  }\n\n  return blankRing;\n};\n\nconst getText = ({ value: { opportunity, strife, success, explosion } }) => {\n  return (\n    [\n      opportunity && `Opportunity: ${opportunity}`,\n      success && `Success: ${success}`,\n      explosion && `Explosion: ${explosion}`,\n      strife && `Strife: ${strife}`,\n    ]\n      .filter(Boolean)\n      .join(\"; \") || \"Blank\"\n  );\n};\n\nconst Dice = ({ dice }) => {\n  return (\n    <Tooltip title={getText(dice)}>\n      <div>\n        <Image src={getImage(dice)} alt={getText(dice)} preview={false} />\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default Dice;\n","import React from \"react\";\nimport { Radio } from \"antd\";\nimport Dice from \"./Dice\";\nimport styles from \"./DiceSideSelector.module.css\";\nconst SEPARATOR = \"-\";\n\nconst toString = ({\n  type,\n  value: { opportunity, strife, success, explosion },\n}) => {\n  return [\n    type,\n    ...[opportunity, strife, success, explosion].map((number) =>\n      (number || 0).toString()\n    ),\n  ].join(SEPARATOR);\n};\n\nconst toObject = (string) => {\n  const [type, ...value] = string.split(SEPARATOR);\n  const [opportunity, strife, success, explosion] = value.map((s) =>\n    parseInt(s)\n  );\n  return {\n    type,\n    value: {\n      opportunity,\n      strife,\n      success,\n      explosion,\n    },\n  };\n};\n\nexport const FACETS = [\n  { type: \"ring\", value: {} },\n  { type: \"ring\", value: { opportunity: 1, strife: 1 } },\n  { type: \"ring\", value: { opportunity: 1 } },\n  { type: \"ring\", value: { success: 1 } },\n  { type: \"ring\", value: { success: 1, strife: 1 } },\n  { type: \"ring\", value: { explosion: 1, strife: 1 } },\n  { type: \"skill\", value: {} },\n  { type: \"skill\", value: { opportunity: 1 } },\n  { type: \"skill\", value: { success: 1, strife: 1 } },\n  { type: \"skill\", value: { success: 1 } },\n  { type: \"skill\", value: { explosion: 1, strife: 1 } },\n  { type: \"skill\", value: { success: 1, opportunity: 1 } },\n  { type: \"skill\", value: { explosion: 1 } },\n];\n\nconst Loop = ({ facets, button }) => {\n  return (\n    <>\n      {facets.map(({ type, value, disabled }) => {\n        const key = toString({ type, value });\n        return (\n          <Radio.Button key={key} value={key} disabled={disabled}>\n            <Dice dice={{ type, value }} />\n          </Radio.Button>\n        );\n      })}\n      {button}\n    </>\n  );\n};\n\nconst DiceSideSelector = ({ value, onChange, facets = FACETS }) => {\n  return (\n    <Radio.Group\n      onChange={({ target: { value } }) => onChange(toObject(value))}\n      className={styles.group}\n      value={toString(value)}\n    >\n      <Loop facets={facets} />\n    </Radio.Group>\n  );\n};\n\nexport const UncontrolledDiceSideSelector = ({\n  initialValue,\n  onChange,\n  facets = FACETS,\n  button,\n}) => {\n  return (\n    <Radio.Group\n      onChange={({ target: { value } }) => onChange(toObject(value))}\n      className={styles.group}\n      defaultValue={toString(initialValue)}\n    >\n      <Loop facets={facets} button={button} />\n    </Radio.Group>\n  );\n};\n\nexport default DiceSideSelector;\n","import React from \"react\";\nimport { Form, Button } from \"antd\";\nimport { MinusCircleOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { UncontrolledDiceSideSelector } from \"../DiceSideSelector\";\nimport classNames from \"classnames\";\nimport styles from \"./DynamicDiceSelector.module.css\";\n\nconst DynamicDiceSelector = ({\n  fields,\n  labelText,\n  defaultValue,\n  buttonText,\n  errors,\n  add,\n  remove,\n  values = [],\n  facets,\n  buttonLayout,\n}) => {\n  return (\n    <>\n      {fields.map((field, index) => (\n        <Form.Item required={false} key={field.key} label={labelText}>\n          <Form.Item {...field} noStyle>\n            <UncontrolledDiceSideSelector\n              initialValue={values[index] || defaultValue}\n              button={\n                <div\n                  className={classNames(\n                    \"ant-radio-button-wrapper\",\n                    styles[\"pseudo-radio\"]\n                  )}\n                  onClick={() => remove(field.name)}\n                >\n                  <MinusCircleOutlined className={\"dynamic-delete-button\"} />\n                </div>\n              }\n              facets={facets}\n            />\n          </Form.Item>\n        </Form.Item>\n      ))}\n      <Form.Item {...buttonLayout}>\n        <Button\n          type=\"dashed\"\n          onClick={() => add(defaultValue)}\n          icon={<PlusOutlined />}\n        >\n          {buttonText}\n        </Button>\n        <Form.ErrorList errors={errors} />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default DynamicDiceSelector;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Radio,\n  Switch,\n  Divider,\n  AutoComplete,\n  Select,\n  Collapse,\n} from \"antd\";\nimport styles from \"./Intent.module.css\";\nimport NextButton from \"./NextButton\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectCampaigns,\n  selectCharacters,\n  addCampaign,\n  addCharacter,\n  selectUser,\n} from \"../user/reducer\";\nimport { setAnimatedStep, selectHidden } from \"../roller/reducer\";\nimport Animate from \"rc-animate\";\nimport { DECLARE } from \"./Steps\";\nimport DynamicDiceSelector from \"./form/DynamicDiceSelector\";\n\nconst { TextArea } = Input;\nconst { Panel } = Collapse;\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst tailLayout = {\n  labelCol: { span: 0 },\n  wrapperCol: { span: 24 },\n};\n\nconst defaultRules = [{ required: true, message: \"Please fill this field\" }];\n\nconst arrayToAutoCompleteOptions = (values) => {\n  if (!values) {\n    return undefined;\n  }\n\n  return values.map((value) => {\n    return {\n      value,\n    };\n  });\n};\n\nconst AnimatedIntent = ({ onFinish, values }) => {\n  const [completed, setCompleted] = useState(false);\n  const dispatch = useDispatch();\n  const hidden = useSelector(selectHidden);\n\n  useEffect(() => {\n    if (completed) {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  }, [completed]);\n\n  const onComplete = () => {\n    setCompleted(true);\n    dispatch(setAnimatedStep(DECLARE));\n  };\n\n  if (hidden) {\n    return null;\n  }\n\n  return (\n    <Animate\n      transitionName=\"fade\"\n      transitionEnter={false}\n      transitionLeave={true}\n      showProp=\"visible\"\n      onEnd={() => dispatch(setAnimatedStep(null))}\n    >\n      <Intent\n        visible={!completed}\n        onComplete={onComplete}\n        onFinish={onFinish}\n        values={values}\n      />\n    </Animate>\n  );\n};\n\nconst Intent = ({ onFinish, values, onComplete }) => {\n  const campaigns = useSelector(selectCampaigns);\n  const characters = useSelector(selectCharacters);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const user = useSelector(selectUser);\n\n  const wrappedOnFinish = (data) => {\n    onComplete && onComplete();\n\n    dispatch(addCampaign(data[\"campaign\"]));\n    dispatch(addCharacter(data[\"character\"]));\n\n    const techniques = data[\"techniques\"] || [];\n    const misc = data[\"misc\"] || [];\n\n    onFinish({\n      ...data,\n      modifiers: [\n        data[\"modifier\"],\n        data[\"compromised\"] && \"compromised\",\n        data[\"void\"] && \"void\",\n        data[\"school\"],\n        ...techniques,\n        ...misc,\n      ].filter(Boolean),\n    });\n  };\n\n  return (\n    <Form\n      className={`boxed ${styles.form}`}\n      {...layout}\n      initialValues={values}\n      onFinish={wrappedOnFinish}\n      scrollToFirstError\n      form={form}\n      onValuesChange={(changedValues) => {\n        if (\n          Object.keys(changedValues).some((name) =>\n            [\"ring\", \"skill\", \"void\", \"channeled\"].includes(name)\n          )\n        ) {\n          form.validateFields([\"channeled\"]);\n        }\n      }}\n    >\n      {!!user && (\n        <>\n          <Form.Item label=\"Campaign\" name=\"campaign\" rules={defaultRules}>\n            <AutoComplete\n              options={arrayToAutoCompleteOptions(campaigns)}\n              placeholder={\"The Dead of Winter\"}\n            />\n          </Form.Item>\n          <Form.Item label=\"Character\" name=\"character\" rules={defaultRules}>\n            <AutoComplete\n              options={arrayToAutoCompleteOptions(characters)}\n              placeholder={\"Doji Sakura\"}\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Description\"\n            name=\"description\"\n            rules={defaultRules}\n          >\n            <TextArea\n              placeholder={\"Running at the foe! Fire, Fitness, Keen Balance\"}\n            />\n          </Form.Item>\n        </>\n      )}\n      <Form.Item label=\"TN\" name=\"tn\">\n        <InputNumber min={1} />\n      </Form.Item>\n      <Divider />\n      <Form.Item label=\"Ring\" name=\"ring\" rules={defaultRules}>\n        <InputNumber min={1} max={5} />\n      </Form.Item>\n      <Form.Item label=\"Skill\" name=\"skill\" rules={defaultRules}>\n        <InputNumber min={0} max={5} />\n      </Form.Item>\n      <Divider />\n      <Form.Item\n        label={\"Void for +1 Ring die?\"}\n        name=\"void\"\n        valuePropName=\"checked\"\n      >\n        <Switch />\n      </Form.Item>\n      <Form.Item label=\"Advantage / Disadvantage\" name=\"modifier\">\n        <Radio.Group>\n          <Radio.Button value=\"\">None</Radio.Button>\n          <Radio.Button value=\"distinction\">Distinction</Radio.Button>\n          <Radio.Button value=\"adversity\">Adversity</Radio.Button>\n        </Radio.Group>\n      </Form.Item>\n      <Form.Item\n        label=\"Compromised?\"\n        name=\"compromised\"\n        valuePropName=\"checked\"\n      >\n        <Switch />\n      </Form.Item>\n      <Divider />\n      <Collapse ghost>\n        <Panel header={\"Schools, techniques, magic…\"}>\n          <Form.Item label=\"School Ability\" name=\"school\">\n            <Select\n              showSearch\n              allowClear\n              options={[\n                {\n                  value: \"deathdealer\",\n                  label: \"Bayushi Deathdealer — Way of the Scorpion\",\n                },\n                {\n                  value: \"manipulator\",\n                  label: \"Bayushi Manipulator — Weakness Is My Strength\",\n                },\n                {\n                  value: \"shadow\",\n                  label: \"Ikoma Shadow — Victory before Honor\",\n                },\n                {\n                  value: \"ishiken\",\n                  label: \"Ishiken Initiate — Way of the Void\",\n                },\n                {\n                  value: \"sailor\",\n                  label: \"Storm Fleet Sailor — Sailor’s Fortune\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n          <Form.Item label=\"Techniques\" name=\"techniques\">\n            <Select\n              mode=\"multiple\"\n              placeholder=\"Relevant shūji, kata, etc.\"\n              options={[\n                {\n                  value: \"stirring\",\n                  label: \"Shūji — Stirring the Embers\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n          <Form.List\n            name=\"channeled\"\n            rules={[\n              {\n                validator: async (_, dices) => {\n                  if (!dices?.length) {\n                    return;\n                  }\n\n                  const ring = form.getFieldValue(\"ring\");\n                  const skill = form.getFieldValue(\"skill\");\n                  const voided = form.getFieldValue(\"void\");\n\n                  if (\n                    dices.filter(({ type }) => type === \"ring\").length >\n                    ring + (voided ? 1 : 0)\n                  ) {\n                    return Promise.reject(\n                      new Error(\n                        \"More channeled ring dice than rolled ring dice\"\n                      )\n                    );\n                  }\n\n                  if (\n                    dices.filter(({ type }) => type === \"skill\").length > skill\n                  ) {\n                    return Promise.reject(\n                      new Error(\n                        \"More channeled skill dice than rolled skill dice\"\n                      )\n                    );\n                  }\n                },\n              },\n            ]}\n          >\n            {(fields, { add, remove }, { errors }) => {\n              return (\n                <DynamicDiceSelector\n                  fields={fields}\n                  defaultValue={{ type: \"skill\", value: { success: 1 } }}\n                  errors={errors}\n                  labelText={\"Channeled Die\"}\n                  buttonText={\"Use Channeled Die\"}\n                  add={add}\n                  remove={remove}\n                  buttonLayout={{\n                    labelCol: { span: 0 },\n                    wrapperCol: { span: 16, offset: 8 },\n                  }}\n                />\n              );\n            }}\n          </Form.List>\n          <Form.Item label={\"Misc.\"} name=\"misc\">\n            <Select\n              mode=\"multiple\"\n              placeholder={\"Extra options for unusual cases\"}\n              options={[\n                {\n                  value: \"2heavens\",\n                  label: \"Attacking a warding Mirumoto Two-Heavens Adept\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n        </Panel>\n      </Collapse>\n      <Divider />\n      <Form.Item {...tailLayout}>\n        <NextButton htmlType=\"submit\">Roll</NextButton>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default AnimatedIntent;\n","import React from \"react\";\nimport { Typography, List } from \"antd\";\nimport { countDices } from \"./utils\";\nimport styles from \"./Result.module.css\";\nimport classNames from \"classnames\";\n\nconst { Text } = Typography;\n\nconst Result = ({ dices, tn, extra, className, modifiers = [] }) => {\n  const keptDices = dices.filter(({ status }, index) => {\n    return status === \"kept\" || (extra && extra.includes(index));\n  });\n\n  const {\n    successCount,\n    opportunityCount,\n    strifeCount,\n    blankCount,\n  } = countDices(keptDices);\n\n  const data = [\n    {\n      type: \"Success\",\n      count: successCount,\n      color: tn ? (successCount >= tn ? \"success\" : \"warning\") : null,\n      extra: tn ? ` (required: ${tn})` : \" (unknown TN)\",\n    },\n    {\n      type: \"Opportunity\",\n      count: opportunityCount,\n    },\n    {\n      type: \"Strife\",\n      count: strifeCount,\n      color: strifeCount > 0 && \"danger\",\n    },\n  ];\n\n  if (modifiers.includes(\"ishiken\")) {\n    data.push({\n      type: \"Magnitude\",\n      count: blankCount,\n    });\n  }\n\n  if (\n    modifiers.includes(\"shadow\") &&\n    dices.some(({ metadata }) => metadata?.source === \"shadow\")\n  ) {\n    const shadowRerollDices = dices.filter(\n      ({ metadata }) => metadata?.source === \"shadow\"\n    );\n    const shadowCount = shadowRerollDices.length;\n    const honorStaked = Math.ceil(shadowCount / 2);\n    const honorLoss = Math.min(\n      honorStaked,\n      shadowRerollDices.filter(\n        ({ value: { success, explosion } }) => success === 0 && explosion === 0\n      ).length\n    );\n    data.push({\n      type: \"Honor Loss from Ability\",\n      count: honorLoss,\n      color: honorLoss > 0 && \"danger\",\n    });\n  }\n\n  return (\n    <List\n      className={classNames(styles.layout, { [className]: !!className })}\n      grid={{ gutter: 16, column: 3 }}\n      dataSource={data}\n      renderItem={({ type, count, color, extra }) => (\n        <List.Item>\n          <Text strong type={color}>{`${type}: ${count}`}</Text>\n          {extra && <Text>{extra}</Text>}\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default Result;\n","import React from \"react\";\nimport styles from \"./Dices.module.css\";\nimport classNames from \"classnames\";\nimport Dice from \"./Dice\";\n\nconst Dices = ({ dices, theme, className }) => {\n  if (!dices?.length) {\n    return null;\n  }\n  return (\n    <div className={classNames(styles.dices, { [className]: !!className })}>\n      {dices.map((dice, index) => {\n        const { selectable, selected, disabled, toggle, value } = dice;\n\n        return (\n          <div\n            key={index.toString()}\n            className={classNames(styles.dice, {\n              [styles.selectable]: selectable,\n              [styles.selected]: selected,\n              [styles.unselectable]: disabled,\n              [styles[`theme-${theme}`]]: !!theme,\n              [styles.explosion]: value?.explosion,\n            })}\n            onClick={selectable ? toggle : undefined}\n          >\n            <Dice dice={dice} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Dices;\n","import React from \"react\";\nimport Dices from \"./Dices\";\nimport { Divider } from \"antd\";\nimport { splitExplosions } from \"./utils\";\n\nconst ExplosionDices = ({ dices, basePool, className, rerollTypes }) => {\n  if (!basePool || basePool > dices.length) {\n    throw new Error(\"Better than infite loop\");\n  }\n\n  return (\n    <div className={className}>\n      {splitExplosions({ dices, basePool, rerollTypes }).map((dices, index) => {\n        return (\n          <React.Fragment key={index.toString()}>\n            {index > 0 && <Divider />}\n            <Dices dices={dices} theme=\"shiny\" />\n          </React.Fragment>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default ExplosionDices;\n","import React from \"react\";\nimport NextButton from \"./NextButton\";\nimport Result from \"./Result\";\nimport { Typography, Form } from \"antd\";\nimport ExplosionDices from \"./ExplosionDices\";\nimport styles from \"./Keep.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectToKeep, setToKeep } from \"./reducer\";\nimport DynamicDiceSelector from \"./form/DynamicDiceSelector\";\nimport { FACETS } from \"./DiceSideSelector\";\nimport { rolledDicesCount, keptDicesCount } from \"./utils\";\n\nconst { Paragraph } = Typography;\n\nconst AddKeptDiceForm = ({ dices, onChange, compromised }) => {\n  return (\n    <Form\n      onValuesChange={(_, allValues) => {\n        onChange(allValues[\"dices\"]);\n      }}\n      initialValues={{ dices }}\n      className={styles[\"add-kept-form\"]}\n    >\n      <Form.List name=\"dices\">\n        {(fields, { add, remove }, { errors }) => {\n          return (\n            <DynamicDiceSelector\n              fields={fields}\n              defaultValue={{ type: \"ring\", value: { opportunity: 1 } }}\n              errors={errors}\n              buttonText={\"Add Kept Die\"}\n              add={add}\n              remove={remove}\n              values={dices}\n              facets={\n                compromised\n                  ? FACETS.map((facet) => {\n                      if (facet.value.strife > 0) {\n                        return { ...facet, disabled: true };\n                      }\n                      return facet;\n                    })\n                  : FACETS\n              }\n            />\n          );\n        }}\n      </Form.List>\n    </Form>\n  );\n};\n\nconst Keep = ({\n  dices,\n  ring,\n  skill,\n  onFinish,\n  tn,\n  rerollTypes,\n  addkept,\n  setAddKept,\n  modifiers,\n}) => {\n  const toKeep = useSelector(selectToKeep);\n  const dispatch = useDispatch();\n\n  const compromised = modifiers.includes(\"compromised\");\n\n  const max = keptDicesCount({ ring, modifiers });\n  const basePool = rolledDicesCount({ ring, skill, modifiers });\n\n  const keepingExplosions = dices.some((dice) => dice.status === \"kept\");\n\n  const trulyCompromised =\n    compromised &&\n    dices\n      .filter((dice) => dice.status === \"pending\")\n      .every((dice) => dice.value.strife);\n\n  const showAddKept = addkept?.length && !keepingExplosions;\n\n  const toggle = (index) => {\n    if (toKeep.includes(index)) {\n      return dispatch(setToKeep(toKeep.filter((i) => i !== index)));\n    }\n    return dispatch(setToKeep([...toKeep, index]));\n  };\n\n  const text = () => {\n    if (trulyCompromised) {\n      return \"Being compromised, you cannot keep any die with strife… Which, in this very specific case, means you cannot keep any die at all.\";\n    }\n\n    if (keepingExplosions) {\n      return \"Select which explosions you wish to keep (if any).\";\n    }\n\n    let defaultText =\n      max > 1\n        ? `You can keep up to ${max} dice (min 1)`\n        : \"You must choose one die to keep\";\n\n    if (addkept?.length) {\n      defaultText += \" in top of your added dice\";\n    }\n\n    defaultText += \".\";\n\n    if (compromised) {\n      return `${defaultText} However, due to being compromised, you cannot keep any die with strife.`;\n    }\n\n    return defaultText;\n  };\n\n  const buttonText = () => {\n    if (trulyCompromised) {\n      return \"Continue\";\n    }\n\n    if (keepingExplosions) {\n      if (toKeep.length === 0) {\n        return \"Don't keep anything else\";\n      }\n\n      if (toKeep.length === 1) {\n        return \"Also keep that die\";\n      }\n\n      return \"Also keep these dice\";\n    }\n\n    if (toKeep.length === 1) {\n      return \"Keep that die\";\n    }\n\n    if (toKeep.length === 0) {\n      return \"Must select at least one die\";\n    }\n\n    return \"Keep these dice\";\n  };\n\n  const wrapDices = () => {\n    const baseDices = dices.map((dice, index) => {\n      const { status, value } = dice;\n      const selected = status === \"kept\" || toKeep.includes(index);\n      const available = status === \"pending\" && (!compromised || !value.strife);\n      const selectable =\n        available && (selected || keepingExplosions || max > toKeep.length);\n      const disabled = (() => {\n        if (status === \"kept\") {\n          return false;\n        }\n        if (status !== \"pending\") {\n          return true;\n        }\n        return !selectable;\n      })();\n      return {\n        ...dice,\n        selectable,\n        selected,\n        disabled,\n        toggle: () => toggle(index),\n      };\n    });\n\n    if (showAddKept) {\n      return [\n        ...baseDices,\n        ...addkept.map((dice) => {\n          return {\n            ...dice,\n            status: \"pending\",\n            metadata: { source: \"addkept\" },\n            selected: true,\n            selectable: false,\n          };\n        }),\n      ];\n    }\n\n    return baseDices;\n  };\n  const resultDices = () => {\n    if (showAddKept) {\n      return [\n        ...dices,\n        ...addkept.map((dice) => {\n          return {\n            ...dice,\n            status: \"kept\",\n          };\n        }),\n      ];\n    }\n\n    return dices;\n  };\n\n  return (\n    <div className={styles.layout}>\n      <ExplosionDices\n        dices={wrapDices()}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n      <Paragraph>{text()}</Paragraph>\n      <Result\n        dices={resultDices()}\n        tn={tn}\n        extra={toKeep}\n        className={styles.figures}\n        modifiers={rerollTypes}\n      />\n      {!keepingExplosions && (\n        <AddKeptDiceForm\n          dices={addkept}\n          onChange={setAddKept}\n          compromised={compromised}\n        />\n      )}\n      <NextButton\n        onClick={() => {\n          if (!keepingExplosions && addkept?.length) {\n            onFinish(toKeep, addkept);\n            return;\n          }\n\n          onFinish(toKeep);\n        }}\n        disabled={\n          !(keepingExplosions || trulyCompromised) && toKeep.length === 0\n        }\n      >\n        {buttonText()}\n      </NextButton>\n    </div>\n  );\n};\n\nexport default Keep;\n","import React from \"react\";\nimport { Descriptions } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport Dice from \"./Dice\";\nimport styles from \"./Summary.module.css\";\nimport { orderDices, isSpecialReroll, isSpecialAlteration } from \"./utils\";\n\nconst Summary = ({\n  campaign,\n  character,\n  description,\n  tn,\n  ring,\n  skill,\n  modifiers,\n  player,\n  channeled,\n  addkept,\n}) => {\n  const special = [\n    modifiers.includes(\"compromised\") && \"Compromised\",\n    modifiers.includes(\"adversity\") && \"Adversity\",\n    modifiers.includes(\"distinction\") && \"Distinction\",\n    modifiers.includes(\"stirring\") && \"Shūji — Stirring the Embers\",\n    modifiers.includes(\"deathdealer\") && \"Bayushi Deathdealer School Ability\",\n    modifiers.includes(\"manipulator\") && \"Bayushi Manipulator School Ability\",\n    modifiers.includes(\"2heavens\") &&\n      \"Attacking a warding Mirumoto Two-Heavens Adept\",\n    modifiers.includes(\"ruthless\") &&\n      \"Custom reroll (from NPCs' or other PCs' effects)\",\n    modifiers.includes(\"shadow\") && \"Ikoma Shadow School Ability\",\n    modifiers.includes(\"sailor\") && \"Storm Fleet Sailor School Ability\",\n    modifiers.some(isSpecialReroll) && \"Custom reroll\",\n    modifiers.includes(\"ishiken\") && \"Ishiken Initiate School Ability\",\n    modifiers.some(isSpecialAlteration) && \"Custom alteration\",\n  ]\n    .filter(Boolean)\n    .join(\" / \");\n\n  return (\n    <Descriptions column={{ md: 3, sm: 1, xs: 1 }} bordered>\n      {player && (\n        <>\n          <Descriptions.Item label=\"Campaign\">\n            <Link to={`/rolls?campaign=${campaign}`}>{campaign}</Link>\n          </Descriptions.Item>\n          <Descriptions.Item label=\"Character\">\n            <Link to={`/rolls?campaign=${campaign}&character=${character}`}>\n              {character}\n            </Link>\n          </Descriptions.Item>\n          <Descriptions.Item label=\"Player\">\n            <Link to={`/rolls?player=${player.id}`}>{player.name}</Link>\n          </Descriptions.Item>\n        </>\n      )}\n\n      {description && (\n        <>\n          <Descriptions.Item label=\"Description\" span={2}>\n            {description}\n          </Descriptions.Item>\n          <Descriptions.Item label=\"TN\">{tn || \"?\"}</Descriptions.Item>\n        </>\n      )}\n\n      <Descriptions.Item label=\"Ring\">{ring}</Descriptions.Item>\n      <Descriptions.Item label=\"Skill\">{skill}</Descriptions.Item>\n      <Descriptions.Item label=\"Voided?\">\n        {modifiers.includes(\"void\") ? \"Yes\" : \"No\"}\n      </Descriptions.Item>\n\n      {channeled?.length && (\n        <Descriptions.Item label={\"Channeled Dice Used\"} span={3}>\n          <div className={styles.dices}>\n            {orderDices(channeled).map((dice, index) => {\n              return <Dice key={index.toString()} dice={dice} />;\n            })}\n          </div>\n        </Descriptions.Item>\n      )}\n      {addkept?.length && (\n        <Descriptions.Item label={\"Kept Dice Added\"} span={3}>\n          <div className={styles.dices}>\n            {orderDices(addkept).map((dice, index) => {\n              return <Dice key={index.toString()} dice={dice} />;\n            })}\n          </div>\n        </Descriptions.Item>\n      )}\n      {special && (\n        <Descriptions.Item label={\"Additional Modifiers\"} span={3}>\n          {special}\n        </Descriptions.Item>\n      )}\n    </Descriptions>\n  );\n};\n\nexport default Summary;\n","import React from \"react\";\nimport { Alert } from \"antd\";\n\nconst DefaultErrorMessage = () => {\n  return (\n    <Alert\n      message=\"Something bad happened. Try reloading the page. If things are still broken, please contact administrator through the link at the bottom of the page.\"\n      type=\"error\"\n      banner={true}\n    />\n  );\n};\n\nexport default DefaultErrorMessage;\n","import React from \"react\";\nimport Dices from \"../Dices\";\nimport styles from \"./Reroll.module.css\";\nimport { Typography } from \"antd\";\nimport {\n  replaceRerollsOfType,\n  isRerollOfType,\n  isFromRerollOfType,\n  isSpecialReroll,\n  isSpecialAlteration,\n} from \"../utils\";\n\nconst { Title, Paragraph } = Typography;\n\nconst THEMES = {\n  distinction: \"green\",\n  adversity: \"orange\",\n  \"2heavens\": \"orange\",\n};\n\nconst TITLES = {\n  distinction: \"Distinction\",\n  adversity: \"Adversity\",\n  shadow: \"Ikoma Shadow School Ability\",\n  deathdealer: \"Bayushi Deathdealer School Ability\",\n  manipulator: \"Bayushi Manipulator School Ability\",\n  ishiken: \"Ishiken Initiate School Ability\",\n  \"2heavens\": \"Enemy Mirumoto Two-Heavens Adept School Ability\",\n  ruthless: \"Custom reroll (from NPCs' or other PCs' effects)\",\n  sailor: \"Storm Fleet Sailor School Ability\",\n};\n\nconst EMPTY = {\n  distinction: \"No dice were rerolled\",\n  adversity: \"No dice with a success or an explosion\",\n  \"2heavens\": \"No dice with a success or an explosion\",\n};\n\nconst getTitle = (name) => {\n  if (isSpecialReroll(name)) {\n    return \"Custom reroll\";\n  }\n\n  if (isSpecialAlteration(name)) {\n    return \"Custom alteration\";\n  }\n\n  return TITLES[name];\n};\n\nconst SingleReroll = ({ dices, basePool, rerollType, rerollTypes }) => {\n  if (\n    (rerollType === \"deathdealer\" || rerollType === \"manipulator\") &&\n    rerollTypes.includes(\"distinction\")\n  ) {\n    return null;\n  }\n\n  const theme = THEMES[rerollType] || \"magenta\";\n  const title = getTitle(rerollType);\n\n  if (!dices.some((dice) => isRerollOfType(dice, rerollType))) {\n    return (\n      <div className={styles.layout}>\n        <Title level={4} className={styles.title}>\n          {title}\n        </Title>\n        <Paragraph className={styles.empty}>\n          {EMPTY[rerollType] || `Ability not used`}\n        </Paragraph>\n      </div>\n    );\n  }\n\n  const indexOfType = rerollTypes.indexOf(rerollType);\n  const previousRerollTypes = rerollTypes.filter(\n    (_, index) => index < indexOfType\n  );\n\n  const leftDices = () => {\n    if (indexOfType <= 0) {\n      return dices.slice(0, basePool);\n    }\n    return replaceRerollsOfType({\n      dices,\n      rerollType: rerollTypes[indexOfType - 1],\n      previousRerollTypes,\n      basePool,\n    });\n  };\n\n  return (\n    <div className={styles.layout}>\n      <Title level={4} className={styles.title}>\n        {title}\n      </Title>\n      <div className={styles.container}>\n        <Dices\n          dices={leftDices().map((dice) => {\n            return {\n              ...dice,\n              selected: isRerollOfType(dice, rerollType),\n            };\n          })}\n          theme={theme}\n        />\n        <div className={styles[\"arrow-right\"]}>{\"⇨\"}</div>\n        <div className={styles[\"arrow-down\"]}>{\"⇩\"}</div>\n        <Dices\n          dices={replaceRerollsOfType({\n            dices,\n            rerollType,\n            previousRerollTypes,\n            basePool,\n          }).map((dice) => {\n            if (isFromRerollOfType(dice, rerollType)) {\n              return { ...dice, selected: true };\n            }\n\n            return dice;\n          })}\n          theme={theme}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Reroll = ({ dices, basePool, rerollTypes }) => {\n  if (rerollTypes.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      {rerollTypes.map((rerollType) => {\n        return (\n          <SingleReroll\n            key={rerollType}\n            dices={dices}\n            basePool={basePool}\n            rerollType={rerollType}\n            rerollTypes={rerollTypes}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default Reroll;\n","import React from \"react\";\nimport ExplosionDices from \"../ExplosionDices\";\n\nconst Keep = ({ dices, basePool, rerollTypes }) => {\n  return (\n    <ExplosionDices\n      className=\"boxed\"\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n      dices={dices.map((dice) => {\n        const selected = dice.status === \"kept\";\n        return {\n          ...dice,\n          disabled: !selected,\n          selected,\n        };\n      })}\n    />\n  );\n};\n\nexport default Keep;\n","import React from \"react\";\nimport { Button, message } from \"antd\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { countDices } from \"../utils\";\n\nconst BbCode = ({ id, description, tn, dices, modifiers = [] }) => {\n  const buttonText = `Copy as BBCode`;\n\n  if (!id) {\n    return <Button disabled>{buttonText}</Button>;\n  }\n\n  const keptDices = dices.filter(({ status }) => {\n    return status === \"kept\";\n  });\n\n  const {\n    successCount,\n    opportunityCount,\n    strifeCount,\n    blankCount,\n  } = countDices(keptDices);\n\n  let shortResult = `Success: [b]${successCount}[/b] / Opportunity: [b]${opportunityCount}[/b] / Strife: [b]${strifeCount}[/b]`;\n  if (modifiers.includes(\"ishiken\")) {\n    shortResult += ` / Magnitude: [b]${blankCount}[/b]`;\n  }\n\n  const text = `[url=\"${\n    window.location.origin\n  }/rolls/${id}\"]${description}[/url] | TN: ${tn || \"?\"} | ${shortResult}`;\n\n  return (\n    <CopyToClipboard\n      text={text}\n      onCopy={() => message.success(\"Copied to clipboard!\")}\n    >\n      <Button>{buttonText}</Button>\n    </CopyToClipboard>\n  );\n};\n\nexport default BbCode;\n","import React from \"react\";\nimport { Button, message } from \"antd\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nconst DirectLink = ({ id }) => {\n  const buttonText = `Copy link`;\n\n  if (!id) {\n    return <Button disabled>{buttonText}</Button>;\n  }\n\n  const text = `${window.location.origin}/rolls/${id}`;\n\n  return (\n    <CopyToClipboard\n      text={text}\n      onCopy={() => message.success(\"Copied to clipboard!\")}\n    >\n      <Button>{buttonText}</Button>\n    </CopyToClipboard>\n  );\n};\n\nexport default DirectLink;\n","import React from \"react\";\nimport styles from \"./LineContainer.module.css\";\n\nconst LineContainer = ({ children }) => {\n  return <div className={styles.buttons}>{children}</div>;\n};\n\nexport default LineContainer;\n","import React from \"react\";\nimport Result from \"../Result\";\nimport BbCode from \"../button/BbCode\";\nimport styles from \"./Resolve.module.css\";\nimport Dices from \"../Dices\";\nimport { replaceRerolls, orderDices } from \"../utils\";\nimport DirectLink from \"../button/DirectLink\";\nimport LineContainer from \"../button/LineContainer\";\n\nconst Resolve = ({\n  dices,\n  tn,\n  description,\n  id,\n  button,\n  basePool,\n  rerollTypes,\n}) => {\n  return (\n    <div className={styles.layout}>\n      <div className={styles.container}>\n        <Dices\n          dices={orderDices(\n            replaceRerolls({ dices, basePool, rerollTypes }).filter(\n              ({ status }) => status === \"kept\"\n            )\n          )}\n          className={styles.dices}\n        />\n        <Result dices={dices} tn={tn} modifiers={rerollTypes} />\n        <LineContainer>\n          <DirectLink id={id} />\n          <BbCode\n            id={id}\n            dices={dices}\n            tn={tn}\n            description={description}\n            modifiers={rerollTypes}\n          />\n          {button}\n        </LineContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default Resolve;\n","import React from \"react\";\nimport { Alert, Typography, Affix } from \"antd\";\n\nconst { Link, Paragraph } = Typography;\n\nconst AnonymousAlert = ({ className }) => {\n  return (\n    <Affix>\n      <Alert\n        className={className}\n        showIcon\n        closable\n        message={\"Mono no aware\"}\n        description={\n          <>\n            <Paragraph>\n              You are not logged in. While you can totally use the roller as a\n              guest, please take note that{\" \"}\n              <strong>any roll made won't be persisted</strong>.\n            </Paragraph>\n            <Paragraph>\n              You will need to <Link href=\"/login\">log in</Link> first if you\n              wish to keep and share your results.\n            </Paragraph>\n          </>\n        }\n        type=\"warning\"\n      />\n    </Affix>\n  );\n};\n\nexport default AnonymousAlert;\n","import React from \"react\";\nimport Dices from \"./Dices\";\nimport { Typography, Card } from \"antd\";\n\nconst { Paragraph } = Typography;\n\nconst DicesBox = ({ dices, text, footer, theme }) => {\n  return (\n    <Card bordered={false}>\n      <div className=\"boxed\">\n        {text && <Paragraph>{text}</Paragraph>}\n        <Dices dices={dices} theme={theme} />\n        {footer && <div>{footer}</div>}\n      </div>\n    </Card>\n  );\n};\n\nexport default DicesBox;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\n\nconst Distinction = ({ dices, onFinish, modifiers }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const max = modifiers.includes(\"stirring\") ? 3 : 2;\n  const bypassMax =\n    modifiers.includes(\"deathdealer\") || modifiers.includes(\"manipulator\");\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n\n  const buttonText = () => {\n    if (toReroll.length === 0) {\n      return \"Don't reroll anything\";\n    }\n\n    if (toReroll.length === 1) {\n      return \"Reroll that die\";\n    }\n\n    return \"Reroll these dice\";\n  };\n\n  const text = () => {\n    if (bypassMax) {\n      return `Thanks to your Distinction and your School Ability, you can select up to ${max} plus your school rank dice to be rerolled.`;\n    }\n\n    return `Thanks to your Distinction, you can select up to ${max} dice to be rerolled.`;\n  };\n\n  return (\n    <DicesBox\n      text={text()}\n      dices={dices.map((dice, index) => {\n        const selected = toReroll.includes(index);\n        const selectable = selected || toReroll.length < max || bypassMax;\n        return {\n          ...dice,\n          selectable,\n          selected,\n          disabled: !selectable,\n          toggle: () => toggle(index),\n        };\n      })}\n      footer={\n        <NextButton onClick={() => onFinish(toReroll)}>\n          {buttonText()}\n        </NextButton>\n      }\n      theme=\"green\"\n    />\n  );\n};\n\nexport default Distinction;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\n\nconst Adversity = ({ dices, onFinish }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const successDices = dices.filter(\n    ({ value }) => value.success || value.explosion\n  );\n  const max = 2;\n  const min = Math.min(max, successDices.length);\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n  const text = `Due to your Adversity, you must select two success dice (or as much as possible if you don't have two) that will be rerolled.`;\n\n  return (\n    <DicesBox\n      text={text}\n      dices={dices.map((dice, index) => {\n        const selected = toReroll.includes(index);\n        const isSuccess = dice.value.success || dice.value.explosion;\n        const selectable = isSuccess && (selected || toReroll.length < max);\n        return {\n          ...dice,\n          selectable,\n          selected,\n          disabled: !selectable,\n          toggle: () => toggle(index),\n        };\n      })}\n      footer={\n        <NextButton\n          disabled={toReroll.length < min}\n          onClick={() => onFinish(toReroll)}\n        >\n          {\"Continue\"}\n        </NextButton>\n      }\n      theme=\"orange\"\n    />\n  );\n};\n\nexport default Adversity;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\n\nconst Ability = ({ dices, onFinish, text, basePool, rerollTypes }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n\n  const buttonText = () => {\n    if (toReroll.length === 0) {\n      return \"Skip\";\n    }\n\n    if (toReroll.length === 1) {\n      return \"Reroll that die\";\n    }\n\n    return \"Reroll these dice\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = toReroll.includes(index);\n          return {\n            ...dice,\n            selectable: true,\n            selected,\n            disabled: false,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <NextButton onClick={() => onFinish(toReroll)}>\n          {buttonText()}\n        </NextButton>\n      }\n      theme=\"magenta\"\n    />\n  );\n};\n\nexport default Ability;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\nimport { Typography } from \"antd\";\nimport styles from \"./Ishiken.module.css\";\nimport DiceSideSelector from \"../DiceSideSelector\";\n\nconst { Text, Paragraph } = Typography;\n\nconst blank = ({ value: { opportunity, strife, success, explosion } }) =>\n  opportunity === 0 && strife === 0 && success === 0 && explosion === 0;\n\nconst AVAILABLE_FACETS = {\n  ring: [\n    { opportunity: 1, strife: 1 },\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n  ],\n  skill: [\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n    { success: 1, opportunity: 1 },\n    { explosion: 1 },\n  ],\n};\n\nconst Ishiken = ({ dices, onFinish, basePool, rerollTypes }) => {\n  const [alterations, setAlterations] = useState([]);\n  const positions = alterations.map(({ position }) => position);\n\n  const toggle = (index) => {\n    if (alterations.some(({ position }) => position === index)) {\n      return setAlterations(\n        alterations.filter(({ position }) => position !== index)\n      );\n    }\n\n    const originalDice = dices[index];\n    return setAlterations([\n      ...alterations,\n      { position: index, value: blank(originalDice) ? { success: 1 } : {} },\n    ]);\n  };\n\n  const onlyBlanks =\n    alterations.length > 0 &&\n    dices.filter((_, index) => positions.includes(index)).some(blank);\n  const onlyNonBlanks = alterations.length > 0 && !onlyBlanks;\n\n  const text = (\n    <Paragraph>\n      {`Your School Ability allows you to receive a number of fatigue up to your school rank to either:`}\n      <ul>\n        <li>\n          <Text>{`Choose a number of dice with non-blank results equal to the fatigue you received , and alter each to a blank result.`}</Text>\n        </li>\n        <li>\n          <Text>{`Choose a number of dice with blank results equal to the fatigue you received, and alter each to a non-blank result of your choice.`}</Text>\n        </li>\n      </ul>\n    </Paragraph>\n  );\n\n  const buttonText = () => {\n    if (onlyNonBlanks) {\n      return \"Pull\";\n    }\n\n    if (onlyBlanks) {\n      return \"Push\";\n    }\n\n    return \"Skip\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = positions.includes(index);\n          const selectable =\n            (!onlyBlanks && !onlyNonBlanks) ||\n            (onlyBlanks && blank(dice)) ||\n            (onlyNonBlanks && !blank(dice));\n          return {\n            ...dice,\n            selectable,\n            selected,\n            disabled: !selectable,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <>\n          {onlyBlanks && (\n            <div className={styles.alterators}>\n              <Text>{`Choose your desired non-blank result${\n                alterations.length > 1 ? \"s\" : \"\"\n              }`}</Text>\n              {alterations.map(({ position, value }) => {\n                const type = dices[position][\"type\"];\n\n                return (\n                  <DiceSideSelector\n                    key={position.toString()}\n                    value={{ type, value }}\n                    onChange={({ value }) => {\n                      const alt = [...alterations];\n                      const index = alt.findIndex(\n                        ({ position: pos }) => pos === position\n                      );\n                      alt[index][\"value\"] = value;\n                      setAlterations(alt);\n                    }}\n                    facets={AVAILABLE_FACETS[type].map((value) => {\n                      return { type, value };\n                    })}\n                  />\n                );\n              })}\n            </div>\n          )}\n          <NextButton onClick={() => onFinish(alterations)}>\n            {buttonText()}\n          </NextButton>\n        </>\n      }\n      theme=\"magenta\"\n    />\n  );\n};\n\nexport default Ishiken;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\n\nconst DragonWard = ({ dices, onFinish, basePool, rerollTypes }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const min = Math.min(\n    1,\n    dices.filter(\n      ({ value: { success, explosion } }) => success > 0 || explosion > 0\n    ).length\n  );\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n  const text = `You must reroll dice containing success up to the attacked Mirumoto's school rank.`;\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = toReroll.includes(index);\n          const selectable = dice.value.success > 0 || dice.value.explosion > 0;\n          return {\n            ...dice,\n            selectable,\n            selected,\n            disabled: !selectable,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <NextButton\n          disabled={toReroll.length < min}\n          onClick={() => onFinish(toReroll)}\n        >\n          {\"Continue\"}\n        </NextButton>\n      }\n      theme=\"orange\"\n    />\n  );\n};\n\nexport default DragonWard;\n","import React from \"react\";\nimport NextButton from \"../NextButton\";\nimport Ability from \"./Ability\";\nimport { Typography, Card } from \"antd\";\n\nconst { Paragraph } = Typography;\n\nconst Sailor = ({ dices, onFinish, basePool, rerollTypes, compromised }) => {\n  if (compromised) {\n    return (\n      <Card bordered={false}>\n        <div className=\"boxed\">\n          <Paragraph>\n            {\"You may not use your School Ability as you are compromised.\"}\n          </Paragraph>\n          <NextButton onClick={() => onFinish([])}>{\"Continue\"}</NextButton>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <Ability\n      text={\n        \"You may receive a number of strife up to your school rank to reroll that many rolled dice.\"\n      }\n      dices={dices}\n      onFinish={onFinish}\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n    />\n  );\n};\n\nexport default Sailor;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\nimport DiceSideSelector from \"../DiceSideSelector\";\nimport styles from \"./Alter.module.css\";\n\nconst AVAILABLE_FACETS = {\n  ring: [\n    {},\n    { opportunity: 1, strife: 1 },\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n  ],\n  skill: [\n    {},\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n    { success: 1, opportunity: 1 },\n    { explosion: 1 },\n  ],\n};\n\nconst Alter = ({ text, dices, onFinish, basePool, rerollTypes }) => {\n  const [alterations, setAlterations] = useState([]);\n  const positions = alterations.map(({ position }) => position);\n\n  const toggle = (index) => {\n    if (alterations.some(({ position }) => position === index)) {\n      return setAlterations(\n        alterations.filter(({ position }) => position !== index)\n      );\n    }\n\n    return setAlterations([\n      ...alterations,\n      { position: index, value: { success: 1 } },\n    ]);\n  };\n\n  const buttonText = () => {\n    return \"Continue\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = positions.includes(index);\n          return {\n            ...dice,\n            selectable: true,\n            selected,\n            disabled: false,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <>\n          <div className={styles.list}>\n            {alterations.map(({ position, value }) => {\n              const type = dices[position][\"type\"];\n\n              return (\n                <DiceSideSelector\n                  key={position.toString()}\n                  value={{ type, value }}\n                  onChange={({ value }) => {\n                    const alt = [...alterations];\n                    const index = alt.findIndex(\n                      ({ position: pos }) => pos === position\n                    );\n                    alt[index][\"value\"] = value;\n                    setAlterations(alt);\n                  }}\n                  facets={AVAILABLE_FACETS[type].map((value) => {\n                    return { type, value };\n                  })}\n                />\n              );\n            })}\n          </div>\n          <NextButton onClick={() => onFinish(alterations)}>\n            {buttonText()}\n          </NextButton>\n        </>\n      }\n      theme=\"magenta\"\n    />\n  );\n};\n\nexport default Alter;\n","import React from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls, isAlteration } from \"../utils\";\nimport { Button } from \"antd\";\nimport LineContainer from \"../button/LineContainer\";\n\nconst Confirm = ({\n  dices,\n  onFinish,\n  basePool,\n  rerollTypes,\n  addReroll,\n  addAlteration,\n}) => {\n  const text = `Your rolled dice at the moment are as follow.`;\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices,\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <LineContainer>\n          <Button disabled={!addReroll} onClick={addReroll}>{`Apply ${\n            rerollTypes.filter((name) => !isAlteration(name)).length > 0\n              ? \"another\"\n              : \"a\"\n          } reroll`}</Button>\n          <Button disabled={!addAlteration} onClick={addAlteration}>{`Apply ${\n            rerollTypes.filter((name) => isAlteration(name)).length > 0\n              ? \"another\"\n              : \"an\"\n          } alteration`}</Button>\n          <NextButton onClick={onFinish}>{`Continue`}</NextButton>\n        </LineContainer>\n      }\n    />\n  );\n};\n\nexport default Confirm;\n","import React from \"react\";\nimport { reroll, alter, goToKeepStep, addModifiers } from \"./reducer\";\nimport Distinction from \"./reroll/Distinction\";\nimport Adversity from \"./reroll/Adversity\";\nimport Ability from \"./reroll/Ability\";\nimport Ishiken from \"./reroll/Ishiken\";\nimport DragonWard from \"./reroll/DragonWard\";\nimport Sailor from \"./reroll/Sailor\";\nimport Alter from \"./reroll/Alter\";\nimport Confirm from \"./reroll/Confirm\";\nimport {\n  isSpecialReroll,\n  rolledDicesCount,\n  isSpecialAlteration,\n} from \"./utils\";\nimport Result from \"./result/Reroll\";\nimport { Divider } from \"antd\";\n\nconst Modifier = ({ roll, dispatch }) => {\n  const { dices, modifiers, metadata } = roll;\n\n  const compromised = modifiers.includes(\"compromised\");\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  const shouldShow = (modifier) =>\n    modifiers.includes(modifier) && !rerollTypes.includes(modifier);\n\n  if (shouldShow(\"distinction\")) {\n    return (\n      <Distinction\n        dices={dices}\n        onFinish={(positions) =>\n          dispatch(reroll(roll, positions, \"distinction\"))\n        }\n        modifiers={modifiers}\n      />\n    );\n  }\n\n  if (shouldShow(\"adversity\")) {\n    return (\n      <Adversity\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"adversity\"))}\n      />\n    );\n  }\n  const AbilityReroll = ({ name, text }) => {\n    return (\n      <Ability\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, name))}\n        text={text}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  };\n\n  if (shouldShow(\"deathdealer\")) {\n    return (\n      <AbilityReroll\n        name={\"deathdealer\"}\n        text={`Thanks to your School Ability, you may reroll dice up to your school rank.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"manipulator\")) {\n    return (\n      <AbilityReroll\n        name={\"manipulator\"}\n        text={`Thanks to your School Ability, you may reroll dice up to your school rank.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"2heavens\")) {\n    return (\n      <DragonWard\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"2heavens\"))}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  }\n\n  if (shouldShow(\"ruthless\")) {\n    return (\n      <AbilityReroll\n        name={\"ruthless\"}\n        text={`Custom reroll: Select the dice you have to reroll.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"shadow\")) {\n    return (\n      <AbilityReroll\n        name={\"shadow\"}\n        text={`Thanks to your School Ability, you can stake honor up to your school rank to re-roll a number of dice equal to twice the amount of honor staked.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"sailor\")) {\n    return (\n      <Sailor\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"sailor\"))}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n        compromised={compromised}\n      />\n    );\n  }\n\n  const specialReroll = modifiers.find(\n    (modifier) => isSpecialReroll(modifier) && shouldShow(modifier)\n  );\n  if (specialReroll) {\n    return (\n      <AbilityReroll\n        name={specialReroll}\n        text={`Custom reroll: Select the dice you want/have to reroll.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"ishiken\")) {\n    return (\n      <Ishiken\n        dices={dices}\n        onFinish={(alterations) =>\n          dispatch(alter(roll, alterations, \"ishiken\"))\n        }\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  }\n\n  const specialAlteration = modifiers.find(\n    (modifier) => isSpecialAlteration(modifier) && shouldShow(modifier)\n  );\n  if (specialAlteration) {\n    return (\n      <Alter\n        dices={dices}\n        onFinish={(alterations) =>\n          dispatch(alter(roll, alterations, specialAlteration))\n        }\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n        text={`Custom alteration: Change the result as you want/have to.`}\n      />\n    );\n  }\n\n  const addReroll = () =>\n    dispatch(\n      addModifiers(roll, [\n        `ruleless${modifiers.length.toString().padStart(2, \"0\")}`,\n      ])\n    );\n  const addAlteration = () =>\n    dispatch(\n      addModifiers(roll, [\n        `reasonless${modifiers.length.toString().padStart(2, \"0\")}`,\n      ])\n    );\n  return (\n    <Confirm\n      dices={dices}\n      onFinish={() => dispatch(goToKeepStep())}\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n      addReroll={modifiers.length < 100 && addReroll}\n      addAlteration={modifiers.length < 100 && addAlteration}\n    />\n  );\n};\n\nconst WrappedModifier = ({ roll, dispatch }) => {\n  const { dices, metadata } = roll;\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  return (\n    <>\n      {rerollTypes.length > 0 && (\n        <>\n          <Result dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n          <Divider />\n        </>\n      )}\n      <Modifier roll={roll} dispatch={dispatch} />\n    </>\n  );\n};\n\nexport default WrappedModifier;\n","import React, { useEffect, useState } from \"react\";\nimport Intent from \"./Intent\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectAll,\n  create,\n  softReset,\n  keep,\n  selectStep,\n  selectIntent,\n  setAddKept,\n} from \"./reducer\";\nimport Keep from \"./Keep\";\nimport Summary from \"./Summary\";\nimport { Collapse } from \"antd\";\nimport styles from \"./index.module.css\";\nimport { setParameters, load } from \"./reducer\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport NextButton from \"./NextButton\";\nimport { selectUser } from \"../user/reducer\";\nimport Steps, { DECLARE, REROLL, KEEP, RESOLVE } from \"./Steps\";\nimport RerollResult from \"./result/Reroll\";\nimport KeepResult from \"./result/Keep\";\nimport ResolveResult from \"./result/Resolve\";\nimport AnonymousAlert from \"./AnonymousAlert\";\nimport { isReroll, rolledDicesCount } from \"./utils\";\nimport Modifier from \"./Modifier\";\n\nconst { Panel } = Collapse;\n\nconst Layout = ({ children }) => {\n  const user = useSelector(selectUser);\n  const currentStep = useSelector(selectStep);\n\n  return (\n    <>\n      {!user && <AnonymousAlert className={styles.alert} />}\n      <Steps current={currentStep} className={styles.steps} />\n      <>{children}</>\n    </>\n  );\n};\n\nconst Roller = ({ save }) => {\n  const roll = useSelector(selectAll);\n  const user = useSelector(selectUser);\n  const currentStep = useSelector(selectStep);\n  const intent = useSelector(selectIntent);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!save || !dispatch) {\n      return;\n    }\n    dispatch(setParameters({ ...save, ...save.roll.parameters }));\n    dispatch(\n      load({\n        id: save.id,\n        dices: save.roll.dices,\n        metadata: save.roll.metadata,\n        player: save.user,\n      })\n    );\n  }, [save, dispatch]);\n\n  const [activeKeys, setActiveKeys] = useState([DECLARE]);\n  useEffect(() => {\n    // FIXME: Naming inconsistency\n    if (currentStep === REROLL) {\n      setActiveKeys([\"modify\"]);\n      return;\n    }\n    setActiveKeys([currentStep]);\n  }, [currentStep]);\n\n  const {\n    dices,\n    tn,\n    modifiers,\n    ring,\n    skill,\n    error,\n    id,\n    description,\n    metadata,\n    addkept,\n  } = roll;\n\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  const disabled = (panel) => {\n    if (currentStep === panel) {\n      return false;\n    }\n\n    if (panel === RESOLVE) {\n      return currentStep !== RESOLVE;\n    }\n\n    if (panel === KEEP) {\n      return ![KEEP, RESOLVE].includes(currentStep);\n    }\n\n    if (panel === REROLL) {\n      if (currentStep === DECLARE) {\n        return true;\n      }\n\n      return !modifiers.some(isReroll);\n    }\n\n    return false;\n  };\n\n  const PanelContent = ({ name }) => {\n    if (disabled(name)) {\n      return null;\n    }\n\n    if (name === RESOLVE) {\n      return (\n        <ResolveResult\n          dices={dices}\n          tn={tn}\n          button={\n            <NextButton onClick={() => dispatch(softReset())}>\n              New roll\n            </NextButton>\n          }\n          id={id}\n          description={description}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    if (name === KEEP) {\n      if (currentStep === KEEP) {\n        return (\n          <Keep\n            dices={dices}\n            onFinish={(toKeep, toAdd) => dispatch(keep(roll, toKeep, toAdd))}\n            tn={tn}\n            ring={ring}\n            skill={skill}\n            rerollTypes={rerollTypes}\n            addkept={addkept}\n            setAddKept={(data) => dispatch(setAddKept(data))}\n            modifiers={modifiers}\n          />\n        );\n      }\n      return (\n        <KeepResult\n          dices={dices}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    if (name === REROLL) {\n      if (currentStep === REROLL) {\n        return <Modifier roll={roll} dispatch={dispatch} />;\n      }\n\n      return (\n        <RerollResult\n          dices={dices}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <Layout>\n      <Collapse activeKey={activeKeys} onChange={setActiveKeys}>\n        <Panel\n          header=\"Declare\"\n          key=\"declare\"\n          collapsible={currentStep === DECLARE ? \"disabled\" : \"header\"}\n        >\n          {currentStep === DECLARE ? (\n            <Intent\n              onFinish={(data) => dispatch(create({ ...roll, ...data }, user))}\n              values={roll}\n            />\n          ) : (\n            <Summary {...intent} />\n          )}\n        </Panel>\n        <Panel\n          header=\"Modify\"\n          key=\"modify\"\n          collapsible={\n            disabled(REROLL) || currentStep === REROLL ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={REROLL} />\n        </Panel>\n        <Panel\n          header=\"Keep\"\n          key=\"keep\"\n          collapsible={\n            disabled(KEEP) || currentStep === KEEP ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={KEEP} />\n        </Panel>\n        <Panel\n          header=\"Resolve\"\n          key=\"resolve\"\n          collapsible={\n            disabled(RESOLVE) || currentStep === RESOLVE ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={RESOLVE} />\n        </Panel>\n      </Collapse>\n    </Layout>\n  );\n};\n\nexport default Roller;\n","import React, { useState, useEffect } from \"react\";\nimport { Layout, Menu } from \"antd\";\nimport logo from \"./logo.png\";\nimport styles from \"./Layout.module.css\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\n\nconst { Header, Content, Footer } = Layout;\n\nconst CustomLayout = ({ children }) => {\n  const user = useSelector(selectUser);\n  const location = useLocation();\n  const [selectedKey, setSelectedKey] = useState();\n\n  useEffect(() => {\n    const getMenuKey = ({ pathname, search }) => {\n      if (pathname === \"/\") {\n        return \"new_roll\";\n      }\n\n      if (pathname === \"/rolls\" && !search) {\n        return \"all_rolls\";\n      }\n\n      if (pathname === \"/rolls\" && !!user && search === `?player=${user.id}`) {\n        return \"my_rolls\";\n      }\n\n      return null;\n    };\n\n    setSelectedKey(getMenuKey(location));\n  }, [location, user]);\n\n  return (\n    <Layout className={styles.layout}>\n      <Header>\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          selectedKeys={[selectedKey]}\n          onSelect={({ key }) => setSelectedKey(key)}\n        >\n          <Menu.Item className={styles.logo} key=\"home\">\n            <Link to=\"/\">\n              <img alt=\"Logo\" src={logo} />\n            </Link>\n          </Menu.Item>\n          <Menu.Item key=\"new_roll\">\n            <Link to=\"/\">Roll</Link>\n          </Menu.Item>\n          <Menu.Item key=\"all_rolls\">\n            <Link to=\"/rolls\">All rolls</Link>\n          </Menu.Item>\n          {user && (\n            <Menu.Item key=\"my_rolls\">\n              <Link to={`/rolls?player=${user.id}`}>My rolls</Link>\n            </Menu.Item>\n          )}\n          <Menu.Item className={styles.login}>\n            {user ? (\n              <a href=\"/user/profile\">{user.name}</a>\n            ) : (\n              <a href=\"/login\">Login</a>\n            )}\n          </Menu.Item>\n        </Menu>\n      </Header>\n      <Content>{children}</Content>\n      <Footer className={styles.footer}>\n        {`Sakkaku Project / 2020 / `}\n        <a href=\"mailto:contact.sakkaku@gmail.com\">Issue? Suggestion?</a>\n      </Footer>\n    </Layout>\n  );\n};\n\nexport default CustomLayout;\n","import React from \"react\";\nimport opportunityImage from \"./images/opportunity.png\";\nimport strifeImage from \"./images/strife.png\";\nimport successImage from \"./images/success.png\";\nimport styles from \"./Result.module.css\";\n\nconst Result = ({ opportunity, success, strife }) => {\n  return (\n    <span className={styles.result}>\n      <img src={successImage} title=\"Success\" alt=\"Success\" />\n      <span>{`: ${success}, `}</span>\n      <img src={opportunityImage} title=\"Opportunity\" alt=\"Opportunity\" />\n      <span>{`: ${opportunity}, `}</span>\n      <img src={strifeImage} title=\"Strife\" alt=\"Strife\" />\n      <span>{`: ${strife}`}</span>\n    </span>\n  );\n};\n\nexport default Result;\n","import React from \"react\";\nimport { Spin } from \"antd\";\nimport styles from \"./Loader.module.css\";\n\nconst Loader = () => {\n  return (\n    <div className={styles.container}>\n      <Spin className={styles.loader} size=\"large\" />\n    </div>\n  );\n};\n\nexport default Loader;\n","import React, { useEffect, useState } from \"react\";\nimport { Table, Typography, Pagination } from \"antd\";\nimport { getOnServer } from \"../../server\";\nimport Result from \"./Result\";\nimport queryString from \"query-string\";\nimport styles from \"./List.module.css\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport Loader from \"../navigation/Loader\";\n\nconst { Text } = Typography;\n\nconst columns = [\n  {\n    title: \"Date\",\n    dataIndex: \"date\",\n    key: \"date\",\n    render: (date) => {\n      return (\n        <Text>\n          <span>{new Date(date).toLocaleDateString()}</span>\n          <span className={styles.time}>\n            {\" \"}\n            {new Date(date).toLocaleTimeString(undefined, {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              second: \"2-digit\",\n              timeZoneName: \"short\",\n            })}\n          </span>\n        </Text>\n      );\n    },\n  },\n  {\n    title: \"Campaign\",\n    dataIndex: \"campaign\",\n    key: \"campaign\",\n    render: (campaign) => {\n      return (\n        <Link to={`/rolls?${queryString.stringify({ campaign })}`}>\n          {campaign}\n        </Link>\n      );\n    },\n  },\n  {\n    title: \"Character\",\n    dataIndex: \"character\",\n    key: \"character\",\n    render: ({ character, campaign }) => {\n      return (\n        <Link to={`/rolls?${queryString.stringify({ campaign, character })}`}>\n          {character}\n        </Link>\n      );\n    },\n  },\n  {\n    title: \"Player\",\n    dataIndex: \"player\",\n    key: \"player\",\n    render: (player) => {\n      if (!player) {\n        return <Text delete>Deleted account</Text>;\n      }\n\n      return (\n        <Link to={`/rolls?${queryString.stringify({ player: player.id })}`}>\n          {player.name}\n        </Link>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"Description\",\n    dataIndex: \"description\",\n    key: \"description\",\n    responsive: [\"lg\"],\n  },\n  {\n    title: \"Result\",\n    dataIndex: \"result\",\n    key: \"result\",\n    width: 200,\n    render: (result) => {\n      return (\n        <>\n          {result ? (\n            <Result {...result} />\n          ) : (\n            <Text type=\"secondary\">Ongoing…</Text>\n          )}\n        </>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"Success?\",\n    dataIndex: \"success\",\n    key: \"success\",\n    align: \"center\",\n    render: ({ result, tn }) => {\n      if (!result) {\n        return <Text type=\"secondary\">{\"TBD\"}</Text>;\n      }\n\n      if (!tn) {\n        return <Text>{\"?\"}</Text>;\n      }\n\n      return result.success >= tn ? (\n        <Text type=\"success\">{\"Yes\"}</Text>\n      ) : (\n        <Text type=\"danger\">{\"No\"}</Text>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"\",\n    dataIndex: \"see_more\",\n    key: \"see_more\",\n    render: ({ id }) => {\n      return (\n        <Link\n          title=\"See more\"\n          to={`/rolls/${id}`}\n          className={styles[\"see-more\"]}\n        >\n          {\"➥\"}\n        </Link>\n      );\n    },\n  },\n];\n\nconst List = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState();\n  const location = useLocation();\n  const history = useHistory();\n\n  const query = queryString.parse(location.search);\n  const page = parseInt(query[\"page\"]) || 1;\n  const uri = `/public/ffg/l5r/rolls?${queryString.stringify({\n    ...query,\n    page,\n  })}`;\n\n  useEffect(() => {\n    setLoading(true);\n    getOnServer({\n      uri,\n      success: (data) => {\n        setData(data);\n        setLoading(false);\n      },\n      error: (_) => {\n        setError(true);\n        setLoading(false);\n      },\n    });\n  }, [uri]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  const dataSource = data.items.map(\n    ({\n      id,\n      created_at,\n      campaign,\n      character,\n      user,\n      description,\n      result,\n      roll,\n    }) => {\n      const tn = roll.parameters.tn;\n\n      return {\n        key: id,\n        date: created_at,\n        campaign,\n        character: { campaign, character },\n        player: user,\n        description,\n        result,\n        success: { result, tn },\n        see_more: { id },\n      };\n    }\n  );\n\n  const pageLink = (pageNumber) => {\n    return `/rolls?${queryString.stringify({\n      ...queryString.parse(window.location.search),\n      page: pageNumber,\n    })}`;\n  };\n\n  return (\n    <>\n      <Table columns={columns} dataSource={dataSource} pagination={false} />\n      <Pagination\n        className={styles.pagination}\n        simple\n        pageSize={data[\"per_page\"]}\n        current={page}\n        total={data[\"total\"]}\n        itemRender={(_, type, originalElement) => {\n          if (type === \"prev\") {\n            return <Link to={pageLink(page - 1)}>{\"<\"}</Link>;\n          }\n          if (type === \"next\") {\n            return <Link to={pageLink(page + 1)}>{\">\"}</Link>;\n          }\n          return originalElement;\n        }}\n        onChange={(pageNumber) => {\n          history.push(pageLink(pageNumber));\n        }}\n      />\n    </>\n  );\n};\n\nexport default List;\n","import React from \"react\";\nimport Reroll from \"./result/Reroll\";\nimport Keep from \"./result/Keep\";\nimport Resolve from \"./result/Resolve\";\nimport { Collapse } from \"antd\";\nimport Summary from \"./Summary\";\nimport { rolledDicesCount } from \"./utils\";\n\nconst { Panel } = Collapse;\n\nconst Complete = ({ dices, button, intent, context, player }) => {\n  const { tn } = intent;\n  const { id, description } = context;\n\n  const basePool = rolledDicesCount(intent);\n  const rerollTypes = context?.roll?.metadata?.rerolls || [];\n\n  return (\n    <Collapse defaultActiveKey={[\"declare\", \"resolve\"]}>\n      <Panel header=\"Declare\" key=\"declare\">\n        <Summary {...context} {...intent} player={player} />\n      </Panel>\n\n      <Panel header=\"Modify\" key=\"modify\" disabled={rerollTypes.length === 0}>\n        <Reroll dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n      </Panel>\n\n      <Panel header=\"Keep\" key=\"keep\">\n        <Keep dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n      </Panel>\n      <Panel header=\"Resolve\" key=\"resolve\" collapsible=\"disabled\">\n        <Resolve\n          dices={dices}\n          tn={tn}\n          button={button}\n          id={id}\n          description={description}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      </Panel>\n    </Collapse>\n  );\n};\n\nexport default Complete;\n","import React from \"react\";\nimport { Breadcrumb, Typography } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Breadcrumb.module.css\";\n\nconst { Text } = Typography;\n\nconst CustomBreadcrumb = ({ campaign, character, description }) => {\n  return (\n    <Breadcrumb className={styles.container}>\n      <Breadcrumb.Item>\n        <Link to={`/rolls`}>{\"All rolls\"}</Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item>\n        <Link to={`/rolls?campaign=${campaign}`}>{campaign}</Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item>\n        <Link to={`/rolls?campaign=${campaign}&character=${character}`}>\n          {character}\n        </Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item className={styles.description}>\n        <Text ellipsis>{description}</Text>\n      </Breadcrumb.Item>\n    </Breadcrumb>\n  );\n};\n\nexport default CustomBreadcrumb;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Button, Card } from \"antd\";\nimport { getOnServer } from \"../../server\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport Complete from \"./Complete\";\nimport Summary from \"./Summary\";\nimport DicesBox from \"./DicesBox\";\nimport Roller from \"./index\";\nimport Loader from \"../navigation/Loader\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\nimport Breadcrumb from \"./Breadcrumb\";\nimport { orderDices } from \"./utils\";\n\nconst GoBackButton = (props) => {\n  const history = useHistory();\n  return (\n    <Button\n      onClick={() => {\n        history.length > 2 ? history.goBack() : history.push(\"/rolls\");\n      }}\n      {...props}\n    >{`Go back`}</Button>\n  );\n};\n\nconst IdentifiedRoll = () => {\n  const { id } = useParams();\n  const user = useSelector(selectUser);\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    setLoading(true);\n    getOnServer({\n      uri: `/public/ffg/l5r/rolls/${id}`,\n      success: (data) => {\n        setData(data);\n        setLoading(false);\n      },\n      error: (_) => {\n        setLoading(false);\n        setError(true);\n      },\n    });\n  }, [id]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  const { roll, user: player, result } = data;\n  const { dices, parameters } = roll;\n  const { campaign, character, description } = data;\n\n  if (!result && user && player && user.id === player.id) {\n    return <Roller save={data} />;\n  }\n\n  return (\n    <>\n      <Breadcrumb\n        campaign={campaign}\n        character={character}\n        description={description}\n      />\n      {result ? (\n        <Complete\n          dices={dices}\n          button={<GoBackButton />}\n          intent={parameters}\n          context={data}\n          player={player}\n        />\n      ) : (\n        <>\n          <Card bordered={false}>\n            <Summary player={player} {...data} {...parameters} />\n          </Card>\n          <DicesBox\n            text={`Check in progress. Current dice pool:`}\n            dices={orderDices(\n              dices.filter(({ status }) => [\"pending\", \"kept\"].includes(status))\n            )}\n            footer={<GoBackButton style={{ float: \"right\" }} />}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default IdentifiedRoll;\n","import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport Roller from \"./features/roller\";\nimport Layout from \"./features/navigation/Layout\";\nimport { getOnServer } from \"./server\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport List from \"./features/browse/List\";\nimport IdentifiedRoll from \"./features/roller/IdentifiedRoll\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"./features/user/reducer\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    getOnServer({\n      uri: \"/user\",\n      success: (data) => {\n        dispatch(setUser(data));\n      },\n      error: (_) => {},\n    });\n  }, [dispatch]);\n\n  return (\n    <Router>\n      <Layout>\n        <Switch>\n          <Route path=\"/rolls/:id\">\n            <IdentifiedRoll />\n          </Route>\n          <Route path=\"/rolls\">\n            <List />\n          </Route>\n          <Route path=\"/\">\n            <Roller />\n          </Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rollerReducer from \"../features/roller/reducer\";\nimport userReducer from \"../features/user/reducer\";\n\nexport default configureStore({\n  reducer: {\n    roll: rollerReducer,\n    user: userReducer,\n  },\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./app/store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Reroll_layout__1ZSoQ\",\"container\":\"Reroll_container__22Gl5\",\"title\":\"Reroll_title__1pQuN\",\"arrow-right\":\"Reroll_arrow-right__30zxm\",\"arrow-down\":\"Reroll_arrow-down__2N_iE\",\"empty\":\"Reroll_empty__2DGjW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dices\":\"Dices_dices__1Cijf\",\"dice\":\"Dices_dice__cqowQ\",\"selectable\":\"Dices_selectable__2UH3q\",\"selected\":\"Dices_selected__1Gb1I\",\"unselectable\":\"Dices_unselectable__KQSGp\",\"theme-orange\":\"Dices_theme-orange__1IzWT\",\"theme-green\":\"Dices_theme-green__2UAjn\",\"theme-magenta\":\"Dices_theme-magenta__QRRBw\",\"theme-gray\":\"Dices_theme-gray__k0B1L\",\"theme-shiny\":\"Dices_theme-shiny__5M1Hc\",\"explosion\":\"Dices_explosion__3t8yW\"};"],"sourceRoot":""}