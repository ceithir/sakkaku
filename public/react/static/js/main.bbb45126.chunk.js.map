{"version":3,"sources":["server.js","features/navigation/logo.png","features/navigation/Layout.module.less","features/navigation/Menu.js","features/navigation/Layout.js","App.js","app/store.js","serviceWorker.js","index.js","features/navigation/Menu.module.css","features/user/reducer.js","features/roller/Steps.js","features/roller/utils.js","webpack:///./src/features/navigation/Layout.module.less?1a41","features/navigation/Loader.module.css","features/roller/reducer.js","features/heritage/reducer.js","features/navigation/Loader.js"],"names":["serverRoot","apiRoot","requestOnServer","a","uri","method","body","success","error","extraHeaders","defaultHeaders","Accept","fetch","headers","JSON","stringify","undefined","response","ok","Error","status","json","data","console","postOnServer","getOnServer","authentifiedRequestOnServer","decodeURIComponent","document","cookie","match","authentifiedPostOnServer","module","exports","___CSS_LOADER_API_IMPORT___","push","i","locals","SubMenu","Menu","CustomMenu","user","useSelector","selectUser","location","useLocation","useState","selectedKey","setSelectedKey","useEffect","pathname","search","id","substring","length","getMenuKey","theme","mode","selectedKeys","onSelect","key","className","styles","menu","Item","logo","to","alt","src","title","popupOffset","login","href","name","Header","Layout","Content","Footer","CustomLayout","children","layout","footer","Roller","lazy","List","IdentifiedRoll","HeritageRoll","HeritageRollLoader","HeritageListLoader","Calculator","App","dispatch","useDispatch","setUser","_","fallback","Loader","path","configureStore","reducer","roll","rollerReducer","userReducer","heritage","heritageReducer","Boolean","window","hostname","ReactDOM","render","StrictMode","store","getElementById","navigator","serviceWorker","ready","then","registration","unregister","slice","createSlice","initialState","campaigns","characters","reducers","state","action","payload","addCampaign","campaign","includes","addCharacter","character","actions","selectCampaigns","selectCharacters","DECLARE","REROLL","KEEP","RESOLVE","REROLL_TYPES","isReroll","modifier","isSpecialReroll","isSpecialAlteration","test","rolledDicesCount","ring","skill","modifiers","assistDiceCount","keptDicesCount","isAlteration","filter","map","parseInt","reduce","acc","val","countDices","keptDices","successCount","dice","value","explosion","opportunityCount","opportunity","strifeCount","strife","blankCount","orderDices","dices","reorder","sort","b","type","isRerollOfType","rerollType","metadata","end","isFromRerollOfType","source","replaceRerollsOfType","previousRerollTypes","basePool","rerollResults","ringResults","skillResults","previousTypesMinusOne","previousType","pop","previousDices","isRerollOfRightType","shift","replaceRerolls","rerollTypes","rerollCount","splitExplosions","split","remainingDices","size","currentDices","dieWeight","bestKeepableDice","pendingIndexes","forEach","some","index","die","weight","tA","tB","bestDiceToReroll","max","restrictFunc","compromised","content","options","transform","tn","loading","toKeep","channeled","addkept","channelInsteadOfKeeping","softReset","description","history","pushState","setParameters","setLoading","setError","setAnimatedStep","animatedStep","load","player","defaultToKeep","update","setToKeep","setAddKept","setModifiers","keepInsteadOfChanneling","setMode","create","request","reroll","positions","parameters","alter","alterations","keep","toAdd","authKeep","addModifiers","newModifiers","allModifiers","updateModifiers","removeModifiers","deletedModifiers","mod","channel","selectAll","selectLoading","selectStep","dicesRolled","atLeastOneUnresolvedDice","currentRerollModifiers","hasReroll","rerollDone","rerolls","selectIntent","selectHidden","selectToKeep","context","uuid","reset","setContext","setUuid","gm_email","e","position","selectError","selectRoll","selectContext","container","loader"],"mappings":"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","file":"static/js/main.bbb45126.chunk.js","sourcesContent":["export const serverRoot =\n  process.env.NODE_ENV === \"production\" ? \"\" : \"http://127.0.0.1:8000\";\n\nconst apiRoot = `${serverRoot}/api`;\n\nconst requestOnServer = async ({\n  uri,\n  method,\n  body,\n  success,\n  error,\n  extraHeaders = {},\n}) => {\n  const defaultHeaders = {\n    Accept: \"application/json\",\n  };\n  if (body) {\n    defaultHeaders[\"Content-Type\"] = \"application/json\";\n  }\n\n  try {\n    const response = await fetch(`${apiRoot}${uri}`, {\n      method,\n      headers: { ...defaultHeaders, ...extraHeaders },\n      body: body ? JSON.stringify(body) : undefined,\n    });\n    if (!response.ok) {\n      throw new Error(`Bad status: ${response.status}`);\n    }\n    const data = await response.json();\n    success(data);\n  } catch (e) {\n    error ? error(e) : console.error(e);\n  }\n};\n\nexport const postOnServer = async ({ uri, body, success, error }) => {\n  return requestOnServer({ uri, method: \"POST\", body, success, error });\n};\n\nexport const getOnServer = async ({ uri, success, error }) => {\n  return requestOnServer({ uri, method: \"GET\", success, error });\n};\n\n// Source: https://plainjs.com/javascript/utilities/set-cookie-get-cookie-and-delete-cookie-5/\nconst getXsrfToken = () =>\n  decodeURIComponent(\n    document.cookie.match(\"(^|;) ?XSRF-TOKEN=([^;]*)(;|$)\")[2]\n  );\n\nconst authentifiedRequestOnServer = async ({\n  uri,\n  method,\n  body,\n  success,\n  error,\n}) => {\n  return requestOnServer({\n    uri,\n    method,\n    body,\n    success,\n    error,\n    extraHeaders: {\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      \"X-XSRF-TOKEN\": getXsrfToken(),\n    },\n  });\n};\n\nexport const authentifiedPostOnServer = async ({\n  uri,\n  body,\n  success,\n  error,\n}) => {\n  return authentifiedRequestOnServer({\n    uri,\n    method: \"POST\",\n    body,\n    success,\n    error,\n  });\n};\n","module.exports = __webpack_public_path__ + \"static/media/logo.20098cc4.png\";","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".YuqDUKv5Y3VYUWvsXXqul {\\n  min-height: 100vh;\\n  background-color: #f5f5f5;\\n  /* Allow to strech direct children height with instructions like flex: 1 */\\n}\\n.YuqDUKv5Y3VYUWvsXXqul .ant-layout-content {\\n  display: flex;\\n  flex-direction: column;\\n}\\n._1DUVyuelVQQSRMQLUFWpdr {\\n  text-align: center;\\n}\\n@media (max-width: 576px) {\\n  .YuqDUKv5Y3VYUWvsXXqul > header {\\n    padding: 0;\\n  }\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"layout\": \"YuqDUKv5Y3VYUWvsXXqul\",\n\t\"footer\": \"_1DUVyuelVQQSRMQLUFWpdr\"\n};\nmodule.exports = exports;\n","import React, { useState, useEffect } from \"react\";\nimport { Menu } from \"antd\";\nimport logo from \"./logo.png\";\nimport styles from \"./Menu.module.css\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\n\nconst { SubMenu } = Menu;\n\nconst CustomMenu = () => {\n  const user = useSelector(selectUser);\n  const location = useLocation();\n  const [selectedKey, setSelectedKey] = useState();\n\n  useEffect(() => {\n    const getMenuKey = ({ pathname, search }) => {\n      if (pathname === \"/\") {\n        return \"new_roll\";\n      }\n\n      if (pathname === \"/rolls\" && !search) {\n        return \"all_rolls\";\n      }\n\n      if (pathname === \"/rolls\" && !!user && search === `?player=${user.id}`) {\n        return \"my_rolls\";\n      }\n\n      return pathname.substring(1, pathname.length);\n    };\n\n    setSelectedKey(getMenuKey(location));\n  }, [location, user]);\n\n  return (\n    <Menu\n      theme=\"dark\"\n      mode=\"horizontal\"\n      selectedKeys={[selectedKey]}\n      onSelect={({ key }) => setSelectedKey(key)}\n      className={styles.menu}\n    >\n      <Menu.Item className={styles.logo} key=\"home\">\n        <Link to=\"/\">\n          <img alt=\"Logo\" src={logo} />\n        </Link>\n      </Menu.Item>\n      <Menu.Item key=\"new_roll\">\n        <Link to=\"/\">Roll</Link>\n      </Menu.Item>\n      <Menu.Item key=\"all_rolls\" className={styles[\"sm-hide\"]}>\n        <Link to=\"/rolls\">All rolls</Link>\n      </Menu.Item>\n      {user && (\n        <Menu.Item key=\"my_rolls\" className={styles[\"sm-hide\"]}>\n          <Link to={`/rolls?player=${user.id}`}>My rolls</Link>\n        </Menu.Item>\n      )}\n      <Menu.Item key=\"heritage\" className={styles[\"sm-hide\"]}>\n        <Link to=\"/heritage\">Heritage</Link>\n      </Menu.Item>\n      <Menu.Item key=\"probabilities\" className={styles[\"sm-hide\"]}>\n        <Link to=\"/probabilities\">{`Probabilities`}</Link>\n      </Menu.Item>\n      <SubMenu\n        key=\"plus\"\n        title={`...`}\n        className={styles[\"sm-only\"]}\n        popupOffset={[0, 0]}\n      >\n        <Menu.Item key=\"all_rolls\">\n          <Link to=\"/rolls\">All rolls</Link>\n        </Menu.Item>\n        {user && (\n          <Menu.Item key=\"my_rolls\">\n            <Link to={`/rolls?player=${user.id}`}>My rolls</Link>\n          </Menu.Item>\n        )}\n        <Menu.Item key=\"heritage\">\n          <Link to=\"/heritage\">Heritage</Link>\n        </Menu.Item>\n        <Menu.Item key=\"probabilities\">\n          <Link to=\"/probabilities\">{`Probabilities`}</Link>\n        </Menu.Item>\n      </SubMenu>\n      <Menu.Item className={styles.login}>\n        {user ? (\n          <a href=\"/user/profile\">{user.name}</a>\n        ) : (\n          <a href=\"/login\">Login</a>\n        )}\n      </Menu.Item>\n    </Menu>\n  );\n};\n\nexport default CustomMenu;\n","import React from \"react\";\nimport { Layout } from \"antd\";\nimport styles from \"./Layout.module.less\";\nimport Menu from \"./Menu\";\n\nconst { Header, Content, Footer } = Layout;\n\nconst CustomLayout = ({ children }) => {\n  return (\n    <Layout className={styles.layout}>\n      <Header>\n        <Menu />\n      </Header>\n      <Content>{children}</Content>\n      <Footer className={styles.footer}>\n        {`A dice roller for the `}\n        <a href=\"https://www.fantasyflightgames.com/en/legend-of-the-five-rings-roleplaying-game/\">\n          {`Legend of the Five Rings Roleplaying Game (5th edition)`}\n        </a>\n        {` – ©FFG for all texts and assets`}\n        <br />\n        {`This website is not affiliated in any way with Fantasy Flight Games or Edge Studio.`}\n        <br />\n        {`For any issue or suggestion: `}\n        <a href=\"mailto:contact.sakkaku@gmail.com\">{`contact.sakkaku@gmail.com`}</a>\n      </Footer>\n    </Layout>\n  );\n};\n\nexport default CustomLayout;\n","import React, { useEffect, Suspense, lazy } from \"react\";\nimport \"./App.less\";\nimport Layout from \"./features/navigation/Layout\";\nimport { getOnServer } from \"./server\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"./features/user/reducer\";\nimport Loader from \"./features/navigation/Loader\";\n\nconst Roller = lazy(() => import(\"./features/roller\"));\nconst List = lazy(() => import(\"./features/browse/List\"));\nconst IdentifiedRoll = lazy(() => import(\"./features/roller/IdentifiedRoll\"));\nconst HeritageRoll = lazy(() => import(\"./features/heritage/Roll\"));\nconst HeritageRollLoader = lazy(() => import(\"./features/heritage/RollLoader\"));\nconst HeritageListLoader = lazy(() => import(\"./features/heritage/ListLoader\"));\nconst Calculator = lazy(() => import(\"./features/probabilities/Calculator\"));\n\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    getOnServer({\n      uri: \"/user\",\n      success: (data) => {\n        dispatch(setUser(data));\n      },\n      error: (_) => {},\n    });\n  }, [dispatch]);\n\n  return (\n    <Router>\n      <Layout>\n        <Suspense fallback={<Loader />}>\n          <Switch>\n            <Route path=\"/probabilities\">\n              <Calculator />\n            </Route>\n            <Route path=\"/heritage/list\">\n              <HeritageListLoader />\n            </Route>\n            <Route path=\"/heritage/:uuid\">\n              <HeritageRollLoader />\n            </Route>\n            <Route path=\"/heritage\">\n              <HeritageRoll />\n            </Route>\n            <Route path=\"/rolls/:id\">\n              <IdentifiedRoll />\n            </Route>\n            <Route path=\"/rolls\">\n              <List />\n            </Route>\n            <Route path=\"/\">\n              <Roller />\n            </Route>\n          </Switch>\n        </Suspense>\n      </Layout>\n    </Router>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rollerReducer from \"../features/roller/reducer\";\nimport userReducer from \"../features/user/reducer\";\nimport heritageReducer from \"../features/heritage/reducer\";\n\nexport default configureStore({\n  reducer: {\n    roll: rollerReducer,\n    user: userReducer,\n    heritage: heritageReducer,\n  },\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./app/store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Menu_logo__1R1uF\",\"login\":\"Menu_login__10fZv\",\"menu\":\"Menu_menu__2j8EX\",\"sm-hide\":\"Menu_sm-hide__3Bw2S\",\"sm-only\":\"Menu_sm-only__3LpXH\"};","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst slice = createSlice({\n  name: \"user\",\n  initialState: {\n    campaigns: [],\n    characters: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      const { id, name, campaigns, characters } = action.payload;\n      state.id = id;\n      state.name = name;\n      state.campaigns = campaigns;\n      state.characters = characters;\n    },\n    addCampaign: (state, action) => {\n      const campaign = action.payload;\n      if (!!campaign && !state.campaigns.includes(campaign)) {\n        state.campaigns.push(campaign);\n      }\n    },\n    addCharacter: (state, action) => {\n      const character = action.payload;\n      if (!!character && !state.characters.includes(character)) {\n        state.characters.push(character);\n      }\n    },\n  },\n});\n\nexport const { setUser, addCampaign, addCharacter } = slice.actions;\n\nexport const selectUser = (state) => (state.user.id ? state.user : undefined);\nexport const selectCampaigns = (state) => state.user.campaigns;\nexport const selectCharacters = (state) => state.user.characters;\n\nexport default slice.reducer;\n","export const DECLARE = \"declare\";\nexport const REROLL = \"reroll\";\nexport const KEEP = \"keep\";\nexport const RESOLVE = \"resolve\";\n","const REROLL_TYPES = [\n  \"adversity\",\n  \"distinction\",\n  \"shadow\",\n  \"deathdealer\",\n  \"manipulator\",\n  \"ishiken\",\n  \"2heavens\",\n  \"ruthless\",\n  \"sailor\",\n  \"wandering\",\n];\n\nexport const isReroll = (modifier) => {\n  if (isSpecialReroll(modifier) || isSpecialAlteration(modifier)) {\n    return true;\n  }\n\n  return REROLL_TYPES.includes(modifier);\n};\n\nexport const isSpecialReroll = (modifier) => {\n  return /^ruleless([0-9]{2})?$/.test(modifier);\n};\n\nexport const isSpecialAlteration = (modifier) => {\n  return /^reasonless([0-9]{2})?$/.test(modifier);\n};\n\nexport const rolledDicesCount = ({ ring, skill, modifiers = [] }) => {\n  return (\n    ring +\n    skill +\n    assistDiceCount(modifiers) +\n    (modifiers.includes(\"void\") ? 1 : 0) +\n    (modifiers.includes(\"wandering\") ? 1 : 0)\n  );\n};\n\nexport const keptDicesCount = ({ ring, modifiers = [] }) => {\n  return (\n    ring + (modifiers.includes(\"void\") ? 1 : 0) + assistDiceCount(modifiers)\n  );\n};\n\nexport const isAlteration = (modifier) => {\n  return (\n    [\"ishiken\", \"wandering\"].includes(modifier) || isSpecialAlteration(modifier)\n  );\n};\n\nconst assistDiceCount = (modifiers) => {\n  if (!modifiers?.length) {\n    return 0;\n  }\n\n  return modifiers\n    .filter((modifier) => /^(un)?skilledassist([0-9]{2})$/.test(modifier))\n    .map((modifier) => parseInt(modifier.slice(-2)))\n    .reduce((acc, val) => acc + val, 0);\n};\n\nexport const countDices = (keptDices) => {\n  return {\n    successCount: keptDices.reduce(\n      (acc, dice) =>\n        acc + (dice.value.explosion || 0) + (dice.value.success || 0),\n      0\n    ),\n    opportunityCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.opportunity || 0),\n      0\n    ),\n    strifeCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.strife || 0),\n      0\n    ),\n    blankCount: keptDices.filter(\n      ({ value: { strife, opportunity, success, explosion } }) =>\n        strife === 0 && opportunity === 0 && success === 0 && explosion === 0\n    ).length,\n  };\n};\n\nexport const orderDices = (dices) => {\n  const reorder = [...dices];\n\n  reorder.sort((a, b) => {\n    if (a.type === \"ring\" && b.type === \"skill\") {\n      return -1;\n    }\n    if (b.type === \"ring\" && a.type === \"skill\") {\n      return 1;\n    }\n    return 0;\n  });\n\n  return reorder;\n};\n\nexport const isRerollOfType = ({ status, metadata }, rerollType) => {\n  if (status !== \"rerolled\") {\n    return false;\n  }\n\n  // Legacy\n  if (!metadata.end) {\n    return metadata.modifier === rerollType;\n  }\n\n  return metadata.end === rerollType;\n};\n\nexport const isFromRerollOfType = ({ status, metadata }, rerollType) => {\n  // Legacy\n  if (!metadata.source && !metadata.end && metadata.modifier) {\n    return status !== \"rerolled\" && metadata.modifier === rerollType;\n  }\n\n  return metadata.source === rerollType;\n};\n\nexport const replaceRerollsOfType = ({\n  dices,\n  rerollType,\n  previousRerollTypes = [],\n  basePool,\n}) => {\n  const isRerollOfRightType = (dice) => isRerollOfType(dice, rerollType);\n\n  const previousDices = () => {\n    if (previousRerollTypes.length === 0) {\n      return dices.slice(0, basePool);\n    }\n\n    const previousTypesMinusOne = [...previousRerollTypes];\n    const previousType = previousTypesMinusOne.pop();\n\n    return replaceRerollsOfType({\n      dices,\n      rerollType: previousType,\n      previousRerollTypes: previousTypesMinusOne,\n      basePool,\n    });\n  };\n\n  const rerollResults = dices.filter((dice) =>\n    isFromRerollOfType(dice, rerollType)\n  );\n  const ringResults = rerollResults.filter(({ type }) => type === \"ring\");\n  const skillResults = rerollResults.filter(({ type }) => type === \"skill\");\n\n  return previousDices().map((dice) => {\n    if (isRerollOfRightType(dice)) {\n      return (dice.type === \"skill\" ? skillResults : ringResults).shift();\n    }\n    return dice;\n  });\n};\n\nexport const replaceRerolls = ({ dices, rerollTypes, basePool }) => {\n  const rerollCount = dices.filter(\n    ({ status }) => status === \"rerolled\"\n  ).length;\n  if (rerollCount === 0) {\n    return dices;\n  }\n\n  if (!basePool || !rerollTypes?.length) {\n    return orderDices(dices.filter(({ status }) => status !== \"rerolled\"));\n  }\n\n  const previousRerollTypes = [...rerollTypes];\n  const rerollType = previousRerollTypes.pop();\n\n  return [\n    ...replaceRerollsOfType({\n      dices,\n      rerollType,\n      previousRerollTypes,\n      basePool,\n    }),\n    ...dices.slice(basePool + rerollCount), // Explosions\n  ];\n};\n\nexport const splitExplosions = ({ dices, basePool, rerollTypes }) => {\n  let split = [];\n  let remainingDices = replaceRerolls({ dices, basePool, rerollTypes });\n  let size =\n    basePool +\n    dices.filter(({ metadata }) => metadata?.source === \"addkept\").length;\n  while (remainingDices.length > 0) {\n    const currentDices = orderDices(remainingDices.slice(0, size));\n    remainingDices = remainingDices.slice(size, remainingDices.length);\n    size = currentDices.filter(\n      ({ status, value: { explosion } }) => status === \"kept\" && explosion > 0\n    ).length;\n    split.push(currentDices);\n  }\n  return split;\n};\n\nconst dieWeight = ({\n  value: { success = 0, opportunity = 0, explosion = 0, strife = 0 },\n}) => {\n  return explosion * 10 + success * 5 + opportunity * 2 + strife * -1;\n};\n\nexport const bestKeepableDice = (roll) => {\n  const { dices, modifiers = [] } = roll;\n\n  let pendingIndexes = [];\n  dices.forEach(({ status, value: { strife = 0 } }, i) => {\n    if (\n      status === \"pending\" &&\n      (!modifiers.includes(\"compromised\") || strife === 0)\n    ) {\n      pendingIndexes.push(i);\n    }\n  });\n\n  if (dices.some(({ status }) => status === \"kept\")) {\n    return pendingIndexes;\n  }\n\n  return pendingIndexes\n    .map((index) => {\n      const die = dices[index];\n\n      return {\n        index,\n        weight: dieWeight(die),\n        type: die[\"type\"],\n      };\n    })\n    .sort(({ weight: a, type: tA }, { weight: b, type: tB }) => {\n      if (a === b) {\n        if (tA === tB) {\n          return 0;\n        }\n        return tA > tB ? -1 : 1;\n      }\n      return a > b ? -1 : 1;\n    })\n    .map(({ index }) => index)\n    .slice(0, keptDicesCount(roll));\n};\n\nexport const bestDiceToReroll = ({ roll, max, restrictFunc }) => {\n  const { dices, modifiers = [] } = roll;\n  const compromised = modifiers.includes(\"compromised\");\n\n  let pendingIndexes = [];\n  dices.forEach((die, i) => {\n    const { status } = die;\n    if (status === \"pending\" && (!restrictFunc || restrictFunc(die))) {\n      pendingIndexes.push(i);\n    }\n  });\n\n  return pendingIndexes\n    .map((index) => {\n      const die = dices[index];\n      const {\n        type,\n        value: { strife = 0 },\n      } = die;\n      const weight = compromised && strife > 0 ? -100 : dieWeight(die);\n\n      return {\n        index,\n        weight,\n        type,\n      };\n    })\n    .sort(({ weight: a, type: tA }, { weight: b, type: tB }) => {\n      if (a === b) {\n        if (tA === tB) {\n          return 0;\n        }\n        return tA > tB ? -1 : 1;\n      }\n      return a < b ? -1 : 1;\n    })\n    .map(({ index }) => index)\n    .slice(0, max);\n};\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-9-1!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-9-2!./Layout.module.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-9-1!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-9-2!./Layout.module.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-9-1!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-9-2!./Layout.module.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loader_container__3tlr0\",\"loader\":\"Loader_loader__Jgwkb\"};","import { createSlice } from \"@reduxjs/toolkit\";\nimport { postOnServer, authentifiedPostOnServer } from \"../../server\";\nimport { DECLARE, REROLL, KEEP, RESOLVE } from \"./Steps\";\nimport { isReroll, bestKeepableDice } from \"./utils\";\n\nconst initialState = {\n  tn: 3,\n  ring: 3,\n  skill: 1,\n  modifiers: [],\n  dices: [],\n  metadata: {},\n  loading: false,\n  error: false,\n  toKeep: [],\n  channeled: [],\n  addkept: [],\n  channelInsteadOfKeeping: false,\n  mode: \"semiauto\",\n};\n\nconst slice = createSlice({\n  name: \"roll\",\n  initialState,\n  reducers: {\n    softReset: (state) => {\n      state.tn = initialState.tn;\n      state.ring = initialState.ring;\n      state.skill = initialState.skill;\n      state.description = null;\n      state.dices = [];\n      state.metadata = {};\n      state.modifiers = [];\n      state.toKeep = [];\n      state.channeled = [];\n      state.addkept = [];\n      state.channelInsteadOfKeeping = false;\n\n      state.id = null;\n      window.history.pushState(null, null, \"/\");\n    },\n    setParameters: (state, action) => {\n      const {\n        campaign,\n        character,\n        description,\n        tn,\n        ring,\n        skill,\n        modifiers,\n        channeled,\n        addkept,\n      } = action.payload;\n      state.campaign = campaign;\n      state.character = character;\n      state.description = description;\n      state.tn = tn;\n      state.ring = ring;\n      state.skill = skill;\n      state.modifiers = modifiers;\n      state.channeled = channeled;\n      state.addkept = addkept;\n      if (ring === 0) {\n        state.channelInsteadOfKeeping = true;\n      }\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setAnimatedStep: (state, action) => {\n      state.animatedStep = action.payload;\n    },\n    load: (state, action) => {\n      const { id, player, dices, metadata } = action.payload;\n      state.id = id;\n      state.player = player;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      window.history.pushState(null, null, `/rolls/${id}`);\n      state.toKeep = defaultToKeep(state);\n    },\n    update: (state, action) => {\n      const { dices, metadata } = action.payload;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      state.toKeep = defaultToKeep(state);\n    },\n    setToKeep: (state, action) => {\n      state.toKeep = action.payload;\n    },\n    setAddKept: (state, action) => {\n      state.addkept = action.payload;\n    },\n    setModifiers: (state, action) => {\n      state.modifiers = action.payload;\n    },\n    channelInsteadOfKeeping: (state) => {\n      state.channelInsteadOfKeeping = true;\n    },\n    keepInsteadOfChanneling: (state) => {\n      state.channelInsteadOfKeeping = false;\n    },\n    setMode: (state, action) => {\n      state.mode = action.payload;\n    },\n  },\n});\n\nexport const {\n  setParameters,\n  setLoading,\n  softReset,\n  setAnimatedStep,\n  load,\n  setToKeep,\n  setAddKept,\n  channelInsteadOfKeeping,\n  keepInsteadOfChanneling,\n  setMode,\n} = slice.actions;\n\nconst { update, setError, setModifiers } = slice.actions;\n\nexport const create = (request, user) => (dispatch) => {\n  dispatch(setLoading(true));\n  dispatch(setParameters(request));\n\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const {\n    tn,\n    ring,\n    skill,\n    modifiers,\n    campaign,\n    character,\n    description,\n    channeled,\n    addkept,\n  } = request;\n\n  if (user) {\n    authentifiedPostOnServer({\n      uri: \"/ffg/l5r/rolls/create\",\n      body: {\n        tn,\n        ring,\n        skill,\n        modifiers,\n        campaign,\n        character,\n        description,\n        channeled,\n        addkept,\n      },\n      success: (data) => {\n        dispatch(load({ ...data, player: user }));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/create\",\n    body: {\n      tn,\n      ring,\n      skill,\n      modifiers,\n      channeled,\n      addkept,\n    },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const reroll = (roll, positions, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/reroll`,\n      body: {\n        positions,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/reroll\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      positions,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const alter = (roll, alterations, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/alter`,\n      body: {\n        alterations,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/alter\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      alterations,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const keep = (roll, positions, toAdd) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    const authKeep = () =>\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/keep`,\n        body: {\n          positions,\n        },\n        success,\n        error,\n      });\n\n    if (toAdd?.length) {\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/parameters`,\n        body: {\n          addkept: toAdd,\n        },\n        success: authKeep,\n        error,\n      });\n      return;\n    }\n\n    authKeep();\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata, addkept } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/keep\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers, addkept },\n        dices,\n        metadata,\n      },\n      positions,\n    },\n    success,\n    error,\n  });\n};\n\nexport const addModifiers = (roll, newModifiers) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const { id, modifiers } = roll;\n  const allModifiers = [...modifiers, ...newModifiers];\n\n  updateModifiers(id, allModifiers, dispatch);\n};\n\nexport const removeModifiers = (roll, deletedModifiers) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const { id, modifiers } = roll;\n  const allModifiers = modifiers.filter(\n    (mod) => !deletedModifiers.includes(mod)\n  );\n\n  updateModifiers(id, allModifiers, dispatch);\n};\n\nconst updateModifiers = (id, allModifiers, dispatch) => {\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/parameters`,\n      body: {\n        modifiers: allModifiers,\n      },\n      success: ({ parameters: { modifiers } }) => {\n        dispatch(setModifiers(modifiers));\n        dispatch(setLoading(false));\n      },\n      error: () => {\n        dispatch(setError(true));\n      },\n    });\n    return;\n  }\n\n  dispatch(setModifiers(allModifiers));\n  dispatch(setLoading(false));\n};\n\nexport const channel = (roll, positions) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/channel`,\n      body: {\n        positions,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/channel\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      positions,\n    },\n    success,\n    error,\n  });\n};\n\nexport const selectAll = (state) => state.roll;\nexport const selectLoading = (state) => state.roll.loading;\nexport const selectStep = (state) => {\n  const { dices, metadata, modifiers, animatedStep } = state.roll;\n\n  if (animatedStep) {\n    return animatedStep;\n  }\n\n  const dicesRolled = dices.length > 0;\n  const atLeastOneUnresolvedDice =\n    dicesRolled && dices.some((dice) => dice.status === \"pending\");\n\n  const currentRerollModifiers = modifiers.filter(isReroll);\n  const hasReroll = currentRerollModifiers.length > 0;\n  const rerollDone =\n    !hasReroll || metadata?.rerolls?.length === currentRerollModifiers.length;\n\n  if (dicesRolled && rerollDone && !atLeastOneUnresolvedDice) {\n    return RESOLVE;\n  }\n\n  if (dicesRolled && rerollDone) {\n    return KEEP;\n  }\n\n  if (dicesRolled && hasReroll) {\n    return REROLL;\n  }\n\n  return DECLARE;\n};\nexport const selectIntent = (state) => {\n  const {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  } = state.roll;\n\n  return {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  };\n};\nexport const selectHidden = (state) =>\n  state.roll.loading && !state.roll.animatedStep;\n\nexport const selectToKeep = (state) => state.roll.toKeep;\n\nconst defaultToKeep = (roll) => {\n  const { mode } = roll;\n\n  if (mode !== \"semiauto\") {\n    return [];\n  }\n\n  return bestKeepableDice(roll);\n};\n\nexport default slice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { postOnServer, authentifiedPostOnServer } from \"../../server\";\n\nconst slice = createSlice({\n  name: \"heritage\",\n  initialState: {\n    dices: [],\n    loading: false,\n    error: null,\n    metadata: {},\n    context: {},\n    uuid: null,\n  },\n  reducers: {\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    update: (state, action) => {\n      const { dices, metadata } = action.payload;\n      state.dices = dices;\n      state.metadata = metadata;\n      state.loading = false;\n    },\n    reset: (state) => {\n      state.dices = [];\n      state.metadata = {};\n      state.context = {};\n      state.uuid = null;\n      window.history.pushState(null, null, `/heritage`);\n    },\n    setContext: (state, action) => {\n      state.context = action.payload;\n    },\n    setUuid: (state, action) => {\n      const uuid = action.payload;\n      state.uuid = uuid;\n      window.history.pushState(null, null, `/heritage/${uuid}`);\n    },\n    load: (state, action) => {\n      const { uuid, dices, metadata, context } = action.payload;\n      state.uuid = uuid;\n      state.dices = dices;\n      state.metadata = metadata;\n      state.context = context;\n      window.history.pushState(null, null, `/heritage/${uuid}`);\n    },\n  },\n});\n\nexport const { setLoading, setError, reset, load } = slice.actions;\n\nconst { update, setContext, setUuid } = slice.actions;\n\nexport const create = ({ context, metadata, user, gm_email }) => (dispatch) => {\n  dispatch(setLoading(true));\n  dispatch(setContext({ ...context, user }));\n\n  const error = (e) => {\n    dispatch(setError(e));\n  };\n\n  if (user) {\n    const { campaign, character, description } = context;\n\n    authentifiedPostOnServer({\n      uri: \"/ffg/l5r/heritage-rolls/create\",\n      body: {\n        campaign,\n        character,\n        description,\n        metadata,\n        gm_email,\n      },\n      success: ({ uuid, roll }) => {\n        dispatch(setUuid(uuid));\n        dispatch(update(roll));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/heritage-rolls/create\",\n    body: { metadata },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const keep = ({ roll, position, user }) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const error = (e) => {\n    dispatch(setError(e));\n  };\n\n  if (user) {\n    const { uuid } = roll;\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/heritage-rolls/${uuid}/keep`,\n      body: {\n        position,\n      },\n      success: ({ roll }) => {\n        dispatch(update(roll));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/heritage-rolls/keep\",\n    body: { roll, position },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const selectLoading = (state) => state.heritage.loading;\nexport const selectError = (state) => state.heritage.error;\nexport const selectRoll = (state) => {\n  return {\n    uuid: state.heritage.uuid,\n    dices: state.heritage.dices,\n    metadata: state.heritage.metadata,\n  };\n};\nexport const selectContext = (state) => state.heritage.context;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { Spin } from \"antd\";\nimport styles from \"./Loader.module.css\";\n\nconst Loader = () => {\n  return (\n    <div className={styles.container}>\n      <Spin className={styles.loader} size=\"large\" />\n    </div>\n  );\n};\n\nexport default Loader;\n"],"sourceRoot":""}