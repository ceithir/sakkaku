{"version":3,"sources":["features/roller/Keep.module.css","features/navigation/Layout.module.css","features/roller/Intent.module.css","features/roller/NextButton.module.css","features/roller/DiceSideSelector.module.css","features/roller/Summary.module.css","features/roller/index.module.css","features/roller/result/Resolve.module.css","features/browse/List.module.css","features/navigation/Loader.module.css","features/roller/Breadcrumb.module.css","features/heritage/Roll.module.css","features/heritage/Layout.module.css","features/roller/Steps.module.css","features/roller/images/black.png","features/roller/images/blackot.png","features/roller/images/blackst.png","features/roller/images/blacket.png","features/roller/images/blacko.png","features/roller/images/blacks.png","features/roller/images/white.png","features/roller/images/whitee.png","features/roller/images/whiteet.png","features/roller/images/whiteo.png","features/roller/images/whites.png","features/roller/images/whiteso.png","features/roller/images/whitest.png","features/roller/form/DynamicDiceSelector.module.css","features/roller/Result.module.css","features/roller/button/LineContainer.module.css","features/roller/DicesBox.module.css","features/roller/reroll/Ishiken.module.css","features/roller/reroll/Alter.module.css","features/navigation/logo.png","features/browse/images/opportunity.png","features/browse/images/strife.png","features/browse/images/success.png","features/browse/Result.module.css","Pagination.module.css","features/heritage/Form.module.css","features/heritage/Summary.module.css","server.js","features/roller/Steps.js","features/roller/utils.js","features/roller/reducer.js","features/roller/NextButton.js","features/user/reducer.js","features/roller/Dice.js","features/roller/DiceSideSelector.js","features/roller/form/DynamicDiceSelector.js","features/roller/Intent.js","features/roller/Result.js","features/roller/Dices.js","features/roller/ExplosionDices.js","features/roller/Keep.js","features/roller/Summary.js","DefaultErrorMessage.js","features/roller/result/Reroll.js","features/roller/result/Keep.js","features/roller/button/BbCode.js","features/roller/button/DirectLink.js","features/roller/button/LineContainer.js","features/roller/result/Resolve.js","features/roller/AnonymousAlert.js","features/roller/DicesBox.js","features/roller/reroll/Distinction.js","features/roller/reroll/Adversity.js","features/roller/reroll/Ability.js","features/roller/reroll/Ishiken.js","features/roller/reroll/DragonWard.js","features/roller/reroll/Sailor.js","features/roller/reroll/Alter.js","features/roller/reroll/Confirm.js","features/roller/Modifier.js","features/roller/index.js","features/navigation/Layout.js","features/browse/Result.js","features/navigation/Loader.js","Pagination.js","features/browse/List.js","features/roller/Complete.js","features/roller/Breadcrumb.js","features/roller/IdentifiedRoll.js","features/heritage/reducer.js","features/heritage/tables.js","features/heritage/Form.js","features/heritage/Summary.js","features/heritage/Layout.js","features/heritage/Roll.js","features/heritage/StaticRoll.js","features/heritage/RollLoader.js","features/heritage/List.js","features/heritage/ListLoader.js","App.js","app/store.js","serviceWorker.js","index.js","features/roller/result/Reroll.module.css","features/roller/Dices.module.css"],"names":["module","exports","requestOnServer","a","uri","method","body","success","error","extraHeaders","defaultHeaders","Accept","fetch","headers","JSON","stringify","undefined","response","ok","Error","status","json","data","console","postOnServer","getOnServer","authentifiedRequestOnServer","decodeURIComponent","document","cookie","match","authentifiedPostOnServer","DECLARE","REROLL","KEEP","RESOLVE","Step","Steps","CustomSteps","current","className","indexOf","classNames","styles","steps","title","description","REROLL_TYPES","isReroll","modifier","isSpecialReroll","isSpecialAlteration","includes","test","rolledDicesCount","ring","skill","modifiers","keptDicesCount","isAlteration","countDices","keptDices","successCount","reduce","acc","dice","value","explosion","opportunityCount","opportunity","strifeCount","strife","blankCount","filter","length","orderDices","dices","reorder","sort","b","type","isRerollOfType","rerollType","metadata","end","isFromRerollOfType","source","replaceRerollsOfType","previousRerollTypes","basePool","rerollResults","ringResults","skillResults","slice","previousTypesMinusOne","previousType","pop","previousDices","map","isRerollOfRightType","shift","replaceRerolls","rerollTypes","rerollCount","initialState","tn","loading","toKeep","channeled","addkept","explicitGoToKeep","createSlice","name","reducers","softReset","state","id","window","history","pushState","setParameters","action","payload","campaign","character","setLoading","setError","setAnimatedStep","animatedStep","load","player","update","setToKeep","setAddKept","goToKeepStep","setModifiers","actions","reroll","roll","positions","dispatch","parameters","alter","alterations","addModifiers","newModifiers","allModifiers","selectAll","selectLoading","selectStep","dicesRolled","atLeastOneUnresolvedDice","some","currentRerollModifiers","hasReroll","rerollDone","rerolls","selectIntent","selectHidden","selectToKeep","NextButton","children","disabled","props","useSelector","layout","button","campaigns","characters","setUser","addCampaign","push","addCharacter","selectUser","user","selectCampaigns","selectCharacters","getImage","explosionStrifeSkill","explosionSkill","successOpportunitySkill","successStrifeSkill","successSkill","opportunitySkill","blankSkill","strifeExplosionRing","strifeSuccessRing","strifeOpportunityRing","successRing","opportunityRing","blankRing","getText","Boolean","join","Dice","src","alt","preview","toString","number","toObject","string","split","s","parseInt","FACETS","Loop","facets","key","Button","UncontrolledDiceSideSelector","initialValue","onChange","Group","target","group","defaultValue","DiceSideSelector","DynamicDiceSelector","fields","labelText","buttonText","errors","add","remove","values","buttonLayout","field","index","Item","required","label","noStyle","onClick","MinusCircleOutlined","icon","PlusOutlined","ErrorList","TextArea","Input","Panel","Collapse","labelCol","span","wrapperCol","tailLayout","defaultRules","message","arrayToAutoCompleteOptions","Intent","onFinish","onComplete","useDispatch","Form","useForm","form","useState","voided","setVoided","initialValues","techniques","misc","scrollToFirstError","onValuesChange","changedValues","Object","keys","validateFields","getFieldValue","rules","options","placeholder","min","max","ghost","header","valuePropName","showSearch","allowClear","optionFilterProp","mode","List","validator","_","Promise","reject","offset","htmlType","AnimatedIntent","completed","setCompleted","hidden","useEffect","scrollTo","top","behavior","Animate","transitionName","transitionEnter","transitionLeave","showProp","onEnd","visible","Text","Typography","Result","extra","count","color","shadowRerollDices","shadowCount","honorStaked","Math","ceil","honorLoss","grid","gutter","column","dataSource","renderItem","strong","Dices","theme","selectable","selected","toggle","unselectable","ExplosionDices","remainingDices","size","currentDices","splitExplosions","Fragment","Paragraph","AddKeptDiceForm","compromised","allValues","facet","Keep","keepingExplosions","trulyCompromised","every","showAddKept","baseDices","i","wrapDices","text","defaultText","figures","Summary","special","md","sm","xs","bordered","to","DefaultErrorMessage","banner","Title","TITLES","distinction","adversity","shadow","deathdealer","manipulator","ishiken","ruthless","sailor","EMPTY","SingleReroll","level","empty","indexOfType","container","Reroll","BbCode","shortResult","location","origin","onCopy","DirectLink","LineContainer","buttons","Resolve","Link","AnonymousAlert","showIcon","closable","href","DicesBox","footer","Distinction","toReroll","setToReroll","bypassMax","Adversity","successDices","Ability","blank","AVAILABLE_FACETS","Ishiken","setAlterations","position","onlyBlanks","onlyNonBlanks","originalDice","alterators","findIndex","DragonWard","Sailor","Alter","list","Confirm","addReroll","addAlteration","rerollButtonText","alterButtonText","Modifier","shouldShow","AbilityReroll","specialReroll","find","specialAlteration","padStart","WrappedModifier","Layout","currentStep","alert","Roller","save","intent","activeKeys","setActiveKeys","panel","PanelContent","toAdd","authKeep","keep","activeKey","collapsible","request","create","Header","Content","Footer","CustomLayout","useLocation","selectedKey","setSelectedKey","pathname","search","getMenuKey","selectedKeys","onSelect","logo","login","result","successImage","opportunityImage","strifeImage","Loader","loader","CustomPagination","pageSize","total","useHistory","pageLink","pageNumber","queryString","parse","page","pagination","simple","itemRender","originalElement","columns","dataIndex","render","date","Date","toLocaleDateString","time","toLocaleTimeString","hour","minute","second","timeZoneName","delete","responsive","width","align","setData","query","items","created_at","see_more","Pagination","Complete","context","defaultActiveKey","CustomBreadcrumb","ellipsis","GoBackButton","goBack","IdentifiedRoll","useParams","Breadcrumb","style","float","uuid","reset","setContext","setUuid","heritage","selectError","selectRoll","selectContext","TABLES","core","entries","effect","intro","outro","court","custom","entry","table","firstRoll","secondRoll","stringRoll","CustomForm","mandatoryIfLogged","e","Effect","rolls","Roll","StaticRoll","RollLoader","option","book","succinct","link","ListLoader","per_page","App","path","configureStore","reducer","rollerReducer","userReducer","heritageReducer","hostname","ReactDOM","StrictMode","store","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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M,kBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,qOACFG,SAAU,4BACVud,OAAQ,CACNC,MAAO,2DACPC,MAAO,iCACP5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,WAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,YAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,SAER,CACE1E,IAAK,EACLC,IAAK,GACLyE,KAAM,kBAKd,CACE1O,KAAM,YACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,sOACFG,SAAU,4BACVud,OAAQ,CACNC,MAAO,4DACPC,MAAO,iCACP5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,WAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,aAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,cAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,YAER,CACE1E,IAAK,GACLC,IAAK,GACLyE,KAAM,eAKd,CACE1O,KAAM,kBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,0PACFG,SAAU,4BACVud,OAAQ,CACNC,MAAO,4DACPC,MAAO,iCACP5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,WAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,wBAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,yBAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,0BAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,WAER,CACE1E,IAAK,GACLC,IAAK,GACLyE,KAAM,iBAKd,CACE1O,KAAM,uBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,wRACFG,SAAU,yDACVud,OAAQ,CACNC,MAAO,0DACPC,MAAO,iCACP5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,YAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,SAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,aAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,eAER,CACE1E,IAAK,EACLC,IAAK,GACLyE,KAAM,eAKd,CACE1O,KAAM,mBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,uIACFG,SAAU,4BACVud,OAAQ,CACNC,MACE,4FACFC,MACE,oLACF5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,QAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,cAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,UAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,cAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,aAER,CACE1E,IAAK,GACLC,IAAK,GACLyE,KAAM,4BAKd,CACE1O,KAAM,oBACNgK,IAAK,EACLC,IAAK,EACLnO,YAAa,wDACbG,SAAU,8BACVud,OACE,8KAEJ,CACExZ,KAAM,sBACNgK,IAAK,GACLC,IAAK,GACLnO,YACE,uRACFG,SAAU,4BACVud,OACE,uRAIRG,MAAO,CACL3Z,KAAM,6BACNuZ,QAAS,CACP,CACEvZ,KAAM,qBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,gNACFG,SAAU,4BACVud,OAAQ,CACNC,MACE,mGACFC,MAAO,KACP5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,4BAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,YAER,CACE1E,IAAK,EACLC,IAAK,GACLyE,KAAM,iBAKd,CACE1O,KAAM,wBACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,iRACFG,SAAU,4BACVud,OAAQ,CACNC,MACE,sFACFC,MACE,2HACF5P,QAAS,CACP,CACEE,IAAK,EACLC,IAAK,EACLyE,KAAM,YAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,6BAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,4DAER,CACE1E,IAAK,EACLC,IAAK,EACLyE,KAAM,6BAER,CACE1E,IAAK,GACLC,IAAK,GACLyE,KACE,wEAKV,CACE1O,KAAM,2BACNgK,IAAK,EACLC,IAAK,EACLnO,YACE,6RACFG,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","file":"static/js/main.1630af0b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Keep_layout__3iSnl\",\"figures\":\"Keep_figures__29jyx\",\"add-kept-form\":\"Keep_add-kept-form__3VbB8\",\"text\":\"Keep_text__136fi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__UFIxE\",\"logo\":\"Layout_logo__1Oa8g\",\"footer\":\"Layout_footer__1d2pN\",\"login\":\"Layout_login__2luPa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Intent_form__3Tlpw\",\"voided\":\"Intent_voided__1GBC5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"NextButton_layout__1V0iF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"group\":\"DiceSideSelector_group__2wbOR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dices\":\"Summary_dices__1WJbN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"roller_alert__a7FQm\",\"steps\":\"roller_steps__37v8v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Resolve_layout__6Gw1E\",\"container\":\"Resolve_container__3LORR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"see-more\":\"List_see-more__3H9Sv\",\"time\":\"List_time__3D77V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loader_container__3tlr0\",\"loader\":\"Loader_loader__Jgwkb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Breadcrumb_container__1pLMq\",\"description\":\"Breadcrumb_description__3x45S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Roll_footer__1xu18\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__3zsMY\",\"dice\":\"Layout_dice__3dlxn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"steps\":\"Steps_steps__xQjGe\"};","module.exports = __webpack_public_path__ + \"static/media/black.f14fed51.png\";","module.exports = __webpack_public_path__ + \"static/media/blackot.3a5ad7bb.png\";","module.exports = __webpack_public_path__ + \"static/media/blackst.3fad8195.png\";","module.exports = __webpack_public_path__ + \"static/media/blacket.f0ca3076.png\";","module.exports = __webpack_public_path__ + \"static/media/blacko.e44a1dd0.png\";","module.exports = __webpack_public_path__ + \"static/media/blacks.216d4546.png\";","module.exports = __webpack_public_path__ + \"static/media/white.c24c0c51.png\";","module.exports = __webpack_public_path__ + \"static/media/whitee.7755ca79.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteet.d10cd0cc.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteo.1e81fee0.png\";","module.exports = __webpack_public_path__ + \"static/media/whites.7cb9db03.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteso.f76a057b.png\";","module.exports = __webpack_public_path__ + \"static/media/whitest.05051e66.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pseudo-radio\":\"DynamicDiceSelector_pseudo-radio__3_xZn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Result_layout__1eJNj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"LineContainer_buttons__2C_Fm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"DicesBox_text__eNZEC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alterators\":\"Ishiken_alterators__37a44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"Alter_list__3b8nO\"};","module.exports = __webpack_public_path__ + \"static/media/logo.20098cc4.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkUzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRkQzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REUyNDExOEIzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REUyNDExOEEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkx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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MmE4YTQ0ZS1mZjAwLTQ1NjItYmIyMy02OTk2Njk5MTA2MTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTc1NUVDRkEzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTc1NUVDRjkzRjI5MTFFOEFBNjI5MDM0RDBDRjYxQjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphNDY0ZTAxMy1kYTg0LTRiNzUtOTg2NC0wYzQyOGYxYWE2MDgiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGI5YTBiMC04NGY3LTU0NDctYjkxMi0zNTM4YjhhODdmZmEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o8HzfAAAFIUlEQVR42uydi3GbQBCGF00aoAVSAikBl0BKICWQEuQSSAlWCagEqwSpBCjB4TLHDHYkwd7uPbjbf+ZmbI8t4f3YF7pH9vHxAaJwdBATCBCRABEgIkN9o75AlmU+rjufRqlHoYdSded3L9MYp3Gexk1/f+O6EO6iKKO+oCMguTb2PAri681gLhrUJRQg/16QMiyrmcabukzLY5hGpz3Oqf3+s2eAQEptnMEBiHvjXd8ISQNRIaidxtUThEdgKtdAfOSQWgOoFh6RB1z4vOoxxpZD6sA8AOstZSwhS3lDv1MQXxN/s3cgrcfkbGsc95hDcl2uVpbi+rKPGPX3twcNX74IN+Uif1F6GdW7/FTvvYccUlrIFVddCjcMTeEyp/XUvBJ6yGoYQ5Rxs4ZURQCjrrEKFUjDCKL1UArXhJupCQ1Iw5gwffYkOcFbulCAlAxh6mqxADBRZ/h/KJi5NyD6jqIm8C7QTr0hJPvcFxDqk9g28M+LTPPKYFqBUWDURBgN7EOmIdnIUyihagCmbncHMk32R1dAjsSGaq8ySfaFVSC6U6aEqhL2LSyU3jYQSiLvYP8yqSwrK0B0r0DxjgLiUGPLS7BA+sS9Y+kl2KKmZAXCkDsqiEvYXNJxA+mA9mgkNmHD97ClL8H0HSk0gVhhy/+GC0hLgNFDvMJWXB0ZCENX3kLcwjxCGoyA6PjYAs8MwiJmGgbVZ2kChOtj2C5y75jt1XDlERvl7aennSkA0XbbmkuePnC8t2CHI8So6Tkv8GD6ZaT6g3icv06Y0UOS8Iw7HrLVboNJDhEYSCDabu9b7IQNWRT9SixMfdVpyy9lWfYwbB2e5ACTvHGBtHVGNJQoICZ3+S1xGCrkXKgRghNI6t6BCluuQpaIaAfOpH4WFvaA3ASGnzzClUMkXDHZgyuHjMLAIpDJ7cTANLGHLOkrAgtZWCDiUUw6MFEWb8JVYmcTIJi7vhQzf1Lu20MKYbDZHhcB4l6laXg/PIlzIyI3VMJgMxBjD1E6MV1EMsqyLF+JGGcKEEzYqgXHqh1G/azLDMj0xydEtSVA1iPFesRhXk+YXC5BTrstOeb2YqYFvSUO5NkMxp5tfQjg5q4WCQN5ZqeKEwhmhnefIpCVSMK/xhBw6yCqBIF0QFxfiAWCmeF9TQnIine01tapI72kTQjIoxVmb1a31gD8+uwUuvdH3uFm8xlkxTWAn8nXuS5EWn29/Z3+YNA/74g5rwOf2zMBfjmwyxnxBZgvw+sNPLrihEHZDQi734mLpW2UlcKfjIl4z3vRonG+xZ++E4dAoOSwcV0Gs0e3YGF3UsqOcq1hWOAOX5wwtm6wdu+GbLzvSgpmG2BeGauvI9jb473cmDtIOYMbCGXfRWqfUlmEsfkRUIhbjV+Bvp24yZ7uLo7AqPYIpGW+K/OV2N0yvyfJS0IEUlg2Qg7uTmtDP20I9XQEX8ZyMVqXQLhWUJ1AxCJOIDK/NyAgSq9izrCAqM1XYlxr6HSpBfehYAXEt9/J92fhmPtQMO69TtSFx7Qt09l1brRxwL2aKvkjkvDlvnq0fLBkA/s9bvXqwn6+Touud9g81j6AuD4tev6suwT6aZu2Q9XPrUBCrrKwKjSgGsKZoTLqympMEchSS69ZnrfuGsYLINbF7Pk8dVMPasDOx7TUCQ5R5BCq5tA2D64GVD1l+G3SP8Ucskw0H81d6K+XR3XnT+74ueG76AQ+UiJMUEBE4XfqIgEiQEQCRICIPOivAAMA3yRcglkl3R0AAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"Result_result__pmIP7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__ztuKC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__3gH8o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Summary_container__2VaV7\"};","const serverRoot =\n  process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://127.0.0.1:8000/api\";\n\nconst requestOnServer = async ({\n  uri,\n  method,\n  body,\n  success,\n  error,\n  extraHeaders = {},\n}) => {\n  const defaultHeaders = {\n    Accept: \"application/json\",\n  };\n  if (body) {\n    defaultHeaders[\"Content-Type\"] = \"application/json\";\n  }\n\n  try {\n    const response = await fetch(`${serverRoot}${uri}`, {\n      method,\n      headers: { ...defaultHeaders, ...extraHeaders },\n      body: body ? JSON.stringify(body) : undefined,\n    });\n    if (!response.ok) {\n      throw new Error(`Bad status: ${response.status}`);\n    }\n    const data = await response.json();\n    success(data);\n  } catch (e) {\n    error ? error(e) : console.error(e);\n  }\n};\n\nexport const postOnServer = async ({ uri, body, success, error }) => {\n  return requestOnServer({ uri, method: \"POST\", body, success, error });\n};\n\nexport const getOnServer = async ({ uri, success, error }) => {\n  return requestOnServer({ uri, method: \"GET\", success, error });\n};\n\n// Source: https://plainjs.com/javascript/utilities/set-cookie-get-cookie-and-delete-cookie-5/\nconst getXsrfToken = () =>\n  decodeURIComponent(\n    document.cookie.match(\"(^|;) ?XSRF-TOKEN=([^;]*)(;|$)\")[2]\n  );\n\nconst authentifiedRequestOnServer = async ({\n  uri,\n  method,\n  body,\n  success,\n  error,\n}) => {\n  return requestOnServer({\n    uri,\n    method,\n    body,\n    success,\n    error,\n    extraHeaders: {\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      \"X-XSRF-TOKEN\": getXsrfToken(),\n    },\n  });\n};\n\nexport const authentifiedPostOnServer = async ({\n  uri,\n  body,\n  success,\n  error,\n}) => {\n  return authentifiedRequestOnServer({\n    uri,\n    method: \"POST\",\n    body,\n    success,\n    error,\n  });\n};\n","import React from \"react\";\nimport { Steps } from \"antd\";\nimport styles from \"./Steps.module.css\";\nimport classNames from \"classnames\";\n\nexport const DECLARE = \"declare\";\nexport const REROLL = \"reroll\";\nexport const KEEP = \"keep\";\nexport const RESOLVE = \"resolve\";\n\nconst { Step } = Steps;\n\nconst CustomSteps = ({ current, className }) => {\n  return (\n    <Steps\n      current={[DECLARE, REROLL, KEEP, RESOLVE].indexOf(current)}\n      className={classNames(styles.steps, { [className]: !!className })}\n    >\n      <Step title={\"Declare\"} description={\"Declare Intention\"} />\n      <Step title={\"Modify\"} description={\"Modify Rolled Dice\"} />\n      <Step title={\"Keep\"} description={\"Choose Kept Dice\"} />\n      <Step title={\"Resolve\"} description={\"Resolve Symbols\"} />\n    </Steps>\n  );\n};\n\nexport default CustomSteps;\n","const REROLL_TYPES = [\n  \"adversity\",\n  \"distinction\",\n  \"shadow\",\n  \"deathdealer\",\n  \"manipulator\",\n  \"ishiken\",\n  \"2heavens\",\n  \"ruthless\",\n  \"sailor\",\n];\n\nexport const isReroll = (modifier) => {\n  if (isSpecialReroll(modifier) || isSpecialAlteration(modifier)) {\n    return true;\n  }\n\n  return REROLL_TYPES.includes(modifier);\n};\n\nexport const isSpecialReroll = (modifier) => {\n  return /^ruleless([0-9]{2})?$/.test(modifier);\n};\n\nexport const isSpecialAlteration = (modifier) => {\n  return /^reasonless([0-9]{2})?$/.test(modifier);\n};\n\nexport const rolledDicesCount = ({ ring, skill, modifiers }) => {\n  return keptDicesCount({ ring, modifiers }) + skill;\n};\n\nexport const keptDicesCount = ({ ring, modifiers }) => {\n  return ring + (modifiers.includes(\"void\") ? 1 : 0);\n};\n\nexport const isAlteration = (modifier) => {\n  return [\"ishiken\"].includes(modifier) || isSpecialAlteration(modifier);\n};\n\nexport const countDices = (keptDices) => {\n  return {\n    successCount: keptDices.reduce(\n      (acc, dice) =>\n        acc + (dice.value.explosion || 0) + (dice.value.success || 0),\n      0\n    ),\n    opportunityCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.opportunity || 0),\n      0\n    ),\n    strifeCount: keptDices.reduce(\n      (acc, dice) => acc + (dice.value.strife || 0),\n      0\n    ),\n    blankCount: keptDices.filter(\n      ({ value: { strife, opportunity, success, explosion } }) =>\n        strife === 0 && opportunity === 0 && success === 0 && explosion === 0\n    ).length,\n  };\n};\n\nexport const orderDices = (dices) => {\n  const reorder = [...dices];\n\n  reorder.sort((a, b) => {\n    if (a.type === \"ring\" && b.type === \"skill\") {\n      return -1;\n    }\n    if (b.type === \"ring\" && a.type === \"skill\") {\n      return 1;\n    }\n    return 0;\n  });\n\n  return reorder;\n};\n\nexport const isRerollOfType = ({ status, metadata }, rerollType) => {\n  if (status !== \"rerolled\") {\n    return false;\n  }\n\n  // Legacy\n  if (!metadata.end) {\n    return metadata.modifier === rerollType;\n  }\n\n  return metadata.end === rerollType;\n};\n\nexport const isFromRerollOfType = ({ status, metadata }, rerollType) => {\n  // Legacy\n  if (!metadata.source && !metadata.end && metadata.modifier) {\n    return status !== \"rerolled\" && metadata.modifier === rerollType;\n  }\n\n  return metadata.source === rerollType;\n};\n\nexport const replaceRerollsOfType = ({\n  dices,\n  rerollType,\n  previousRerollTypes = [],\n  basePool,\n}) => {\n  const isRerollOfRightType = (dice) => isRerollOfType(dice, rerollType);\n\n  const previousDices = () => {\n    if (previousRerollTypes.length === 0) {\n      return dices.slice(0, basePool);\n    }\n\n    const previousTypesMinusOne = [...previousRerollTypes];\n    const previousType = previousTypesMinusOne.pop();\n\n    return replaceRerollsOfType({\n      dices,\n      rerollType: previousType,\n      previousRerollTypes: previousTypesMinusOne,\n      basePool,\n    });\n  };\n\n  const rerollResults = dices.filter((dice) =>\n    isFromRerollOfType(dice, rerollType)\n  );\n  const ringResults = rerollResults.filter(({ type }) => type === \"ring\");\n  const skillResults = rerollResults.filter(({ type }) => type === \"skill\");\n\n  return previousDices().map((dice) => {\n    if (isRerollOfRightType(dice)) {\n      return (dice.type === \"skill\" ? skillResults : ringResults).shift();\n    }\n    return dice;\n  });\n};\n\nexport const replaceRerolls = ({ dices, rerollTypes, basePool }) => {\n  const rerollCount = dices.filter(({ status }) => status === \"rerolled\")\n    .length;\n  if (rerollCount === 0) {\n    return dices;\n  }\n\n  const previousRerollTypes = [...rerollTypes];\n  const rerollType = previousRerollTypes.pop();\n\n  return [\n    ...replaceRerollsOfType({\n      dices,\n      rerollType,\n      previousRerollTypes,\n      basePool,\n    }),\n    ...dices.slice(basePool + rerollCount), // Explosions\n  ];\n};\n\nexport const splitExplosions = ({ dices, basePool, rerollTypes }) => {\n  let split = [];\n  let remainingDices = replaceRerolls({ dices, basePool, rerollTypes });\n  let size =\n    basePool +\n    dices.filter(({ metadata }) => metadata?.source === \"addkept\").length;\n  while (remainingDices.length > 0) {\n    const currentDices = orderDices(remainingDices.slice(0, size));\n    remainingDices = remainingDices.slice(size, remainingDices.length);\n    size = currentDices.filter(\n      ({ status, value: { explosion } }) => status === \"kept\" && explosion > 0\n    ).length;\n    split.push(currentDices);\n  }\n  return split;\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { postOnServer, authentifiedPostOnServer } from \"../../server\";\nimport { DECLARE, REROLL, KEEP, RESOLVE } from \"./Steps\";\nimport { isReroll } from \"./utils\";\n\nconst initialState = {\n  tn: 3,\n  ring: 3,\n  skill: 1,\n  modifiers: [],\n  dices: [],\n  metadata: {},\n  loading: false,\n  error: false,\n  toKeep: [],\n  channeled: [],\n  addkept: [],\n  explicitGoToKeep: false,\n};\n\nconst slice = createSlice({\n  name: \"roll\",\n  initialState,\n  reducers: {\n    softReset: (state) => {\n      state.tn = initialState.tn;\n      state.ring = initialState.ring;\n      state.skill = initialState.skill;\n      state.description = null;\n      state.dices = [];\n      state.metadata = {};\n      state.modifiers = [];\n      state.toKeep = [];\n      state.channeled = [];\n      state.addkept = [];\n      state.explicitGoToKeep = false;\n\n      state.id = null;\n      window.history.pushState(null, null, \"/\");\n    },\n    setParameters: (state, action) => {\n      const {\n        campaign,\n        character,\n        description,\n        tn,\n        ring,\n        skill,\n        modifiers,\n        channeled,\n        addkept,\n      } = action.payload;\n      state.campaign = campaign;\n      state.character = character;\n      state.description = description;\n      state.tn = tn;\n      state.ring = ring;\n      state.skill = skill;\n      state.modifiers = modifiers;\n      state.channeled = channeled;\n      state.addkept = addkept;\n    },\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    setAnimatedStep: (state, action) => {\n      state.animatedStep = action.payload;\n    },\n    load: (state, action) => {\n      const { id, player, dices, metadata } = action.payload;\n      state.id = id;\n      state.player = player;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      window.history.pushState(null, null, `/rolls/${id}`);\n      state.toKeep = [];\n    },\n    update: (state, action) => {\n      const { dices, metadata } = action.payload;\n      state.dices = dices;\n      state.metadata = metadata;\n\n      state.loading = false;\n      state.toKeep = [];\n    },\n    setToKeep: (state, action) => {\n      state.toKeep = action.payload;\n    },\n    setAddKept: (state, action) => {\n      state.addkept = action.payload;\n    },\n    goToKeepStep: (state) => {\n      state.explicitGoToKeep = true;\n    },\n    setModifiers: (state, action) => {\n      state.modifiers = action.payload;\n    },\n  },\n});\n\nexport const {\n  setParameters,\n  setLoading,\n  softReset,\n  setAnimatedStep,\n  load,\n  setToKeep,\n  setAddKept,\n  goToKeepStep,\n} = slice.actions;\n\nconst { update, setError, setModifiers } = slice.actions;\n\nexport const create = (request, user) => (dispatch) => {\n  dispatch(setLoading(true));\n  dispatch(setParameters(request));\n\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const {\n    tn,\n    ring,\n    skill,\n    modifiers,\n    campaign,\n    character,\n    description,\n    channeled,\n    addkept,\n  } = request;\n\n  if (user) {\n    authentifiedPostOnServer({\n      uri: \"/ffg/l5r/rolls/create\",\n      body: {\n        tn,\n        ring,\n        skill,\n        modifiers,\n        campaign,\n        character,\n        description,\n        channeled,\n        addkept,\n      },\n      success: (data) => {\n        dispatch(load({ ...data, player: user }));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/create\",\n    body: {\n      tn,\n      ring,\n      skill,\n      modifiers,\n      channeled,\n      addkept,\n    },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const reroll = (roll, positions, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/reroll`,\n      body: {\n        positions,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/reroll\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      positions,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const alter = (roll, alterations, modifier) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/alter`,\n      body: {\n        alterations,\n        modifier,\n      },\n      success,\n      error,\n    });\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/alter\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers },\n        dices,\n        metadata,\n      },\n      alterations,\n      modifier,\n    },\n    success,\n    error,\n  });\n};\n\nexport const keep = (roll, positions, toAdd) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const success = (data) => {\n    dispatch(update(data));\n  };\n  const error = () => {\n    dispatch(setError(true));\n  };\n\n  const { id } = roll;\n  if (id) {\n    const authKeep = () =>\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/keep`,\n        body: {\n          positions,\n        },\n        success,\n        error,\n      });\n\n    if (toAdd?.length) {\n      authentifiedPostOnServer({\n        uri: `/ffg/l5r/rolls/${id}/parameters`,\n        body: {\n          addkept: toAdd,\n        },\n        success: authKeep,\n        error,\n      });\n      return;\n    }\n\n    authKeep();\n    return;\n  }\n\n  const { tn, ring, skill, modifiers, dices, metadata, addkept } = roll;\n  postOnServer({\n    uri: \"/public/ffg/l5r/rolls/keep\",\n    body: {\n      roll: {\n        parameters: { tn, ring, skill, modifiers, addkept },\n        dices,\n        metadata,\n      },\n      positions,\n    },\n    success,\n    error,\n  });\n};\n\nexport const addModifiers = (roll, newModifiers) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const { id, modifiers } = roll;\n  const allModifiers = [...modifiers, ...newModifiers];\n\n  if (id) {\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/rolls/${id}/parameters`,\n      body: {\n        modifiers: allModifiers,\n      },\n      success: ({ parameters: { modifiers } }) => {\n        dispatch(setModifiers(modifiers));\n        dispatch(setLoading(false));\n      },\n      error: () => {\n        dispatch(setError(true));\n      },\n    });\n    return;\n  }\n\n  dispatch(setModifiers(allModifiers));\n  dispatch(setLoading(false));\n};\n\nexport const selectAll = (state) => state.roll;\nexport const selectLoading = (state) => state.roll.loading;\nexport const selectStep = (state) => {\n  const {\n    dices,\n    metadata,\n    modifiers,\n    animatedStep,\n    explicitGoToKeep,\n  } = state.roll;\n\n  if (animatedStep) {\n    return animatedStep;\n  }\n\n  const dicesRolled = dices.length > 0;\n  const atLeastOneUnresolvedDice =\n    dicesRolled && dices.some((dice) => dice.status === \"pending\");\n\n  const currentRerollModifiers = modifiers.filter(isReroll);\n  const hasReroll = currentRerollModifiers.length > 0;\n  const rerollDone =\n    !hasReroll || metadata?.rerolls?.length === currentRerollModifiers.length;\n\n  if (dicesRolled && rerollDone && !atLeastOneUnresolvedDice) {\n    return RESOLVE;\n  }\n\n  if (dicesRolled && rerollDone) {\n    if (!explicitGoToKeep) {\n      return REROLL;\n    }\n\n    return KEEP;\n  }\n\n  if (dicesRolled && hasReroll) {\n    return REROLL;\n  }\n\n  return DECLARE;\n};\nexport const selectIntent = (state) => {\n  const {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  } = state.roll;\n\n  return {\n    campaign,\n    character,\n    description,\n    tn,\n    ring,\n    skill,\n    modifiers,\n    player,\n    channeled,\n    addkept,\n  };\n};\nexport const selectHidden = (state) =>\n  state.roll.loading && !state.roll.animatedStep;\n\nexport const selectToKeep = (state) => state.roll.toKeep;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport styles from \"./NextButton.module.css\";\nimport { useSelector } from \"react-redux\";\nimport { selectLoading } from \"./reducer\";\n\nconst NextButton = ({ children, disabled, ...props }) => {\n  const loading = useSelector(selectLoading);\n\n  return (\n    <div className={styles.layout}>\n      <Button\n        type=\"primary\"\n        className={styles.button}\n        disabled={disabled || loading}\n        {...props}\n      >\n        {children}\n      </Button>\n    </div>\n  );\n};\n\nexport default NextButton;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst slice = createSlice({\n  name: \"user\",\n  initialState: {\n    campaigns: [],\n    characters: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      const { id, name, campaigns, characters } = action.payload;\n      state.id = id;\n      state.name = name;\n      state.campaigns = campaigns;\n      state.characters = characters;\n    },\n    addCampaign: (state, action) => {\n      const campaign = action.payload;\n      if (!!campaign && !state.campaigns.includes(campaign)) {\n        state.campaigns.push(campaign);\n      }\n    },\n    addCharacter: (state, action) => {\n      const character = action.payload;\n      if (!!character && !state.characters.includes(character)) {\n        state.characters.push(character);\n      }\n    },\n  },\n});\n\nexport const { setUser, addCampaign, addCharacter } = slice.actions;\n\nexport const selectUser = (state) => (state.user.id ? state.user : undefined);\nexport const selectCampaigns = (state) => state.user.campaigns;\nexport const selectCharacters = (state) => state.user.characters;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { Tooltip, Image } from \"antd\";\nimport blankRing from \"./images/black.png\";\nimport strifeOpportunityRing from \"./images/blackot.png\";\nimport strifeSuccessRing from \"./images/blackst.png\";\nimport strifeExplosionRing from \"./images/blacket.png\";\nimport opportunityRing from \"./images/blacko.png\";\nimport successRing from \"./images/blacks.png\";\nimport blankSkill from \"./images/white.png\";\nimport explosionSkill from \"./images/whitee.png\";\nimport explosionStrifeSkill from \"./images/whiteet.png\";\nimport opportunitySkill from \"./images/whiteo.png\";\nimport successSkill from \"./images/whites.png\";\nimport successOpportunitySkill from \"./images/whiteso.png\";\nimport successStrifeSkill from \"./images/whitest.png\";\n\nconst getImage = ({\n  type,\n  value: { opportunity, strife, success, explosion },\n}) => {\n  if (type === \"skill\") {\n    if (explosion) {\n      if (strife) {\n        return explosionStrifeSkill;\n      }\n      return explosionSkill;\n    }\n\n    if (success) {\n      if (opportunity) {\n        return successOpportunitySkill;\n      }\n      if (strife) {\n        return successStrifeSkill;\n      }\n      return successSkill;\n    }\n\n    if (opportunity) {\n      return opportunitySkill;\n    }\n\n    return blankSkill;\n  }\n\n  if (strife) {\n    if (explosion) {\n      return strifeExplosionRing;\n    }\n    if (success) {\n      return strifeSuccessRing;\n    }\n    return strifeOpportunityRing;\n  }\n\n  if (success) {\n    return successRing;\n  }\n  if (opportunity) {\n    return opportunityRing;\n  }\n\n  return blankRing;\n};\n\nconst getText = ({ value: { opportunity, strife, success, explosion } }) => {\n  return (\n    [\n      opportunity && `Opportunity: ${opportunity}`,\n      success && `Success: ${success}`,\n      explosion && `Explosion: ${explosion}`,\n      strife && `Strife: ${strife}`,\n    ]\n      .filter(Boolean)\n      .join(\"; \") || \"Blank\"\n  );\n};\n\nconst Dice = ({ dice }) => {\n  return (\n    <Tooltip title={getText(dice)}>\n      <div>\n        <Image src={getImage(dice)} alt={getText(dice)} preview={false} />\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default Dice;\n","import React from \"react\";\nimport { Radio } from \"antd\";\nimport Dice from \"./Dice\";\nimport styles from \"./DiceSideSelector.module.css\";\nconst SEPARATOR = \"-\";\n\nconst toString = ({\n  type,\n  value: { opportunity, strife, success, explosion },\n}) => {\n  return [\n    type,\n    ...[opportunity, strife, success, explosion].map((number) =>\n      (number || 0).toString()\n    ),\n  ].join(SEPARATOR);\n};\n\nconst toObject = (string) => {\n  const [type, ...value] = string.split(SEPARATOR);\n  const [opportunity, strife, success, explosion] = value.map((s) =>\n    parseInt(s)\n  );\n  return {\n    type,\n    value: {\n      opportunity,\n      strife,\n      success,\n      explosion,\n    },\n  };\n};\n\nexport const FACETS = [\n  { type: \"ring\", value: {} },\n  { type: \"ring\", value: { opportunity: 1, strife: 1 } },\n  { type: \"ring\", value: { opportunity: 1 } },\n  { type: \"ring\", value: { success: 1 } },\n  { type: \"ring\", value: { success: 1, strife: 1 } },\n  { type: \"ring\", value: { explosion: 1, strife: 1 } },\n  { type: \"skill\", value: {} },\n  { type: \"skill\", value: { opportunity: 1 } },\n  { type: \"skill\", value: { success: 1, strife: 1 } },\n  { type: \"skill\", value: { success: 1 } },\n  { type: \"skill\", value: { explosion: 1, strife: 1 } },\n  { type: \"skill\", value: { success: 1, opportunity: 1 } },\n  { type: \"skill\", value: { explosion: 1 } },\n];\n\nconst Loop = ({ facets, button }) => {\n  return (\n    <>\n      {facets.map(({ type, value, disabled }) => {\n        const key = toString({ type, value });\n        return (\n          <Radio.Button key={key} value={key} disabled={disabled}>\n            <Dice dice={{ type, value }} />\n          </Radio.Button>\n        );\n      })}\n      {button}\n    </>\n  );\n};\n\nconst DiceSideSelector = ({ value, onChange, facets = FACETS }) => {\n  return (\n    <Radio.Group\n      onChange={({ target: { value } }) => onChange(toObject(value))}\n      className={styles.group}\n      value={toString(value)}\n    >\n      <Loop facets={facets} />\n    </Radio.Group>\n  );\n};\n\nexport const UncontrolledDiceSideSelector = ({\n  initialValue,\n  onChange,\n  facets = FACETS,\n  button,\n}) => {\n  return (\n    <Radio.Group\n      onChange={({ target: { value } }) => onChange(toObject(value))}\n      className={styles.group}\n      defaultValue={toString(initialValue)}\n    >\n      <Loop facets={facets} button={button} />\n    </Radio.Group>\n  );\n};\n\nexport default DiceSideSelector;\n","import React from \"react\";\nimport { Form, Button } from \"antd\";\nimport { MinusCircleOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { UncontrolledDiceSideSelector } from \"../DiceSideSelector\";\nimport classNames from \"classnames\";\nimport styles from \"./DynamicDiceSelector.module.css\";\n\nconst DynamicDiceSelector = ({\n  fields,\n  labelText,\n  defaultValue,\n  buttonText,\n  errors,\n  add,\n  remove,\n  values = [],\n  facets,\n  buttonLayout,\n}) => {\n  return (\n    <>\n      {fields.map((field, index) => (\n        <Form.Item required={false} key={field.key} label={labelText}>\n          <Form.Item {...field} noStyle>\n            <UncontrolledDiceSideSelector\n              initialValue={values[index] || defaultValue}\n              button={\n                <div\n                  className={classNames(\n                    \"ant-radio-button-wrapper\",\n                    styles[\"pseudo-radio\"]\n                  )}\n                  onClick={() => remove(field.name)}\n                >\n                  <MinusCircleOutlined className={\"dynamic-delete-button\"} />\n                </div>\n              }\n              facets={facets}\n            />\n          </Form.Item>\n        </Form.Item>\n      ))}\n      <Form.Item {...buttonLayout}>\n        <Button\n          type=\"dashed\"\n          onClick={() => add(defaultValue)}\n          icon={<PlusOutlined />}\n        >\n          {buttonText}\n        </Button>\n        <Form.ErrorList errors={errors} />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default DynamicDiceSelector;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Radio,\n  Switch,\n  Divider,\n  AutoComplete,\n  Select,\n  Collapse,\n} from \"antd\";\nimport styles from \"./Intent.module.css\";\nimport NextButton from \"./NextButton\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectCampaigns,\n  selectCharacters,\n  addCampaign,\n  addCharacter,\n  selectUser,\n} from \"../user/reducer\";\nimport { setAnimatedStep, selectHidden } from \"../roller/reducer\";\nimport Animate from \"rc-animate\";\nimport { DECLARE } from \"./Steps\";\nimport DynamicDiceSelector from \"./form/DynamicDiceSelector\";\nimport classNames from \"classnames\";\n\nconst { TextArea } = Input;\nconst { Panel } = Collapse;\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst tailLayout = {\n  labelCol: { span: 0 },\n  wrapperCol: { span: 24 },\n};\n\nconst defaultRules = [{ required: true, message: \"Please fill this field\" }];\n\nconst arrayToAutoCompleteOptions = (values) => {\n  if (!values) {\n    return undefined;\n  }\n\n  return values.map((value) => {\n    return {\n      value,\n    };\n  });\n};\n\nconst AnimatedIntent = ({ onFinish, values }) => {\n  const [completed, setCompleted] = useState(false);\n  const dispatch = useDispatch();\n  const hidden = useSelector(selectHidden);\n\n  useEffect(() => {\n    if (completed) {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  }, [completed]);\n\n  const onComplete = () => {\n    setCompleted(true);\n    dispatch(setAnimatedStep(DECLARE));\n  };\n\n  if (hidden) {\n    return null;\n  }\n\n  return (\n    <Animate\n      transitionName=\"fade\"\n      transitionEnter={false}\n      transitionLeave={true}\n      showProp=\"visible\"\n      onEnd={() => dispatch(setAnimatedStep(null))}\n    >\n      <Intent\n        visible={!completed}\n        onComplete={onComplete}\n        onFinish={onFinish}\n        values={values}\n      />\n    </Animate>\n  );\n};\n\nconst Intent = ({ onFinish, values, onComplete }) => {\n  const campaigns = useSelector(selectCampaigns);\n  const characters = useSelector(selectCharacters);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const user = useSelector(selectUser);\n  const [voided, setVoided] = useState(false);\n\n  const wrappedOnFinish = (data) => {\n    onComplete && onComplete();\n\n    dispatch(addCampaign(data[\"campaign\"]));\n    dispatch(addCharacter(data[\"character\"]));\n\n    const techniques = data[\"techniques\"] || [];\n    const misc = data[\"misc\"] || [];\n\n    onFinish({\n      ...data,\n      modifiers: [\n        data[\"modifier\"],\n        data[\"compromised\"] && \"compromised\",\n        data[\"void\"] && \"void\",\n        data[\"school\"],\n        ...techniques,\n        ...misc,\n      ].filter(Boolean),\n    });\n  };\n\n  return (\n    <Form\n      className={`boxed ${styles.form}`}\n      {...layout}\n      initialValues={values}\n      onFinish={wrappedOnFinish}\n      scrollToFirstError\n      form={form}\n      onValuesChange={(changedValues) => {\n        if (\n          Object.keys(changedValues).some((name) =>\n            [\"ring\", \"skill\", \"void\", \"channeled\"].includes(name)\n          )\n        ) {\n          form.validateFields([\"channeled\"]);\n        }\n        if (\n          Object.keys(changedValues).some((name) => [\"void\"].includes(name))\n        ) {\n          setVoided(form.getFieldValue(\"void\"));\n        }\n      }}\n    >\n      {!!user && (\n        <>\n          <Form.Item label=\"Campaign\" name=\"campaign\" rules={defaultRules}>\n            <AutoComplete\n              options={arrayToAutoCompleteOptions(campaigns)}\n              placeholder={\"The Dead of Winter\"}\n            />\n          </Form.Item>\n          <Form.Item label=\"Character\" name=\"character\" rules={defaultRules}>\n            <AutoComplete\n              options={arrayToAutoCompleteOptions(characters)}\n              placeholder={\"Doji Sakura\"}\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"Description\"\n            name=\"description\"\n            rules={defaultRules}\n          >\n            <TextArea\n              placeholder={\"Running at the foe! Fire, Fitness, Keen Balance\"}\n            />\n          </Form.Item>\n        </>\n      )}\n      <Form.Item label=\"TN\" name=\"tn\">\n        <InputNumber min={1} />\n      </Form.Item>\n      <Divider />\n      <Form.Item\n        label=\"Ring\"\n        name=\"ring\"\n        rules={defaultRules}\n        className={classNames({ [styles.voided]: voided })}\n      >\n        <InputNumber min={1} max={10} />\n      </Form.Item>\n      <Form.Item label=\"Skill\" name=\"skill\" rules={defaultRules}>\n        <InputNumber min={0} max={10} />\n      </Form.Item>\n      <Divider />\n      <Collapse ghost>\n        <Panel header={\"Common modifiers\"}>\n          <Form.Item\n            label={\"Void for +1 Ring die?\"}\n            name=\"void\"\n            valuePropName=\"checked\"\n          >\n            <Switch />\n          </Form.Item>\n          <Form.Item label=\"(Dis)Advantage\" name=\"modifier\">\n            <Radio.Group>\n              <Radio.Button value=\"\">None</Radio.Button>\n              <Radio.Button value=\"distinction\">Distinction</Radio.Button>\n              <Radio.Button value=\"adversity\">Adversity</Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n          <Form.Item\n            label=\"Compromised?\"\n            name=\"compromised\"\n            valuePropName=\"checked\"\n          >\n            <Switch />\n          </Form.Item>\n        </Panel>\n      </Collapse>\n      <Divider />\n      <Collapse ghost>\n        <Panel header={\"Schools, techniques, magic…\"}>\n          <Form.Item label=\"School Ability\" name=\"school\">\n            <Select\n              showSearch\n              allowClear\n              options={[\n                {\n                  value: \"deathdealer\",\n                  label: \"Bayushi Deathdealer — Way of the Scorpion\",\n                },\n                {\n                  value: \"manipulator\",\n                  label: \"Bayushi Manipulator — Weakness Is My Strength\",\n                },\n                {\n                  value: \"shadow\",\n                  label: \"Ikoma Shadow — Victory before Honor\",\n                },\n                {\n                  value: \"ishiken\",\n                  label: \"Ishiken Initiate — Way of the Void\",\n                },\n                {\n                  value: \"sailor\",\n                  label: \"Storm Fleet Sailor — Sailor’s Fortune\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n          <Form.Item label=\"Techniques\" name=\"techniques\">\n            <Select\n              mode=\"multiple\"\n              placeholder=\"Relevant shūji, kata, etc.\"\n              options={[\n                {\n                  value: \"stirring\",\n                  label: \"Shūji — Stirring the Embers\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n          <Form.List\n            name=\"channeled\"\n            rules={[\n              {\n                validator: async (_, dices) => {\n                  if (!dices?.length) {\n                    return;\n                  }\n\n                  const ring = form.getFieldValue(\"ring\");\n                  const skill = form.getFieldValue(\"skill\");\n                  const voided = form.getFieldValue(\"void\");\n\n                  if (\n                    dices.filter(({ type }) => type === \"ring\").length >\n                    ring + (voided ? 1 : 0)\n                  ) {\n                    return Promise.reject(\n                      new Error(\n                        \"More channeled ring dice than rolled ring dice\"\n                      )\n                    );\n                  }\n\n                  if (\n                    dices.filter(({ type }) => type === \"skill\").length > skill\n                  ) {\n                    return Promise.reject(\n                      new Error(\n                        \"More channeled skill dice than rolled skill dice\"\n                      )\n                    );\n                  }\n                },\n              },\n            ]}\n          >\n            {(fields, { add, remove }, { errors }) => {\n              return (\n                <DynamicDiceSelector\n                  fields={fields}\n                  defaultValue={{ type: \"skill\", value: { success: 1 } }}\n                  errors={errors}\n                  labelText={\"Channeled Die\"}\n                  buttonText={\"Use Channeled Die\"}\n                  add={add}\n                  remove={remove}\n                  buttonLayout={{\n                    labelCol: { span: 0 },\n                    wrapperCol: { span: 16, offset: 8 },\n                  }}\n                />\n              );\n            }}\n          </Form.List>\n          <Form.Item label={\"Misc.\"} name=\"misc\">\n            <Select\n              mode=\"multiple\"\n              placeholder={\"Extra options for unusual cases\"}\n              options={[\n                {\n                  value: \"2heavens\",\n                  label: \"Attacking a warding Mirumoto Two-Heavens Adept\",\n                },\n              ]}\n              optionFilterProp=\"label\"\n            />\n          </Form.Item>\n        </Panel>\n      </Collapse>\n      <Divider />\n      <Form.Item {...tailLayout}>\n        <NextButton htmlType=\"submit\">Roll</NextButton>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default AnimatedIntent;\n","import React from \"react\";\nimport { Typography, List } from \"antd\";\nimport { countDices } from \"./utils\";\nimport styles from \"./Result.module.css\";\nimport classNames from \"classnames\";\n\nconst { Text } = Typography;\n\nconst Result = ({ dices, tn, extra, className, modifiers = [] }) => {\n  const keptDices = dices.filter(({ status }, index) => {\n    return status === \"kept\" || (extra && extra.includes(index));\n  });\n\n  const {\n    successCount,\n    opportunityCount,\n    strifeCount,\n    blankCount,\n  } = countDices(keptDices);\n\n  const data = [\n    {\n      type: \"Success\",\n      count: successCount,\n      color: tn ? (successCount >= tn ? \"success\" : \"warning\") : null,\n      extra: tn ? ` (required: ${tn})` : \" (unknown TN)\",\n    },\n    {\n      type: \"Opportunity\",\n      count: opportunityCount,\n    },\n    {\n      type: \"Strife\",\n      count: strifeCount,\n      color: strifeCount > 0 && \"danger\",\n    },\n  ];\n\n  if (modifiers.includes(\"ishiken\")) {\n    data.push({\n      type: \"Magnitude\",\n      count: blankCount,\n    });\n  }\n\n  if (\n    modifiers.includes(\"shadow\") &&\n    dices.some(({ metadata }) => metadata?.source === \"shadow\")\n  ) {\n    const shadowRerollDices = dices.filter(\n      ({ metadata }) => metadata?.source === \"shadow\"\n    );\n    const shadowCount = shadowRerollDices.length;\n    const honorStaked = Math.ceil(shadowCount / 2);\n    const honorLoss = Math.min(\n      honorStaked,\n      shadowRerollDices.filter(\n        ({ value: { success, explosion } }) => success === 0 && explosion === 0\n      ).length\n    );\n    data.push({\n      type: \"Honor Loss from Ability\",\n      count: honorLoss,\n      color: honorLoss > 0 && \"danger\",\n    });\n  }\n\n  return (\n    <List\n      className={classNames(styles.layout, { [className]: !!className })}\n      grid={{ gutter: 16, column: 3 }}\n      dataSource={data}\n      renderItem={({ type, count, color, extra }) => (\n        <List.Item>\n          <Text strong type={color}>{`${type}: ${count}`}</Text>\n          {extra && <Text>{extra}</Text>}\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default Result;\n","import React from \"react\";\nimport styles from \"./Dices.module.css\";\nimport classNames from \"classnames\";\nimport Dice from \"./Dice\";\n\nconst Dices = ({ dices, theme, className }) => {\n  if (!dices?.length) {\n    return null;\n  }\n  return (\n    <div className={classNames(styles.dices, { [className]: !!className })}>\n      {dices.map((dice, index) => {\n        const { selectable, selected, disabled, toggle, value } = dice;\n\n        return (\n          <div\n            key={index.toString()}\n            className={classNames(styles.dice, {\n              [styles.selectable]: selectable,\n              [styles.selected]: selected,\n              [styles.unselectable]: disabled,\n              [styles[`theme-${theme}`]]: !!theme,\n              [styles.explosion]: value?.explosion,\n            })}\n            onClick={selectable ? toggle : undefined}\n          >\n            <Dice dice={dice} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Dices;\n","import React from \"react\";\nimport Dices from \"./Dices\";\nimport { Divider } from \"antd\";\nimport { splitExplosions } from \"./utils\";\n\nconst ExplosionDices = ({ dices, basePool, className, rerollTypes }) => {\n  if (!basePool || basePool > dices.length) {\n    throw new Error(\"Better than infite loop\");\n  }\n\n  return (\n    <div className={className}>\n      {splitExplosions({ dices, basePool, rerollTypes }).map((dices, index) => {\n        return (\n          <React.Fragment key={index.toString()}>\n            {index > 0 && <Divider />}\n            <Dices dices={dices} theme=\"shiny\" />\n          </React.Fragment>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default ExplosionDices;\n","import React from \"react\";\nimport NextButton from \"./NextButton\";\nimport Result from \"./Result\";\nimport { Typography, Form } from \"antd\";\nimport ExplosionDices from \"./ExplosionDices\";\nimport styles from \"./Keep.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectToKeep, setToKeep } from \"./reducer\";\nimport DynamicDiceSelector from \"./form/DynamicDiceSelector\";\nimport { FACETS } from \"./DiceSideSelector\";\nimport { rolledDicesCount, keptDicesCount } from \"./utils\";\n\nconst { Paragraph } = Typography;\n\nconst AddKeptDiceForm = ({ dices, onChange, compromised }) => {\n  return (\n    <Form\n      onValuesChange={(_, allValues) => {\n        onChange(allValues[\"dices\"]);\n      }}\n      initialValues={{ dices }}\n      className={styles[\"add-kept-form\"]}\n    >\n      <Form.List name=\"dices\">\n        {(fields, { add, remove }, { errors }) => {\n          return (\n            <DynamicDiceSelector\n              fields={fields}\n              defaultValue={{ type: \"ring\", value: { opportunity: 1 } }}\n              errors={errors}\n              buttonText={\"Add Kept Die\"}\n              add={add}\n              remove={remove}\n              values={dices}\n              facets={\n                compromised\n                  ? FACETS.map((facet) => {\n                      if (facet.value.strife > 0) {\n                        return { ...facet, disabled: true };\n                      }\n                      return facet;\n                    })\n                  : FACETS\n              }\n            />\n          );\n        }}\n      </Form.List>\n    </Form>\n  );\n};\n\nconst Keep = ({\n  dices,\n  ring,\n  skill,\n  onFinish,\n  tn,\n  rerollTypes,\n  addkept,\n  setAddKept,\n  modifiers,\n}) => {\n  const toKeep = useSelector(selectToKeep);\n  const dispatch = useDispatch();\n\n  const compromised = modifiers.includes(\"compromised\");\n\n  const max = keptDicesCount({ ring, modifiers });\n  const basePool = rolledDicesCount({ ring, skill, modifiers });\n\n  const keepingExplosions = dices.some((dice) => dice.status === \"kept\");\n\n  const trulyCompromised =\n    compromised &&\n    dices\n      .filter((dice) => dice.status === \"pending\")\n      .every((dice) => dice.value.strife);\n\n  const showAddKept = addkept?.length && !keepingExplosions;\n\n  const toggle = (index) => {\n    if (toKeep.includes(index)) {\n      return dispatch(setToKeep(toKeep.filter((i) => i !== index)));\n    }\n    return dispatch(setToKeep([...toKeep, index]));\n  };\n\n  const text = () => {\n    if (trulyCompromised) {\n      return \"Being compromised, you cannot keep any die with strife… Which, in this very specific case, means you cannot keep any die at all.\";\n    }\n\n    if (keepingExplosions) {\n      return \"Select which explosions you wish to keep (if any).\";\n    }\n\n    let defaultText =\n      max > 1\n        ? `You can keep up to ${max} dice (min 1)`\n        : \"You must choose one die to keep\";\n\n    if (addkept?.length) {\n      defaultText += \" in top of your added dice\";\n    }\n\n    defaultText += \".\";\n\n    if (compromised) {\n      return `${defaultText} However, due to being compromised, you cannot keep any die with strife.`;\n    }\n\n    return defaultText;\n  };\n\n  const buttonText = () => {\n    if (trulyCompromised) {\n      return \"Continue\";\n    }\n\n    if (keepingExplosions) {\n      if (toKeep.length === 0) {\n        return \"Don't keep anything else\";\n      }\n\n      if (toKeep.length === 1) {\n        return \"Also keep that die\";\n      }\n\n      return \"Also keep these dice\";\n    }\n\n    if (toKeep.length === 1) {\n      return \"Keep that die\";\n    }\n\n    if (toKeep.length === 0) {\n      return \"Must select at least one die\";\n    }\n\n    return \"Keep these dice\";\n  };\n\n  const wrapDices = () => {\n    const baseDices = dices.map((dice, index) => {\n      const { status, value } = dice;\n      const selected = status === \"kept\" || toKeep.includes(index);\n      const available = status === \"pending\" && (!compromised || !value.strife);\n      const selectable =\n        available && (selected || keepingExplosions || max > toKeep.length);\n      const disabled = (() => {\n        if (status === \"kept\") {\n          return false;\n        }\n        if (status !== \"pending\") {\n          return true;\n        }\n        return !selectable;\n      })();\n      return {\n        ...dice,\n        selectable,\n        selected,\n        disabled,\n        toggle: () => toggle(index),\n      };\n    });\n\n    if (showAddKept) {\n      return [\n        ...baseDices,\n        ...addkept.map((dice) => {\n          return {\n            ...dice,\n            status: \"pending\",\n            metadata: { source: \"addkept\" },\n            selected: true,\n            selectable: false,\n          };\n        }),\n      ];\n    }\n\n    return baseDices;\n  };\n  const resultDices = () => {\n    if (showAddKept) {\n      return [\n        ...dices,\n        ...addkept.map((dice) => {\n          return {\n            ...dice,\n            status: \"kept\",\n          };\n        }),\n      ];\n    }\n\n    return dices;\n  };\n\n  return (\n    <div className={styles.layout}>\n      <ExplosionDices\n        dices={wrapDices()}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n      <Paragraph className={styles.text}>{text()}</Paragraph>\n      <Result\n        dices={resultDices()}\n        tn={tn}\n        extra={toKeep}\n        className={styles.figures}\n        modifiers={rerollTypes}\n      />\n      {!keepingExplosions && (\n        <AddKeptDiceForm\n          dices={addkept}\n          onChange={setAddKept}\n          compromised={compromised}\n        />\n      )}\n      <NextButton\n        onClick={() => {\n          if (!keepingExplosions && addkept?.length) {\n            onFinish(toKeep, addkept);\n            return;\n          }\n\n          onFinish(toKeep);\n        }}\n        disabled={\n          !(keepingExplosions || trulyCompromised) && toKeep.length === 0\n        }\n      >\n        {buttonText()}\n      </NextButton>\n    </div>\n  );\n};\n\nexport default Keep;\n","import React from \"react\";\nimport { Descriptions } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport Dice from \"./Dice\";\nimport styles from \"./Summary.module.css\";\nimport { orderDices, isSpecialReroll, isSpecialAlteration } from \"./utils\";\n\nconst Summary = ({\n  campaign,\n  character,\n  description,\n  tn,\n  ring,\n  skill,\n  modifiers,\n  player,\n  channeled,\n  addkept,\n}) => {\n  const special = [\n    modifiers.includes(\"compromised\") && \"Compromised\",\n    modifiers.includes(\"adversity\") && \"Adversity\",\n    modifiers.includes(\"distinction\") && \"Distinction\",\n    modifiers.includes(\"stirring\") && \"Shūji — Stirring the Embers\",\n    modifiers.includes(\"deathdealer\") && \"Bayushi Deathdealer School Ability\",\n    modifiers.includes(\"manipulator\") && \"Bayushi Manipulator School Ability\",\n    modifiers.includes(\"2heavens\") &&\n      \"Attacking a warding Mirumoto Two-Heavens Adept\",\n    modifiers.includes(\"ruthless\") &&\n      \"Custom reroll (from NPCs' or other PCs' effects)\",\n    modifiers.includes(\"shadow\") && \"Ikoma Shadow School Ability\",\n    modifiers.includes(\"sailor\") && \"Storm Fleet Sailor School Ability\",\n    modifiers.some(isSpecialReroll) && \"Custom reroll\",\n    modifiers.includes(\"ishiken\") && \"Ishiken Initiate School Ability\",\n    modifiers.some(isSpecialAlteration) && \"Custom alteration\",\n  ]\n    .filter(Boolean)\n    .join(\" / \");\n\n  return (\n    <Descriptions column={{ md: 3, sm: 1, xs: 1 }} bordered>\n      {player && (\n        <>\n          <Descriptions.Item label=\"Campaign\">\n            <Link to={`/rolls?campaign=${campaign}`}>{campaign}</Link>\n          </Descriptions.Item>\n          <Descriptions.Item label=\"Character\">\n            <Link to={`/rolls?campaign=${campaign}&character=${character}`}>\n              {character}\n            </Link>\n          </Descriptions.Item>\n          <Descriptions.Item label=\"Player\">\n            <Link to={`/rolls?player=${player.id}`}>{player.name}</Link>\n          </Descriptions.Item>\n        </>\n      )}\n\n      {description && (\n        <>\n          <Descriptions.Item label=\"Description\" span={2}>\n            {description}\n          </Descriptions.Item>\n          <Descriptions.Item label=\"TN\">{tn || \"?\"}</Descriptions.Item>\n        </>\n      )}\n\n      <Descriptions.Item label=\"Ring\">{ring}</Descriptions.Item>\n      <Descriptions.Item label=\"Skill\">{skill}</Descriptions.Item>\n      <Descriptions.Item label=\"Voided?\">\n        {modifiers.includes(\"void\") ? \"Yes\" : \"No\"}\n      </Descriptions.Item>\n\n      {channeled?.length && (\n        <Descriptions.Item label={\"Channeled Dice Used\"} span={3}>\n          <div className={styles.dices}>\n            {orderDices(channeled).map((dice, index) => {\n              return <Dice key={index.toString()} dice={dice} />;\n            })}\n          </div>\n        </Descriptions.Item>\n      )}\n      {addkept?.length && (\n        <Descriptions.Item label={\"Kept Dice Added\"} span={3}>\n          <div className={styles.dices}>\n            {orderDices(addkept).map((dice, index) => {\n              return <Dice key={index.toString()} dice={dice} />;\n            })}\n          </div>\n        </Descriptions.Item>\n      )}\n      {special && (\n        <Descriptions.Item label={\"Additional Modifiers\"} span={3}>\n          {special}\n        </Descriptions.Item>\n      )}\n    </Descriptions>\n  );\n};\n\nexport default Summary;\n","import React from \"react\";\nimport { Alert } from \"antd\";\n\nconst DefaultErrorMessage = () => {\n  return (\n    <Alert\n      message=\"Something bad happened. Try reloading the page. If things are still broken, please contact administrator through the link at the bottom of the page.\"\n      type=\"error\"\n      banner={true}\n    />\n  );\n};\n\nexport default DefaultErrorMessage;\n","import React from \"react\";\nimport Dices from \"../Dices\";\nimport styles from \"./Reroll.module.css\";\nimport { Typography } from \"antd\";\nimport {\n  replaceRerollsOfType,\n  isRerollOfType,\n  isFromRerollOfType,\n  isSpecialReroll,\n  isSpecialAlteration,\n} from \"../utils\";\n\nconst { Title, Paragraph } = Typography;\n\nconst TITLES = {\n  distinction: \"Distinction\",\n  adversity: \"Adversity\",\n  shadow: \"Ikoma Shadow School Ability\",\n  deathdealer: \"Bayushi Deathdealer School Ability\",\n  manipulator: \"Bayushi Manipulator School Ability\",\n  ishiken: \"Ishiken Initiate School Ability\",\n  \"2heavens\": \"Enemy Mirumoto Two-Heavens Adept School Ability\",\n  ruthless: \"Custom reroll (from NPCs' or other PCs' effects)\",\n  sailor: \"Storm Fleet Sailor School Ability\",\n};\n\nconst EMPTY = {\n  adversity: \"No die with a success or an explosion\",\n  \"2heavens\": \"No die with a success or an explosion\",\n};\n\nconst getTitle = (name) => {\n  if (isSpecialReroll(name)) {\n    return \"Custom reroll\";\n  }\n\n  if (isSpecialAlteration(name)) {\n    return \"Custom alteration\";\n  }\n\n  return TITLES[name];\n};\n\nconst SingleReroll = ({ dices, basePool, rerollType, rerollTypes }) => {\n  if (\n    (rerollType === \"deathdealer\" || rerollType === \"manipulator\") &&\n    rerollTypes.includes(\"distinction\")\n  ) {\n    return null;\n  }\n\n  const theme = \"reroll\";\n  const title = getTitle(rerollType);\n\n  if (!dices.some((dice) => isRerollOfType(dice, rerollType))) {\n    return (\n      <div className={styles.layout}>\n        <Title level={4} className={styles.title}>\n          {title}\n        </Title>\n        <Paragraph className={styles.empty}>\n          {EMPTY[rerollType] || `Ability not used`}\n        </Paragraph>\n      </div>\n    );\n  }\n\n  const indexOfType = rerollTypes.indexOf(rerollType);\n  const previousRerollTypes = rerollTypes.filter(\n    (_, index) => index < indexOfType\n  );\n\n  const leftDices = () => {\n    if (indexOfType <= 0) {\n      return dices.slice(0, basePool);\n    }\n    return replaceRerollsOfType({\n      dices,\n      rerollType: rerollTypes[indexOfType - 1],\n      previousRerollTypes,\n      basePool,\n    });\n  };\n\n  return (\n    <div className={styles.layout}>\n      <Title level={4} className={styles.title}>\n        {title}\n      </Title>\n      <div className={styles.container}>\n        <Dices\n          dices={leftDices().map((dice) => {\n            return {\n              ...dice,\n              selected: isRerollOfType(dice, rerollType),\n            };\n          })}\n          theme={theme}\n          className={styles.dices}\n        />\n        <div className={styles[\"arrow-right\"]}>{\"⇨\"}</div>\n        <div className={styles[\"arrow-down\"]}>{\"⇩\"}</div>\n        <Dices\n          dices={replaceRerollsOfType({\n            dices,\n            rerollType,\n            previousRerollTypes,\n            basePool,\n          }).map((dice) => {\n            if (isFromRerollOfType(dice, rerollType)) {\n              return { ...dice, selected: true };\n            }\n\n            return dice;\n          })}\n          theme={theme}\n          className={styles.dices}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Reroll = ({ dices, basePool, rerollTypes }) => {\n  if (rerollTypes.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      {rerollTypes.map((rerollType) => {\n        return (\n          <SingleReroll\n            key={rerollType}\n            dices={dices}\n            basePool={basePool}\n            rerollType={rerollType}\n            rerollTypes={rerollTypes}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default Reroll;\n","import React from \"react\";\nimport ExplosionDices from \"../ExplosionDices\";\n\nconst Keep = ({ dices, basePool, rerollTypes }) => {\n  return (\n    <ExplosionDices\n      className=\"boxed\"\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n      dices={dices.map((dice) => {\n        const selected = dice.status === \"kept\";\n        return {\n          ...dice,\n          disabled: !selected,\n          selected,\n        };\n      })}\n    />\n  );\n};\n\nexport default Keep;\n","import React from \"react\";\nimport { Button, message } from \"antd\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { countDices } from \"../utils\";\n\nconst BbCode = ({ id, description, tn, dices, modifiers = [] }) => {\n  const buttonText = `Copy as BBCode`;\n\n  if (!id) {\n    return <Button disabled>{buttonText}</Button>;\n  }\n\n  const keptDices = dices.filter(({ status }) => {\n    return status === \"kept\";\n  });\n\n  const {\n    successCount,\n    opportunityCount,\n    strifeCount,\n    blankCount,\n  } = countDices(keptDices);\n\n  let shortResult = `Success: [b]${successCount}[/b] / Opportunity: [b]${opportunityCount}[/b] / Strife: [b]${strifeCount}[/b]`;\n  if (modifiers.includes(\"ishiken\")) {\n    shortResult += ` / Magnitude: [b]${blankCount}[/b]`;\n  }\n\n  const text = `[url=\"${\n    window.location.origin\n  }/rolls/${id}\"]${description}[/url] | TN: ${tn || \"?\"} | ${shortResult}`;\n\n  return (\n    <CopyToClipboard\n      text={text}\n      onCopy={() => message.success(\"Copied to clipboard!\")}\n    >\n      <Button>{buttonText}</Button>\n    </CopyToClipboard>\n  );\n};\n\nexport default BbCode;\n","import React from \"react\";\nimport { Button, message } from \"antd\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nconst DirectLink = ({ id }) => {\n  const buttonText = `Copy link`;\n\n  if (!id) {\n    return <Button disabled>{buttonText}</Button>;\n  }\n\n  const text = `${window.location.origin}/rolls/${id}`;\n\n  return (\n    <CopyToClipboard\n      text={text}\n      onCopy={() => message.success(\"Copied to clipboard!\")}\n    >\n      <Button>{buttonText}</Button>\n    </CopyToClipboard>\n  );\n};\n\nexport default DirectLink;\n","import React from \"react\";\nimport styles from \"./LineContainer.module.css\";\n\nconst LineContainer = ({ children }) => {\n  return <div className={styles.buttons}>{children}</div>;\n};\n\nexport default LineContainer;\n","import React from \"react\";\nimport Result from \"../Result\";\nimport BbCode from \"../button/BbCode\";\nimport styles from \"./Resolve.module.css\";\nimport Dices from \"../Dices\";\nimport { replaceRerolls, orderDices } from \"../utils\";\nimport DirectLink from \"../button/DirectLink\";\nimport LineContainer from \"../button/LineContainer\";\n\nconst Resolve = ({\n  dices,\n  tn,\n  description,\n  id,\n  button,\n  basePool,\n  rerollTypes,\n}) => {\n  return (\n    <div className={styles.layout}>\n      <div className={styles.container}>\n        <Dices\n          dices={orderDices(\n            replaceRerolls({ dices, basePool, rerollTypes }).filter(\n              ({ status }) => status === \"kept\"\n            )\n          )}\n        />\n        <Result dices={dices} tn={tn} modifiers={rerollTypes} />\n        <LineContainer>\n          <DirectLink id={id} />\n          <BbCode\n            id={id}\n            dices={dices}\n            tn={tn}\n            description={description}\n            modifiers={rerollTypes}\n          />\n          {button}\n        </LineContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default Resolve;\n","import React from \"react\";\nimport { Alert, Typography, Affix } from \"antd\";\n\nconst { Link, Paragraph } = Typography;\n\nconst AnonymousAlert = ({ className }) => {\n  return (\n    <Affix>\n      <Alert\n        className={className}\n        showIcon\n        closable\n        message={\"Mono no aware\"}\n        description={\n          <>\n            <Paragraph>\n              You are not logged in. While you can totally use the roller as a\n              guest, please take note that{\" \"}\n              <strong>any roll made won't be persisted</strong>.\n            </Paragraph>\n            <Paragraph>\n              You will need to <Link href=\"/login\">log in</Link> first if you\n              wish to keep and share your results.\n            </Paragraph>\n          </>\n        }\n        type=\"warning\"\n      />\n    </Affix>\n  );\n};\n\nexport default AnonymousAlert;\n","import React from \"react\";\nimport Dices from \"./Dices\";\nimport { Typography, Card } from \"antd\";\nimport styles from \"./DicesBox.module.css\";\n\nconst { Paragraph } = Typography;\n\nconst DicesBox = ({ dices, text, footer, theme }) => {\n  return (\n    <Card bordered={false}>\n      <div className=\"boxed\">\n        {text && <Paragraph className={styles.text}>{text}</Paragraph>}\n        <Dices dices={dices} theme={theme} />\n        {footer && <div>{footer}</div>}\n      </div>\n    </Card>\n  );\n};\n\nexport default DicesBox;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\n\nconst Distinction = ({ dices, onFinish, modifiers }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const max = modifiers.includes(\"stirring\") ? 3 : 2;\n  const bypassMax =\n    modifiers.includes(\"deathdealer\") || modifiers.includes(\"manipulator\");\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n\n  const buttonText = () => {\n    if (toReroll.length === 0) {\n      return \"Don't reroll anything\";\n    }\n\n    if (toReroll.length === 1) {\n      return \"Reroll that die\";\n    }\n\n    return \"Reroll these dice\";\n  };\n\n  const text = () => {\n    if (bypassMax) {\n      return `Thanks to your Distinction and your School Ability, you can select up to ${max} plus your school rank dice to be rerolled.`;\n    }\n\n    return `Thanks to your Distinction, you can select up to ${max} dice to be rerolled.`;\n  };\n\n  return (\n    <DicesBox\n      text={text()}\n      dices={dices.map((dice, index) => {\n        const selected = toReroll.includes(index);\n        const selectable = selected || toReroll.length < max || bypassMax;\n        return {\n          ...dice,\n          selectable,\n          selected,\n          disabled: !selectable,\n          toggle: () => toggle(index),\n        };\n      })}\n      footer={\n        <NextButton onClick={() => onFinish(toReroll)}>\n          {buttonText()}\n        </NextButton>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default Distinction;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\n\nconst Adversity = ({ dices, onFinish }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const successDices = dices.filter(\n    ({ value }) => value.success || value.explosion\n  );\n  const max = 2;\n  const min = Math.min(max, successDices.length);\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n  const text = `Due to your Adversity, you must select two success dice (or as much as possible if you don't have two) that will be rerolled.`;\n\n  return (\n    <DicesBox\n      text={text}\n      dices={dices.map((dice, index) => {\n        const selected = toReroll.includes(index);\n        const isSuccess = dice.value.success || dice.value.explosion;\n        const selectable = isSuccess && (selected || toReroll.length < max);\n        return {\n          ...dice,\n          selectable,\n          selected,\n          disabled: !selectable,\n          toggle: () => toggle(index),\n        };\n      })}\n      footer={\n        <NextButton\n          disabled={toReroll.length < min}\n          onClick={() => onFinish(toReroll)}\n        >\n          {\"Continue\"}\n        </NextButton>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default Adversity;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\n\nconst Ability = ({ dices, onFinish, text, basePool, rerollTypes }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n\n  const buttonText = () => {\n    if (toReroll.length === 0) {\n      return \"Skip\";\n    }\n\n    if (toReroll.length === 1) {\n      return \"Reroll that die\";\n    }\n\n    return \"Reroll these dice\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = toReroll.includes(index);\n          return {\n            ...dice,\n            selectable: true,\n            selected,\n            disabled: false,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <NextButton onClick={() => onFinish(toReroll)}>\n          {buttonText()}\n        </NextButton>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default Ability;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\nimport { Typography } from \"antd\";\nimport styles from \"./Ishiken.module.css\";\nimport DiceSideSelector from \"../DiceSideSelector\";\n\nconst { Text, Paragraph } = Typography;\n\nconst blank = ({ value: { opportunity, strife, success, explosion } }) =>\n  opportunity === 0 && strife === 0 && success === 0 && explosion === 0;\n\nconst AVAILABLE_FACETS = {\n  ring: [\n    { opportunity: 1, strife: 1 },\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n  ],\n  skill: [\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n    { success: 1, opportunity: 1 },\n    { explosion: 1 },\n  ],\n};\n\nconst Ishiken = ({ dices, onFinish, basePool, rerollTypes }) => {\n  const [alterations, setAlterations] = useState([]);\n  const positions = alterations.map(({ position }) => position);\n\n  const toggle = (index) => {\n    if (alterations.some(({ position }) => position === index)) {\n      return setAlterations(\n        alterations.filter(({ position }) => position !== index)\n      );\n    }\n\n    const originalDice = dices[index];\n    return setAlterations([\n      ...alterations,\n      { position: index, value: blank(originalDice) ? { success: 1 } : {} },\n    ]);\n  };\n\n  const onlyBlanks =\n    alterations.length > 0 &&\n    dices.filter((_, index) => positions.includes(index)).some(blank);\n  const onlyNonBlanks = alterations.length > 0 && !onlyBlanks;\n\n  const text = (\n    <Paragraph>\n      {`Your School Ability allows you to receive a number of fatigue up to your school rank to either:`}\n      <ul>\n        <li>\n          <Text>{`Choose a number of dice with non-blank results equal to the fatigue you received , and alter each to a blank result.`}</Text>\n        </li>\n        <li>\n          <Text>{`Choose a number of dice with blank results equal to the fatigue you received, and alter each to a non-blank result of your choice.`}</Text>\n        </li>\n      </ul>\n    </Paragraph>\n  );\n\n  const buttonText = () => {\n    if (onlyNonBlanks) {\n      return \"Pull\";\n    }\n\n    if (onlyBlanks) {\n      return \"Push\";\n    }\n\n    return \"Skip\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = positions.includes(index);\n          const selectable =\n            (!onlyBlanks && !onlyNonBlanks) ||\n            (onlyBlanks && blank(dice)) ||\n            (onlyNonBlanks && !blank(dice));\n          return {\n            ...dice,\n            selectable,\n            selected,\n            disabled: !selectable,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <>\n          {onlyBlanks && (\n            <div className={styles.alterators}>\n              <Text>{`Choose your desired non-blank result${\n                alterations.length > 1 ? \"s\" : \"\"\n              }`}</Text>\n              {alterations.map(({ position, value }) => {\n                const type = dices[position][\"type\"];\n\n                return (\n                  <DiceSideSelector\n                    key={position.toString()}\n                    value={{ type, value }}\n                    onChange={({ value }) => {\n                      const alt = [...alterations];\n                      const index = alt.findIndex(\n                        ({ position: pos }) => pos === position\n                      );\n                      alt[index][\"value\"] = value;\n                      setAlterations(alt);\n                    }}\n                    facets={AVAILABLE_FACETS[type].map((value) => {\n                      return { type, value };\n                    })}\n                  />\n                );\n              })}\n            </div>\n          )}\n          <NextButton onClick={() => onFinish(alterations)}>\n            {buttonText()}\n          </NextButton>\n        </>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default Ishiken;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\n\nconst DragonWard = ({ dices, onFinish, basePool, rerollTypes }) => {\n  const [toReroll, setToReroll] = useState([]);\n  const min = Math.min(\n    1,\n    dices.filter(\n      ({ value: { success, explosion } }) => success > 0 || explosion > 0\n    ).length\n  );\n  const toggle = (index) => {\n    if (toReroll.includes(index)) {\n      return setToReroll(toReroll.filter((i) => i !== index));\n    }\n    return setToReroll([...toReroll, index]);\n  };\n  const text = `You must reroll dice containing success up to the attacked Mirumoto's school rank.`;\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = toReroll.includes(index);\n          const selectable = dice.value.success > 0 || dice.value.explosion > 0;\n          return {\n            ...dice,\n            selectable,\n            selected,\n            disabled: !selectable,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <NextButton\n          disabled={toReroll.length < min}\n          onClick={() => onFinish(toReroll)}\n        >\n          {\"Continue\"}\n        </NextButton>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default DragonWard;\n","import React from \"react\";\nimport NextButton from \"../NextButton\";\nimport Ability from \"./Ability\";\nimport { Typography, Card } from \"antd\";\n\nconst { Paragraph } = Typography;\n\nconst Sailor = ({ dices, onFinish, basePool, rerollTypes, compromised }) => {\n  if (compromised) {\n    return (\n      <Card bordered={false}>\n        <div className=\"boxed\">\n          <Paragraph>\n            {\"You may not use your School Ability as you are compromised.\"}\n          </Paragraph>\n          <NextButton onClick={() => onFinish([])}>{\"Continue\"}</NextButton>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <Ability\n      text={\n        \"You may receive a number of strife up to your school rank to reroll that many rolled dice.\"\n      }\n      dices={dices}\n      onFinish={onFinish}\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n    />\n  );\n};\n\nexport default Sailor;\n","import React, { useState } from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls } from \"../utils\";\nimport DiceSideSelector from \"../DiceSideSelector\";\nimport styles from \"./Alter.module.css\";\n\nconst AVAILABLE_FACETS = {\n  ring: [\n    {},\n    { opportunity: 1, strife: 1 },\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n  ],\n  skill: [\n    {},\n    { opportunity: 1 },\n    { success: 1, strife: 1 },\n    { success: 1 },\n    { explosion: 1, strife: 1 },\n    { success: 1, opportunity: 1 },\n    { explosion: 1 },\n  ],\n};\n\nconst Alter = ({ text, dices, onFinish, basePool, rerollTypes }) => {\n  const [alterations, setAlterations] = useState([]);\n  const positions = alterations.map(({ position }) => position);\n\n  const toggle = (index) => {\n    if (alterations.some(({ position }) => position === index)) {\n      return setAlterations(\n        alterations.filter(({ position }) => position !== index)\n      );\n    }\n\n    return setAlterations([\n      ...alterations,\n      { position: index, value: { success: 1 } },\n    ]);\n  };\n\n  const buttonText = () => {\n    return \"Continue\";\n  };\n\n  return (\n    <DicesBox\n      text={text}\n      dices={replaceRerolls({\n        dices: dices.map((dice, index) => {\n          const selected = positions.includes(index);\n          return {\n            ...dice,\n            selectable: true,\n            selected,\n            disabled: false,\n            toggle: () => toggle(index),\n          };\n        }),\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <>\n          <div className={styles.list}>\n            {alterations.map(({ position, value }) => {\n              const type = dices[position][\"type\"];\n\n              return (\n                <DiceSideSelector\n                  key={position.toString()}\n                  value={{ type, value }}\n                  onChange={({ value }) => {\n                    const alt = [...alterations];\n                    const index = alt.findIndex(\n                      ({ position: pos }) => pos === position\n                    );\n                    alt[index][\"value\"] = value;\n                    setAlterations(alt);\n                  }}\n                  facets={AVAILABLE_FACETS[type].map((value) => {\n                    return { type, value };\n                  })}\n                />\n              );\n            })}\n          </div>\n          <NextButton onClick={() => onFinish(alterations)}>\n            {buttonText()}\n          </NextButton>\n        </>\n      }\n      theme=\"reroll\"\n    />\n  );\n};\n\nexport default Alter;\n","import React from \"react\";\nimport DicesBox from \"../DicesBox\";\nimport NextButton from \"../NextButton\";\nimport { replaceRerolls, isAlteration } from \"../utils\";\nimport { Button } from \"antd\";\nimport LineContainer from \"../button/LineContainer\";\n\nconst Confirm = ({\n  dices,\n  onFinish,\n  basePool,\n  rerollTypes,\n  addReroll,\n  addAlteration,\n}) => {\n  const description = `If need be you may add ${\n    rerollTypes.length > 0 ? \"extra\" : \"\"\n  } effects that modify dice at this step.`;\n  const rerollButtonText = `Apply ${\n    rerollTypes.filter((name) => !isAlteration(name)).length > 0\n      ? \"another\"\n      : \"a\"\n  } reroll`;\n  const alterButtonText = `Apply ${\n    rerollTypes.filter((name) => isAlteration(name)).length > 0\n      ? \"another\"\n      : \"an\"\n  } alteration`;\n  const nextButtonText = `Skip`;\n\n  return (\n    <DicesBox\n      text={description}\n      dices={replaceRerolls({\n        dices,\n        basePool,\n        rerollTypes,\n      })}\n      footer={\n        <LineContainer>\n          <Button disabled={!addReroll} onClick={addReroll}>\n            {rerollButtonText}\n          </Button>\n          <Button disabled={!addAlteration} onClick={addAlteration}>\n            {alterButtonText}\n          </Button>\n          <NextButton onClick={onFinish}>{nextButtonText}</NextButton>\n        </LineContainer>\n      }\n    />\n  );\n};\n\nexport default Confirm;\n","import React from \"react\";\nimport { reroll, alter, goToKeepStep, addModifiers } from \"./reducer\";\nimport Distinction from \"./reroll/Distinction\";\nimport Adversity from \"./reroll/Adversity\";\nimport Ability from \"./reroll/Ability\";\nimport Ishiken from \"./reroll/Ishiken\";\nimport DragonWard from \"./reroll/DragonWard\";\nimport Sailor from \"./reroll/Sailor\";\nimport Alter from \"./reroll/Alter\";\nimport Confirm from \"./reroll/Confirm\";\nimport {\n  isSpecialReroll,\n  rolledDicesCount,\n  isSpecialAlteration,\n} from \"./utils\";\nimport Result from \"./result/Reroll\";\nimport { Divider } from \"antd\";\n\nconst Modifier = ({ roll, dispatch }) => {\n  const { dices, modifiers, metadata } = roll;\n\n  const compromised = modifiers.includes(\"compromised\");\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  const shouldShow = (modifier) =>\n    modifiers.includes(modifier) && !rerollTypes.includes(modifier);\n\n  if (shouldShow(\"distinction\")) {\n    return (\n      <Distinction\n        dices={dices}\n        onFinish={(positions) =>\n          dispatch(reroll(roll, positions, \"distinction\"))\n        }\n        modifiers={modifiers}\n      />\n    );\n  }\n\n  if (shouldShow(\"adversity\")) {\n    return (\n      <Adversity\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"adversity\"))}\n      />\n    );\n  }\n  const AbilityReroll = ({ name, text }) => {\n    return (\n      <Ability\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, name))}\n        text={text}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  };\n\n  if (shouldShow(\"deathdealer\")) {\n    return (\n      <AbilityReroll\n        name={\"deathdealer\"}\n        text={`Thanks to your School Ability, you may reroll dice up to your school rank.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"manipulator\")) {\n    return (\n      <AbilityReroll\n        name={\"manipulator\"}\n        text={`Thanks to your School Ability, you may reroll dice up to your school rank.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"2heavens\")) {\n    return (\n      <DragonWard\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"2heavens\"))}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  }\n\n  if (shouldShow(\"ruthless\")) {\n    return (\n      <AbilityReroll\n        name={\"ruthless\"}\n        text={`Custom reroll: Select the dice you have to reroll.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"shadow\")) {\n    return (\n      <AbilityReroll\n        name={\"shadow\"}\n        text={`Thanks to your School Ability, you can stake honor up to your school rank to re-roll a number of dice equal to twice the amount of honor staked.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"sailor\")) {\n    return (\n      <Sailor\n        dices={dices}\n        onFinish={(positions) => dispatch(reroll(roll, positions, \"sailor\"))}\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n        compromised={compromised}\n      />\n    );\n  }\n\n  const specialReroll = modifiers.find(\n    (modifier) => isSpecialReroll(modifier) && shouldShow(modifier)\n  );\n  if (specialReroll) {\n    return (\n      <AbilityReroll\n        name={specialReroll}\n        text={`Custom reroll: Select the dice you want/have to reroll.`}\n      />\n    );\n  }\n\n  if (shouldShow(\"ishiken\")) {\n    return (\n      <Ishiken\n        dices={dices}\n        onFinish={(alterations) =>\n          dispatch(alter(roll, alterations, \"ishiken\"))\n        }\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n      />\n    );\n  }\n\n  const specialAlteration = modifiers.find(\n    (modifier) => isSpecialAlteration(modifier) && shouldShow(modifier)\n  );\n  if (specialAlteration) {\n    return (\n      <Alter\n        dices={dices}\n        onFinish={(alterations) =>\n          dispatch(alter(roll, alterations, specialAlteration))\n        }\n        basePool={basePool}\n        rerollTypes={rerollTypes}\n        text={`Custom alteration: Change the result as you want/have to.`}\n      />\n    );\n  }\n\n  const addReroll = () =>\n    dispatch(\n      addModifiers(roll, [\n        `ruleless${modifiers.length.toString().padStart(2, \"0\")}`,\n      ])\n    );\n  const addAlteration = () =>\n    dispatch(\n      addModifiers(roll, [\n        `reasonless${modifiers.length.toString().padStart(2, \"0\")}`,\n      ])\n    );\n  return (\n    <Confirm\n      dices={dices}\n      onFinish={() => dispatch(goToKeepStep())}\n      basePool={basePool}\n      rerollTypes={rerollTypes}\n      addReroll={modifiers.length < 100 && addReroll}\n      addAlteration={modifiers.length < 100 && addAlteration}\n    />\n  );\n};\n\nconst WrappedModifier = ({ roll, dispatch }) => {\n  const { dices, metadata } = roll;\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  return (\n    <>\n      {rerollTypes.length > 0 && (\n        <>\n          <Result dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n          <Divider />\n        </>\n      )}\n      <Modifier roll={roll} dispatch={dispatch} />\n    </>\n  );\n};\n\nexport default WrappedModifier;\n","import React, { useEffect, useState } from \"react\";\nimport Intent from \"./Intent\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectAll,\n  create,\n  softReset,\n  keep,\n  selectStep,\n  selectIntent,\n  setAddKept,\n} from \"./reducer\";\nimport Keep from \"./Keep\";\nimport Summary from \"./Summary\";\nimport { Collapse } from \"antd\";\nimport styles from \"./index.module.css\";\nimport { setParameters, load } from \"./reducer\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport NextButton from \"./NextButton\";\nimport { selectUser } from \"../user/reducer\";\nimport Steps, { DECLARE, REROLL, KEEP, RESOLVE } from \"./Steps\";\nimport RerollResult from \"./result/Reroll\";\nimport KeepResult from \"./result/Keep\";\nimport ResolveResult from \"./result/Resolve\";\nimport AnonymousAlert from \"./AnonymousAlert\";\nimport { isReroll, rolledDicesCount } from \"./utils\";\nimport Modifier from \"./Modifier\";\n\nconst { Panel } = Collapse;\n\nconst Layout = ({ children }) => {\n  const user = useSelector(selectUser);\n  const currentStep = useSelector(selectStep);\n\n  return (\n    <>\n      {!user && <AnonymousAlert className={styles.alert} />}\n      <Steps current={currentStep} className={styles.steps} />\n      <>{children}</>\n    </>\n  );\n};\n\nconst Roller = ({ save }) => {\n  const roll = useSelector(selectAll);\n  const user = useSelector(selectUser);\n  const currentStep = useSelector(selectStep);\n  const intent = useSelector(selectIntent);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!save || !dispatch) {\n      return;\n    }\n    dispatch(setParameters({ ...save, ...save.roll.parameters }));\n    dispatch(\n      load({\n        id: save.id,\n        dices: save.roll.dices,\n        metadata: save.roll.metadata,\n        player: save.user,\n      })\n    );\n  }, [save, dispatch]);\n\n  const [activeKeys, setActiveKeys] = useState([DECLARE]);\n  useEffect(() => {\n    // FIXME: Naming inconsistency\n    if (currentStep === REROLL) {\n      setActiveKeys([\"modify\"]);\n      return;\n    }\n    setActiveKeys([currentStep]);\n  }, [currentStep]);\n\n  const {\n    dices,\n    tn,\n    modifiers,\n    ring,\n    skill,\n    error,\n    id,\n    description,\n    metadata,\n    addkept,\n  } = roll;\n\n  const basePool = rolledDicesCount(roll);\n  const rerollTypes = metadata?.rerolls || [];\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  const disabled = (panel) => {\n    if (currentStep === panel) {\n      return false;\n    }\n\n    if (panel === RESOLVE) {\n      return currentStep !== RESOLVE;\n    }\n\n    if (panel === KEEP) {\n      return ![KEEP, RESOLVE].includes(currentStep);\n    }\n\n    if (panel === REROLL) {\n      if (currentStep === DECLARE) {\n        return true;\n      }\n\n      return !modifiers.some(isReroll);\n    }\n\n    return false;\n  };\n\n  const PanelContent = ({ name }) => {\n    if (disabled(name)) {\n      return null;\n    }\n\n    if (name === RESOLVE) {\n      return (\n        <ResolveResult\n          dices={dices}\n          tn={tn}\n          button={\n            <NextButton onClick={() => dispatch(softReset())}>\n              New roll\n            </NextButton>\n          }\n          id={id}\n          description={description}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    if (name === KEEP) {\n      if (currentStep === KEEP) {\n        return (\n          <Keep\n            dices={dices}\n            onFinish={(toKeep, toAdd) => dispatch(keep(roll, toKeep, toAdd))}\n            tn={tn}\n            ring={ring}\n            skill={skill}\n            rerollTypes={rerollTypes}\n            addkept={addkept}\n            setAddKept={(data) => dispatch(setAddKept(data))}\n            modifiers={modifiers}\n          />\n        );\n      }\n      return (\n        <KeepResult\n          dices={dices}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    if (name === REROLL) {\n      if (currentStep === REROLL) {\n        return <Modifier roll={roll} dispatch={dispatch} />;\n      }\n\n      return (\n        <RerollResult\n          dices={dices}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <Layout>\n      <Collapse activeKey={activeKeys} onChange={setActiveKeys}>\n        <Panel\n          header=\"Declare\"\n          key=\"declare\"\n          collapsible={currentStep === DECLARE ? \"disabled\" : \"header\"}\n        >\n          {currentStep === DECLARE ? (\n            <Intent\n              onFinish={(data) => dispatch(create({ ...roll, ...data }, user))}\n              values={roll}\n            />\n          ) : (\n            <Summary {...intent} />\n          )}\n        </Panel>\n        <Panel\n          header=\"Modify\"\n          key=\"modify\"\n          collapsible={\n            disabled(REROLL) || currentStep === REROLL ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={REROLL} />\n        </Panel>\n        <Panel\n          header=\"Keep\"\n          key=\"keep\"\n          collapsible={\n            disabled(KEEP) || currentStep === KEEP ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={KEEP} />\n        </Panel>\n        <Panel\n          header=\"Resolve\"\n          key=\"resolve\"\n          collapsible={\n            disabled(RESOLVE) || currentStep === RESOLVE ? \"disabled\" : \"header\"\n          }\n        >\n          <PanelContent name={RESOLVE} />\n        </Panel>\n      </Collapse>\n    </Layout>\n  );\n};\n\nexport default Roller;\n","import React, { useState, useEffect } from \"react\";\nimport { Layout, Menu } from \"antd\";\nimport logo from \"./logo.png\";\nimport styles from \"./Layout.module.css\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\n\nconst { Header, Content, Footer } = Layout;\n\nconst CustomLayout = ({ children }) => {\n  const user = useSelector(selectUser);\n  const location = useLocation();\n  const [selectedKey, setSelectedKey] = useState();\n\n  useEffect(() => {\n    const getMenuKey = ({ pathname, search }) => {\n      if (pathname === \"/\") {\n        return \"new_roll\";\n      }\n\n      if (pathname === \"/rolls\" && !search) {\n        return \"all_rolls\";\n      }\n\n      if (pathname === \"/rolls\" && !!user && search === `?player=${user.id}`) {\n        return \"my_rolls\";\n      }\n\n      return null;\n    };\n\n    setSelectedKey(getMenuKey(location));\n  }, [location, user]);\n\n  return (\n    <Layout className={styles.layout}>\n      <Header>\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          selectedKeys={[selectedKey]}\n          onSelect={({ key }) => setSelectedKey(key)}\n        >\n          <Menu.Item className={styles.logo} key=\"home\">\n            <Link to=\"/\">\n              <img alt=\"Logo\" src={logo} />\n            </Link>\n          </Menu.Item>\n          <Menu.Item key=\"new_roll\">\n            <Link to=\"/\">Roll</Link>\n          </Menu.Item>\n          <Menu.Item key=\"all_rolls\">\n            <Link to=\"/rolls\">All rolls</Link>\n          </Menu.Item>\n          {user && (\n            <Menu.Item key=\"my_rolls\">\n              <Link to={`/rolls?player=${user.id}`}>My rolls</Link>\n            </Menu.Item>\n          )}\n          <Menu.Item className={styles.login}>\n            {user ? (\n              <a href=\"/user/profile\">{user.name}</a>\n            ) : (\n              <a href=\"/login\">Login</a>\n            )}\n          </Menu.Item>\n        </Menu>\n      </Header>\n      <Content>{children}</Content>\n      <Footer className={styles.footer}>\n        {`Sakkaku Project / 2020 / `}\n        <a href=\"mailto:contact.sakkaku@gmail.com\">Issue? Suggestion?</a>\n      </Footer>\n    </Layout>\n  );\n};\n\nexport default CustomLayout;\n","import React from \"react\";\nimport opportunityImage from \"./images/opportunity.png\";\nimport strifeImage from \"./images/strife.png\";\nimport successImage from \"./images/success.png\";\nimport styles from \"./Result.module.css\";\n\nconst Result = ({ opportunity, success, strife }) => {\n  return (\n    <span className={styles.result}>\n      <img src={successImage} title=\"Success\" alt=\"Success\" />\n      <span>{`: ${success}, `}</span>\n      <img src={opportunityImage} title=\"Opportunity\" alt=\"Opportunity\" />\n      <span>{`: ${opportunity}, `}</span>\n      <img src={strifeImage} title=\"Strife\" alt=\"Strife\" />\n      <span>{`: ${strife}`}</span>\n    </span>\n  );\n};\n\nexport default Result;\n","import React from \"react\";\nimport { Spin } from \"antd\";\nimport styles from \"./Loader.module.css\";\n\nconst Loader = () => {\n  return (\n    <div className={styles.container}>\n      <Spin className={styles.loader} size=\"large\" />\n    </div>\n  );\n};\n\nexport default Loader;\n","import React from \"react\";\nimport queryString from \"query-string\";\nimport { useLocation, Link, useHistory } from \"react-router-dom\";\nimport { Pagination } from \"antd\";\nimport styles from \"./Pagination.module.css\";\n\nconst CustomPagination = ({ pageSize, current, total }) => {\n  const location = useLocation();\n  const history = useHistory();\n\n  const pageLink = (pageNumber) => {\n    return `${location.pathname}?${queryString.stringify({\n      ...queryString.parse(location.search),\n      page: pageNumber,\n    })}`;\n  };\n\n  return (\n    <Pagination\n      className={styles.pagination}\n      simple\n      pageSize={pageSize}\n      current={current}\n      total={total}\n      itemRender={(_, type, originalElement) => {\n        if (type === \"prev\") {\n          return <Link to={pageLink(current - 1)}>{\"<\"}</Link>;\n        }\n        if (type === \"next\") {\n          return <Link to={pageLink(current + 1)}>{\">\"}</Link>;\n        }\n        return originalElement;\n      }}\n      onChange={(pageNumber) => {\n        history.push(pageLink(pageNumber));\n      }}\n    />\n  );\n};\n\nexport default CustomPagination;\n","import React, { useEffect, useState } from \"react\";\nimport { Table, Typography } from \"antd\";\nimport { getOnServer } from \"../../server\";\nimport Result from \"./Result\";\nimport queryString from \"query-string\";\nimport styles from \"./List.module.css\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport Loader from \"../navigation/Loader\";\nimport Pagination from \"../../Pagination\";\n\nconst { Text } = Typography;\n\nconst columns = [\n  {\n    title: \"Date\",\n    dataIndex: \"date\",\n    key: \"date\",\n    render: (date) => {\n      return (\n        <Text>\n          <span>{new Date(date).toLocaleDateString()}</span>\n          <span className={styles.time}>\n            {\" \"}\n            {new Date(date).toLocaleTimeString(undefined, {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              second: \"2-digit\",\n              timeZoneName: \"short\",\n            })}\n          </span>\n        </Text>\n      );\n    },\n  },\n  {\n    title: \"Campaign\",\n    dataIndex: \"campaign\",\n    key: \"campaign\",\n    render: (campaign) => {\n      return (\n        <Link to={`/rolls?${queryString.stringify({ campaign })}`}>\n          {campaign}\n        </Link>\n      );\n    },\n  },\n  {\n    title: \"Character\",\n    dataIndex: \"character\",\n    key: \"character\",\n    render: ({ character, campaign }) => {\n      return (\n        <Link to={`/rolls?${queryString.stringify({ campaign, character })}`}>\n          {character}\n        </Link>\n      );\n    },\n  },\n  {\n    title: \"Player\",\n    dataIndex: \"player\",\n    key: \"player\",\n    render: (player) => {\n      if (!player) {\n        return <Text delete>Deleted account</Text>;\n      }\n\n      return (\n        <Link to={`/rolls?${queryString.stringify({ player: player.id })}`}>\n          {player.name}\n        </Link>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"Description\",\n    dataIndex: \"description\",\n    key: \"description\",\n    responsive: [\"lg\"],\n  },\n  {\n    title: \"Result\",\n    dataIndex: \"result\",\n    key: \"result\",\n    width: 200,\n    render: (result) => {\n      return (\n        <>\n          {result ? (\n            <Result {...result} />\n          ) : (\n            <Text type=\"secondary\">Ongoing…</Text>\n          )}\n        </>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"Success?\",\n    dataIndex: \"success\",\n    key: \"success\",\n    align: \"center\",\n    render: ({ result, tn }) => {\n      if (!result) {\n        return <Text type=\"secondary\">{\"TBD\"}</Text>;\n      }\n\n      if (!tn) {\n        return <Text>{\"?\"}</Text>;\n      }\n\n      return result.success >= tn ? (\n        <Text type=\"success\">{\"Yes\"}</Text>\n      ) : (\n        <Text type=\"danger\">{\"No\"}</Text>\n      );\n    },\n    responsive: [\"md\"],\n  },\n  {\n    title: \"\",\n    dataIndex: \"see_more\",\n    key: \"see_more\",\n    render: ({ id }) => {\n      return (\n        <Link\n          title=\"See more\"\n          to={`/rolls/${id}`}\n          className={styles[\"see-more\"]}\n        >\n          {\"➥\"}\n        </Link>\n      );\n    },\n  },\n];\n\nconst List = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState();\n  const location = useLocation();\n\n  const query = queryString.parse(location.search);\n  const page = parseInt(query[\"page\"]) || 1;\n  const uri = `/public/ffg/l5r/rolls?${queryString.stringify({\n    ...query,\n    page,\n  })}`;\n\n  useEffect(() => {\n    setLoading(true);\n    getOnServer({\n      uri,\n      success: (data) => {\n        setData(data);\n        setLoading(false);\n      },\n      error: (_) => {\n        setError(true);\n        setLoading(false);\n      },\n    });\n  }, [uri]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  const dataSource = data.items.map(\n    ({\n      id,\n      created_at,\n      campaign,\n      character,\n      user,\n      description,\n      result,\n      roll,\n    }) => {\n      const tn = roll.parameters.tn;\n\n      return {\n        key: id,\n        date: created_at,\n        campaign,\n        character: { campaign, character },\n        player: user,\n        description,\n        result,\n        success: { result, tn },\n        see_more: { id },\n      };\n    }\n  );\n\n  return (\n    <>\n      <Table columns={columns} dataSource={dataSource} pagination={false} />\n      <Pagination\n        pageSize={data[\"per_page\"]}\n        current={page}\n        total={data[\"total\"]}\n      />\n    </>\n  );\n};\n\nexport default List;\n","import React from \"react\";\nimport Reroll from \"./result/Reroll\";\nimport Keep from \"./result/Keep\";\nimport Resolve from \"./result/Resolve\";\nimport { Collapse } from \"antd\";\nimport Summary from \"./Summary\";\nimport { rolledDicesCount } from \"./utils\";\n\nconst { Panel } = Collapse;\n\nconst Complete = ({ dices, button, intent, context, player }) => {\n  const { tn } = intent;\n  const { id, description } = context;\n\n  const basePool = rolledDicesCount(intent);\n  const rerollTypes = context?.roll?.metadata?.rerolls || [];\n\n  return (\n    <Collapse defaultActiveKey={[\"declare\", \"resolve\"]}>\n      <Panel header=\"Declare\" key=\"declare\">\n        <Summary {...context} {...intent} player={player} />\n      </Panel>\n\n      <Panel header=\"Modify\" key=\"modify\" disabled={rerollTypes.length === 0}>\n        <Reroll dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n      </Panel>\n\n      <Panel header=\"Keep\" key=\"keep\">\n        <Keep dices={dices} basePool={basePool} rerollTypes={rerollTypes} />\n      </Panel>\n      <Panel header=\"Resolve\" key=\"resolve\" collapsible=\"disabled\">\n        <Resolve\n          dices={dices}\n          tn={tn}\n          button={button}\n          id={id}\n          description={description}\n          basePool={basePool}\n          rerollTypes={rerollTypes}\n        />\n      </Panel>\n    </Collapse>\n  );\n};\n\nexport default Complete;\n","import React from \"react\";\nimport { Breadcrumb, Typography } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Breadcrumb.module.css\";\n\nconst { Text } = Typography;\n\nconst CustomBreadcrumb = ({ campaign, character, description }) => {\n  return (\n    <Breadcrumb className={styles.container}>\n      <Breadcrumb.Item>\n        <Link to={`/rolls`}>{\"All rolls\"}</Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item>\n        <Link to={`/rolls?campaign=${campaign}`}>{campaign}</Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item>\n        <Link to={`/rolls?campaign=${campaign}&character=${character}`}>\n          {character}\n        </Link>\n      </Breadcrumb.Item>\n      <Breadcrumb.Item className={styles.description}>\n        <Text ellipsis>{description}</Text>\n      </Breadcrumb.Item>\n    </Breadcrumb>\n  );\n};\n\nexport default CustomBreadcrumb;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Button, Card } from \"antd\";\nimport { getOnServer } from \"../../server\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport Complete from \"./Complete\";\nimport Summary from \"./Summary\";\nimport DicesBox from \"./DicesBox\";\nimport Roller from \"./index\";\nimport Loader from \"../navigation/Loader\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\nimport Breadcrumb from \"./Breadcrumb\";\nimport { orderDices } from \"./utils\";\n\nconst GoBackButton = (props) => {\n  const history = useHistory();\n  return (\n    <Button\n      onClick={() => {\n        history.length > 2 ? history.goBack() : history.push(\"/rolls\");\n      }}\n      {...props}\n    >{`Go back`}</Button>\n  );\n};\n\nconst IdentifiedRoll = () => {\n  const { id } = useParams();\n  const user = useSelector(selectUser);\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    setLoading(true);\n    getOnServer({\n      uri: `/public/ffg/l5r/rolls/${id}`,\n      success: (data) => {\n        setData(data);\n        setLoading(false);\n      },\n      error: (_) => {\n        setLoading(false);\n        setError(true);\n      },\n    });\n  }, [id]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  const { roll, user: player, result } = data;\n  const { dices, parameters } = roll;\n  const { campaign, character, description } = data;\n\n  if (!result && user && player && user.id === player.id) {\n    return <Roller save={data} />;\n  }\n\n  return (\n    <>\n      <Breadcrumb\n        campaign={campaign}\n        character={character}\n        description={description}\n      />\n      {result ? (\n        <Complete\n          dices={dices}\n          button={<GoBackButton />}\n          intent={parameters}\n          context={data}\n          player={player}\n        />\n      ) : (\n        <>\n          <Card bordered={false}>\n            <Summary player={player} {...data} {...parameters} />\n          </Card>\n          <DicesBox\n            text={`Check in progress. Current dice pool:`}\n            dices={orderDices(\n              dices.filter(({ status }) => [\"pending\", \"kept\"].includes(status))\n            )}\n            footer={<GoBackButton style={{ float: \"right\" }} />}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default IdentifiedRoll;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { postOnServer, authentifiedPostOnServer } from \"../../server\";\n\nconst slice = createSlice({\n  name: \"heritage\",\n  initialState: {\n    dices: [],\n    loading: false,\n    error: null,\n    metadata: {},\n    context: {},\n    uuid: null,\n  },\n  reducers: {\n    setLoading: (state, action) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n    update: (state, action) => {\n      const { dices, metadata } = action.payload;\n      state.dices = dices;\n      state.metadata = metadata;\n      state.loading = false;\n    },\n    reset: (state) => {\n      state.dices = [];\n      state.metadata = {};\n      state.context = {};\n      state.uuid = null;\n      window.history.pushState(null, null, `/heritage`);\n    },\n    setContext: (state, action) => {\n      state.context = action.payload;\n    },\n    setUuid: (state, action) => {\n      const uuid = action.payload;\n      state.uuid = uuid;\n      window.history.pushState(null, null, `/heritage/${uuid}`);\n    },\n    load: (state, action) => {\n      const { uuid, dices, metadata, context } = action.payload;\n      state.uuid = uuid;\n      state.dices = dices;\n      state.metadata = metadata;\n      state.context = context;\n      window.history.pushState(null, null, `/heritage/${uuid}`);\n    },\n  },\n});\n\nexport const { setLoading, setError, reset, load } = slice.actions;\n\nconst { update, setContext, setUuid } = slice.actions;\n\nexport const create = ({ context, metadata, user }) => (dispatch) => {\n  dispatch(setLoading(true));\n  dispatch(setContext({ ...context, user }));\n\n  const error = (e) => {\n    dispatch(setError(e));\n  };\n\n  if (user) {\n    const { campaign, character, description } = context;\n\n    authentifiedPostOnServer({\n      uri: \"/ffg/l5r/heritage-rolls/create\",\n      body: {\n        campaign,\n        character,\n        description,\n        metadata,\n      },\n      success: ({ uuid, roll }) => {\n        dispatch(setUuid(uuid));\n        dispatch(update(roll));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/heritage-rolls/create\",\n    body: { metadata },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const keep = ({ roll, position, user }) => (dispatch) => {\n  dispatch(setLoading(true));\n\n  const error = (e) => {\n    dispatch(setError(e));\n  };\n\n  if (user) {\n    const { uuid } = roll;\n    authentifiedPostOnServer({\n      uri: `/ffg/l5r/heritage-rolls/${uuid}/keep`,\n      body: {\n        position,\n      },\n      success: ({ roll }) => {\n        dispatch(update(roll));\n      },\n      error,\n    });\n    return;\n  }\n\n  postOnServer({\n    uri: \"/public/ffg/l5r/heritage-rolls/keep\",\n    body: { roll, position },\n    success: (data) => {\n      dispatch(update(data));\n    },\n    error,\n  });\n};\n\nexport const selectLoading = (state) => state.heritage.loading;\nexport const selectError = (state) => state.heritage.error;\nexport const selectRoll = (state) => {\n  return {\n    uuid: state.heritage.uuid,\n    dices: state.heritage.dices,\n    metadata: state.heritage.metadata,\n  };\n};\nexport const selectContext = (state) => state.heritage.context;\n\nexport default slice.reducer;\n","const TABLES = {\n  core: {\n    name: \"Core Rulebook (page 96)\",\n    entries: [\n      {\n        name: \"Famous Deed\",\n        min: 1,\n        max: 1,\n        description:\n          \"One of your ancestors won a great victory for their clan or even the Emperor, and was rewarded with an item of incredible quality.\",\n        modifier: \"Increase your glory by 3.\",\n        effect: {\n          intro:\n            \"Roll a ten-sided die again and add the resulting family heirloom to your starting items (\",\n          outro:\n            \"). You choose one quality and the GM chooses one quality from the list of item qualities, on page 240 of the core rulebook; these are applied to the item.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"a weapon\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"a set of armor\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"another item\",\n            },\n            {\n              min: 9,\n              max: 9,\n              text: \"a horse or other animal\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"a boat or estate\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Glorious Sacrifice\",\n        min: 2,\n        max: 2,\n        description:\n          \"One of your ancestors perished nobly in battle, and one of their signature items vanished with them or was lost in the subsequent years.\",\n        modifier: \"Increase your honor by 5 and your glory by 5.\",\n        effect: {\n          intro:\n            \"Roll a ten-sided die again to determine your lost family heirloom (\",\n          outro:\n            \"), which exists somewhere in the world. You choose one quality and the GM chooses one quality; these are applied to the item. You do not know where the heirloom is, but you could later reclaim it during the campaign.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"a weapon\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"a set of armor\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"another item\",\n            },\n            {\n              min: 9,\n              max: 9,\n              text: \"a horse or other animal\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"a boat or estate\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Wondrous Work\",\n        min: 3,\n        max: 3,\n        description:\n          \"One of your ancestors crafted a piece of great beauty that won renown for your family, and others expect you to live up to that legacy.\",\n        modifier: \"Increase your glory by 5.\",\n        effect: {\n          intro: \"Roll a ten-sided die again to determine an Artisan skill (\",\n          outro: \"); gain +1 rank in that skill.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Aesthetics\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"Composition\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"Design\",\n            },\n            {\n              min: 9,\n              max: 10,\n              text: \"Smithing\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Dynasty Builder\",\n        min: 4,\n        max: 4,\n        description:\n          \"One of your ancestors was instrumental in the rise of a powerful lord, using cunning stratagems and shrewd advice to secure their ascension. You have heard this story many times and know the importance of power subtly wielded.\",\n        modifier: \"Decrease your glory by 3.\",\n        effect: {\n          intro: \"Roll a ten-sided die again to determine a Social skill (\",\n          outro: \"); gain +1 rank in that skill.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Command\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"Courtesy\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"Games\",\n            },\n            {\n              min: 9,\n              max: 10,\n              text: \"Performance\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Discovery\",\n        min: 5,\n        max: 5,\n        description:\n          \"One of your ancestors made an incredible discovery, invented something of great importance, or uncovered an ancient secret. Thanks to family lore, you have at least a rudimentary understanding of the subject of their discovery.\",\n        modifier: \"Increase your glory by 3.\",\n        effect: {\n          intro: \"Roll a ten-sided die again to determine a Scholar skill (\",\n          outro: \"); gain +1 rank in that skill.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Culture\",\n            },\n            {\n              min: 4,\n              max: 5,\n              text: \"Sentiment\",\n            },\n            {\n              min: 6,\n              max: 7,\n              text: \"Government\",\n            },\n            {\n              min: 8,\n              max: 9,\n              text: \"Medicine\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"Theology\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Ruthless Victor\",\n        min: 6,\n        max: 6,\n        description:\n          \"One of your ancestors claimed a bloody victory over a rival, smashing their forces with a cunning maneuver or seizing their domain after vanquishing them in battle. From this relative or their story, you learned well the importance of brute force.\",\n        modifier: \"Decrease your honor by 5.\",\n        effect: {\n          intro: \"Roll a ten-sided die again to determine a Martial skill (\",\n          outro: \"); gain +1 rank in that skill.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Fitness\",\n            },\n            {\n              min: 4,\n              max: 5,\n              text: \"Martial Arts [Melee]\",\n            },\n            {\n              min: 6,\n              max: 7,\n              text: \"Martial Arts [Ranged]\",\n            },\n            {\n              min: 8,\n              max: 8,\n              text: \"Martial Arts [Unarmed]\",\n            },\n            {\n              min: 9,\n              max: 9,\n              text: \"Tactics\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"Meditation\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Elevated for Service\",\n        min: 7,\n        max: 7,\n        description:\n          \"One of your ancestors was a jizamurai or even a commoner who served with such distinction that their position was elevated to that of a Great Clan samurai by marriage or mandate of a daimyō. As a child, you learned the basics of the skills for which they won their esteem.\",\n        modifier: \"Decrease your glory by 3 and increase your honor by 3.\",\n        effect: {\n          intro: \"Roll a ten-sided die again to determine a Trade skill (\",\n          outro: \"); gain +1 rank in that skill.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Commerce\",\n            },\n            {\n              min: 4,\n              max: 5,\n              text: \"Labor\",\n            },\n            {\n              min: 6,\n              max: 7,\n              text: \"Seafaring\",\n            },\n            {\n              min: 8,\n              max: 8,\n              text: \"Skulduggery\",\n            },\n            {\n              min: 9,\n              max: 10,\n              text: \"Survival\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Stolen Knowledge\",\n        min: 8,\n        max: 8,\n        description:\n          \"One of your ancestors learned a secret of another school and clandestinely passed it down through the ages; now, it has reached you.\",\n        modifier: \"Decrease your honor by 5.\",\n        effect: {\n          intro:\n            \"You know one additional technique. Roll a ten-sided die again to determine the category (\",\n          outro:\n            \"), and then select one technique with a prerequisite of school rank 1 and learn that technique. You can perform that technique even if it is not normally allowed by your school.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"kata\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"shūji\",\n            },\n            {\n              min: 7,\n              max: 7,\n              text: \"ritual\",\n            },\n            {\n              min: 8,\n              max: 8,\n              text: \"invocation\",\n            },\n            {\n              min: 9,\n              max: 9,\n              text: \"kihō\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"mahō or ninjutsu\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Imperial Heritage\",\n        min: 9,\n        max: 9,\n        description: \"You can trace your lineage back to the Imperial line.\",\n        modifier: \"Increase your status by 10.\",\n        effect:\n          \"You gain the Blessed Lineage advantage (see page 103 of the core rulebook) (this can be assigned in excess of the normal limitations on advantages at character creation).\",\n      },\n      {\n        name: \"Unusual Name Origin\",\n        min: 10,\n        max: 10,\n        description:\n          \"Your character was not named for an ancestor—perhaps they were named for an outsider who did a great service to the clan, perhaps their name was bestowed upon them for a unique deed, or perhaps someone was trying to send a specific message in the selection of their name.\",\n        modifier: \"Decrease your glory by 3.\",\n        effect:\n          \"Choose two of your character’s rings; you may reduce the value of one of these rings by 1 to increase the value of the other by 1 (this still cannot raise a ring above 3). If you do not do so, choose one item of rarity 6 or lower and assign it to your starting outfit.\",\n      },\n    ],\n  },\n  court: {\n    name: \"Courts of Stone (page 104)\",\n    entries: [\n      {\n        name: \"Dishonorable Cheat\",\n        min: 1,\n        max: 1,\n        description:\n          \"One of your kin was caught cheating in a high-profile duel. Instead of committing seppuku to purge their dishonor and redeem their family, they ran away and became a rōnin, disgracing their bloodline.\",\n        modifier: \"Decrease your glory by 5.\",\n        effect: {\n          intro:\n            \"Roll a ten-sided die to determine a skill to aid you in bringing your disgraced kin to justice (\",\n          outro: \").\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Martial Arts [ChooseOne]\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"Survival\",\n            },\n            {\n              min: 7,\n              max: 10,\n              text: \"Government\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Triumph over the Lion\",\n        min: 2,\n        max: 3,\n        description:\n          \"In your family line one of your ancestors held a decisive victory over the Lion. It may have been a duel, a critical game of Go, a battle, or any number of things. The circumstances are irrelevant; the Lion were embarrassed, and your ancestor brought honor to your clan.\",\n        modifier: \"Increase your honor by 5.\",\n        effect: {\n          intro:\n            \"Roll a ten-sided die and add the resulting family heirloom to your starting items (\",\n          outro:\n            \"). You choose one quality and the GM chooses one quality from the list of item qualities; these are applied to the item.\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"a weapon\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"a game set of your choice\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"some other item relevant to your ancestor’s victory\",\n            },\n            {\n              min: 9,\n              max: 9,\n              text: \"a horse or another animal\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text:\n                \"the deed to a small piece of land on the border of Lion territory\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Unforgivable Performance\",\n        min: 4,\n        max: 5,\n        description:\n          \"In the recent past one of your kin gave a truly horrible performance in the presence of the Imperial line. Through their embarrassing acting in a scene they caused the Emperor to leave the theatre and now rumors abound of your family being cursed by the Fortunes for such a failure.\",\n        modifier: \"Decrease your status by 3.\",\n        effect: {\n          intro:\n            \"You gain the Benten’s Curse (Air) disadvantage (see page 116 of the core rulebook). Roll a ten-sided die to determine a skill that will help redeem your family (\",\n          outro: \").\",\n          options: [\n            {\n              min: 1,\n              max: 3,\n              text: \"Performance\",\n            },\n            {\n              min: 4,\n              max: 6,\n              text: \"Culture\",\n            },\n            {\n              min: 7,\n              max: 9,\n              text: \"Command\",\n            },\n            {\n              min: 10,\n              max: 10,\n              text: \"Courtesy\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Triumph During Gempuku\",\n        min: 6,\n        max: 7,\n        description:\n          \"One of your parents was a Topaz Champion and brought honor to your clan and your family.\",\n        modifier: \"Increase your honor and glory by 3.\",\n        effect:\n          \"You gain the Support of the Kakita Dueling Academy distinction, where the Topaz Championship takes place.\",\n      },\n      {\n        name: \"A Little Too Close to Heaven\",\n        min: 8,\n        max: 9,\n        description:\n          \"One of your ancestors is rumored to have had an illegitimate child with an Emperor. While you may be able to link your heritage to the Imperial line, the disgrace of such an affair stains this joy.\",\n        modifier: \"Increase your status by 5 and decrease your honor by 5.\",\n        effect: {\n          intro:\n            \"Roll a ten-sided die to determine a skill that can aid you in discovering the truth about your lineage (\",\n          outro: \").\",\n          options: [\n            {\n              min: 1,\n              max: 2,\n              text: \"Government\",\n            },\n            {\n              min: 3,\n              max: 4,\n              text: \"Commerce\",\n            },\n            {\n              min: 5,\n              max: 6,\n              text: \"Sentiment\",\n            },\n            {\n              min: 7,\n              max: 8,\n              text: \"Meditation\",\n            },\n            {\n              min: 9,\n              max: 10,\n              text: \"Theology\",\n            },\n          ],\n        },\n      },\n      {\n        name: \"Elegant Craftsman\",\n        min: 10,\n        max: 10,\n        description:\n          \"Your ancestor was a truly gifted artisan and produced in their lifetime a masterwork that is still renowned today. You now live in the shadow of this ancestor, and your clan expects your complete focus in bringing glory to your line once again.\",\n        modifier: \"Increase your glory by 5.\",\n        effect:\n          \"You gain the Isolation anxiety (see page 103 of Courts of Stone). Choose one of your character’s rings; you may reduce the value of this ring by 1 to increase the value of your Fire or Air Ring by 1 (this still cannot raise it above 3). \",\n      },\n    ],\n  },\n  custom: {\n    name: \"Other / Custom\",\n  },\n};\n\nexport const entry = ({ table, firstRoll, secondRoll }) => {\n  if (!firstRoll) {\n    return {\n      name: `TBD`,\n      description: `TBD`,\n      modifier: `TBD`,\n      effect: `TBD`,\n    };\n  }\n\n  if (!table || table === \"custom\") {\n    const stringRoll = [firstRoll, secondRoll].filter(Boolean).join(\" / \");\n\n    return {\n      name: stringRoll,\n      description: `TBD (you rolled: ${stringRoll})`,\n      modifier: `TBD`,\n      effect: `TBD`,\n    };\n  }\n\n  return TABLES[table][\"entries\"].find(\n    ({ min, max }) => min <= firstRoll && max >= firstRoll\n  );\n};\n\nexport default TABLES;\n","import React from \"react\";\nimport { Button, Form, Select, AutoComplete, Input } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectLoading, selectError, create } from \"./reducer\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport styles from \"./Form.module.css\";\nimport TABLES from \"./tables\";\nimport {\n  selectCampaigns,\n  selectCharacters,\n  addCampaign,\n  addCharacter,\n  selectUser,\n} from \"../user/reducer\";\n\nconst { TextArea } = Input;\n\nconst arrayToAutoCompleteOptions = (values) => {\n  if (!values) {\n    return undefined;\n  }\n\n  return values.map((value) => {\n    return {\n      value,\n    };\n  });\n};\n\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 },\n};\n\nconst tailLayout = {\n  labelCol: { span: 0 },\n  wrapperCol: { span: 24 },\n};\n\nconst CustomForm = () => {\n  const loading = useSelector(selectLoading);\n  const error = useSelector(selectError);\n  const dispatch = useDispatch();\n\n  const user = useSelector(selectUser);\n  const campaigns = useSelector(selectCampaigns);\n  const characters = useSelector(selectCharacters);\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  const mandatoryIfLogged = [\n    { required: !!user, message: \"Please fill in this field.\" },\n  ];\n\n  return (\n    <Form\n      initialValues={{ table: \"core\" }}\n      onFinish={(data) => {\n        const { campaign, character, description, table } = data;\n\n        dispatch(\n          create({\n            metadata: { table },\n            context: { campaign, character, description },\n            user,\n          })\n        );\n\n        dispatch(addCampaign(campaign));\n        dispatch(addCharacter(character));\n      }}\n      className={styles.form}\n      {...layout}\n    >\n      <Form.Item name=\"table\" label=\"Book\" rules={[{ required: true }]}>\n        <Select\n          options={Object.keys(TABLES).map((value) => {\n            return { value, label: TABLES[value][\"name\"] };\n          })}\n        />\n      </Form.Item>\n      <>\n        {!!user && (\n          <Form.Item label=\"Campaign\" name=\"campaign\" rules={mandatoryIfLogged}>\n            <AutoComplete\n              options={arrayToAutoCompleteOptions(campaigns)}\n              placeholder={\"The Dead of Winter\"}\n            />\n          </Form.Item>\n        )}\n        <Form.Item label=\"Character\" name=\"character\" rules={mandatoryIfLogged}>\n          <AutoComplete\n            options={arrayToAutoCompleteOptions(characters)}\n            placeholder={\"Doji Sakura\"}\n          />\n        </Form.Item>\n        {!!user && (\n          <Form.Item\n            label=\"Description\"\n            name=\"description\"\n            rules={mandatoryIfLogged}\n          >\n            <TextArea\n              placeholder={`Using Celestial Realms Table to emphasize my character's mother was born Phoenix.`}\n            />\n          </Form.Item>\n        )}\n      </>\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\" disabled={loading}>\n          {`Roll`}\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CustomForm;\n","import React from \"react\";\nimport { Typography, Descriptions } from \"antd\";\nimport TABLES, { entry } from \"./tables\";\nimport styles from \"./Summary.module.css\";\n\nconst { Text } = Typography;\n\nconst Effect = ({ effect, roll }) => {\n  if (typeof effect === \"string\") {\n    return <>{effect}</>;\n  }\n\n  const { intro, outro, options } = effect;\n\n  return (\n    <>\n      <>{intro}</>\n      {options.map(({ min, max, text }, index) => {\n        return (\n          <React.Fragment key={min.toString()}>\n            <Text strong={!!roll && min <= roll && max >= roll}>\n              {max !== min ? `${min}–${max}: ${text}` : `${min}: ${text}`}\n            </Text>\n            {index < options.length - 1 && <>{`, `}</>}\n          </React.Fragment>\n        );\n      })}\n      <>{outro}</>\n    </>\n  );\n};\n\nconst Summary = ({ table, rolls, children, context }) => {\n  if (!table || !TABLES[table]) {\n    return null;\n  }\n\n  const [firstRoll, secondRoll] = rolls;\n  const { name, description, modifier, effect } = entry({\n    table,\n    firstRoll,\n    secondRoll,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Descriptions title={name} bordered layout=\"vertical\" column={3}>\n        {context && (\n          <>\n            {context.character && (\n              <>\n                <Descriptions.Item label=\"Character\">\n                  {context.character}\n                </Descriptions.Item>\n                <Descriptions.Item label=\"Campaign\">\n                  {context.campaign || \"N/A\"}\n                </Descriptions.Item>\n                <Descriptions.Item label=\"Player\">\n                  {context.user?.name || `N/A`}\n                </Descriptions.Item>\n              </>\n            )}\n            {context.description && (\n              <Descriptions.Item label=\"Description\" span={3}>\n                {context.description}\n              </Descriptions.Item>\n            )}\n          </>\n        )}\n        <Descriptions.Item label=\"Result\" span={2}>\n          {description}\n        </Descriptions.Item>\n        <Descriptions.Item label=\"Modifier\">{modifier}</Descriptions.Item>\n        <Descriptions.Item label=\"Other effects\" span={2}>\n          <Effect effect={effect} roll={secondRoll} />\n        </Descriptions.Item>\n        <Descriptions.Item label=\"Ref.\">\n          {TABLES[table][\"name\"]}\n        </Descriptions.Item>\n      </Descriptions>\n      <>{children}</>\n    </div>\n  );\n};\n\nexport default Summary;\n","import React from \"react\";\nimport { Typography, Card } from \"antd\";\nimport styles from \"./Layout.module.css\";\n\nconst { Text, Title } = Typography;\n\nconst Dices = ({ dices }) => {\n  return (\n    <Card className={styles.dice}>\n      <Text>{`Dice:`}</Text>\n      {dices.map(({ value, status }, index) => {\n        return (\n          <Text\n            disabled={status === \"dropped\"}\n            strong={status === \"kept\"}\n            key={index.toString()}\n          >\n            {value}\n          </Text>\n        );\n      })}\n    </Card>\n  );\n};\n\nconst Layout = ({ children, dices }) => {\n  return (\n    <div className={styles.layout}>\n      <Title>{`Heritage Roll`}</Title>\n      {dices && <Dices dices={dices} />}\n      <>{children}</>\n    </div>\n  );\n};\n\nexport default Layout;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectError, selectRoll, keep, reset, selectContext } from \"./reducer\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport styles from \"./Roll.module.css\";\nimport Form from \"./Form\";\nimport Summary from \"./Summary\";\nimport { selectUser } from \"../user/reducer\";\nimport Layout from \"./Layout\";\n\nconst Roll = () => {\n  const error = useSelector(selectError);\n  const dispatch = useDispatch();\n  const roll = useSelector(selectRoll);\n  const context = useSelector(selectContext);\n  const user = useSelector(selectUser);\n\n  const { dices, metadata } = roll;\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!dices.length) {\n    return (\n      <Layout>\n        <Form />\n      </Layout>\n    );\n  }\n\n  const { table } = metadata;\n\n  if (dices.some(({ status }) => status === \"pending\")) {\n    return (\n      <Layout dices={dices}>\n        <p>{`Choose one of those two options as the relative for whom your character is named.`}</p>\n        {dices\n          .filter(({ status }) => status === \"pending\")\n          .map(({ value }, index) => {\n            return (\n              <Summary key={index.toString()} table={table} rolls={[value]}>\n                <div className={styles.footer}>\n                  <Button\n                    onClick={() =>\n                      dispatch(keep({ roll, position: index, user }))\n                    }\n                  >{`Keep that result`}</Button>\n                </div>\n              </Summary>\n            );\n          })}\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout dices={dices}>\n      <Summary\n        table={table}\n        rolls={dices\n          .filter(({ status }) => status === \"kept\")\n          .map(({ value }) => value)}\n        context={context}\n      />\n      <div className={styles.footer}>\n        <Button\n          onClick={() => {\n            dispatch(reset());\n          }}\n          type=\"dashed\"\n        >{`Roll another heritage`}</Button>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Roll;\n","import React from \"react\";\nimport Summary from \"./Summary\";\nimport Layout from \"./Layout\";\n\nconst StaticRoll = ({ roll, context }) => {\n  const { dices, metadata } = roll;\n\n  if (!dices.length) {\n    return null;\n  }\n\n  const { table } = metadata;\n\n  if (dices.some(({ status }) => status === \"pending\")) {\n    return (\n      <Layout dices={dices}>\n        <p>{`Player has yet to choose between the following options.`}</p>\n        {dices\n          .filter(({ status }) => status === \"pending\")\n          .map(({ value }, index) => {\n            return (\n              <Summary key={index.toString()} table={table} rolls={[value]} />\n            );\n          })}\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout dices={dices}>\n      <Summary\n        table={table}\n        rolls={dices\n          .filter(({ status }) => status === \"kept\")\n          .map(({ value }) => value)}\n        context={context}\n      />\n    </Layout>\n  );\n};\n\nexport default StaticRoll;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getOnServer } from \"../../server\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport Loader from \"../navigation/Loader\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectUser } from \"../user/reducer\";\nimport {\n  selectLoading,\n  selectError,\n  setLoading,\n  setError,\n  load,\n} from \"./reducer\";\nimport StaticRoll from \"./StaticRoll\";\nimport Roll from \"./Roll\";\n\nconst RollLoader = () => {\n  const { uuid } = useParams();\n  const user = useSelector(selectUser);\n  const loading = useSelector(selectLoading);\n  const error = useSelector(selectError);\n  const dispatch = useDispatch();\n\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    dispatch(setLoading(true));\n    getOnServer({\n      uri: `/public/ffg/l5r/heritage-rolls/${uuid}`,\n      success: (data) => {\n        setData(data);\n        dispatch(setLoading(false));\n      },\n      error: (e) => {\n        dispatch(setLoading(false));\n        dispatch(setError(e));\n      },\n    });\n  }, [uuid, dispatch]);\n\n  useEffect(() => {\n    if (!data) {\n      return;\n    }\n    if (user && data.user && user.id === data.user.id) {\n      const {\n        uuid,\n        roll: { dices, metadata },\n        ...context\n      } = data;\n      dispatch(\n        load({\n          uuid,\n          dices: dices,\n          metadata: metadata,\n          context,\n        })\n      );\n    }\n  }, [data, user, dispatch]);\n\n  if (!data) {\n    if (loading) {\n      return <Loader />;\n    }\n\n    if (error) {\n      return <DefaultErrorMessage />;\n    }\n\n    return null;\n  }\n\n  if (user && data.user && user.id === data.user.id) {\n    return <Roll />;\n  }\n\n  const { roll } = data;\n\n  return <StaticRoll roll={roll} context={data} />;\n};\n\nexport default RollLoader;\n","import React from \"react\";\nimport { Typography, Table } from \"antd\";\nimport TABLES, { entry } from \"./tables\";\nimport { Link } from \"react-router-dom\";\n\nconst { Text } = Typography;\n\nconst columns = [\n  { title: \"Campaign\", dataIndex: \"campaign\", responsive: [\"sm\"] },\n  { title: \"Character\", dataIndex: \"character\" },\n  {\n    title: \"Roll\",\n    dataIndex: \"roll\",\n    render: ({ dices }) => {\n      if (!dices.some(({ status }) => status === \"pending\")) {\n        return (\n          <>\n            {dices\n              .filter(({ status }) => status === \"kept\")\n              .map(({ value }) => value)\n              .join(\" / \")}\n          </>\n        );\n      }\n      return (\n        <Text type=\"secondary\">\n          {dices.map(({ value }) => value).join(\" | \")}\n        </Text>\n      );\n    },\n  },\n  {\n    title: \"Result\",\n    dataIndex: \"succinct\",\n    render: ({ name, effect, secondRoll }) => {\n      const option =\n        typeof effect === \"object\" &&\n        secondRoll &&\n        effect.options.find(\n          ({ min, max }) => min <= secondRoll && max >= secondRoll\n        );\n\n      if (!option) {\n        return <Text strong>{name}</Text>;\n      }\n\n      return (\n        <>\n          <Text strong>{name}</Text>\n          <>{` / `}</>\n          <Text strong>{option.text}</Text>\n        </>\n      );\n    },\n  },\n  { title: \"Ref.\", dataIndex: \"book\", responsive: [\"sm\"] },\n  {\n    title: \"\",\n    dataIndex: \"link\",\n    render: ({ uuid }) => {\n      return (\n        <Link title=\"Details\" to={`/heritage/${uuid}`}>\n          {\"➥\"}\n        </Link>\n      );\n    },\n  },\n];\n\nconst List = ({ rolls }) => {\n  return (\n    <Table\n      columns={columns}\n      dataSource={rolls.map((roll) => {\n        const { dices, metadata, context, uuid } = roll;\n        const key = uuid;\n        const [firstRoll, secondRoll] = dices\n          .filter(({ status }) => status === \"kept\")\n          .map(({ value }) => value);\n        const { table } = metadata;\n        const { name, effect } = entry({ table, firstRoll, secondRoll });\n        const { character, campaign } = context;\n\n        return {\n          key,\n          book: TABLES[table][\"name\"],\n          roll: { dices },\n          succinct: { name, effect, secondRoll },\n          character,\n          campaign,\n          link: { uuid },\n        };\n      })}\n      pagination={false}\n    />\n  );\n};\n\nexport default List;\n","import React, { useEffect, useState } from \"react\";\nimport { getOnServer } from \"../../server\";\nimport queryString from \"query-string\";\nimport DefaultErrorMessage from \"../../DefaultErrorMessage\";\nimport { useLocation } from \"react-router-dom\";\nimport Loader from \"../navigation/Loader\";\nimport { selectUser } from \"../user/reducer\";\nimport { useSelector } from \"react-redux\";\nimport List from \"./List\";\nimport Pagination from \"../../Pagination\";\n\nconst ListLoader = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState();\n  const [data, setData] = useState();\n  const location = useLocation();\n  const user = useSelector(selectUser);\n\n  const page = parseInt(queryString.parse(location.search)[\"page\"]) || 1;\n  const uri = `/ffg/l5r/heritage-rolls?${queryString.stringify({\n    page,\n  })}`;\n\n  useEffect(() => {\n    if (!user) {\n      return;\n    }\n    setLoading(true);\n    getOnServer({\n      uri,\n      success: (data) => {\n        setData(data);\n        setLoading(false);\n      },\n      error: (_) => {\n        setError(true);\n        setLoading(false);\n      },\n    });\n  }, [user, uri]);\n\n  if (!user) {\n    return null;\n  }\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <DefaultErrorMessage />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  const { items, per_page: pageSize, total } = data;\n\n  return (\n    <>\n      <List\n        rolls={items.map(({ uuid, roll: { dices, metadata }, ...context }) => {\n          return { uuid, dices, metadata, context };\n        })}\n      />\n      <Pagination pageSize={pageSize} current={page} total={total} />\n    </>\n  );\n};\n\nexport default ListLoader;\n","import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport Roller from \"./features/roller\";\nimport Layout from \"./features/navigation/Layout\";\nimport { getOnServer } from \"./server\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport List from \"./features/browse/List\";\nimport IdentifiedRoll from \"./features/roller/IdentifiedRoll\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"./features/user/reducer\";\nimport HeritageRoll from \"./features/heritage/Roll\";\nimport HeritageRollLoader from \"./features/heritage/RollLoader\";\nimport HeritageListLoader from \"./features/heritage/ListLoader\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    getOnServer({\n      uri: \"/user\",\n      success: (data) => {\n        dispatch(setUser(data));\n      },\n      error: (_) => {},\n    });\n  }, [dispatch]);\n\n  return (\n    <Router>\n      <Layout>\n        <Switch>\n          <Route path=\"/heritage/list\">\n            <HeritageListLoader />\n          </Route>\n          <Route path=\"/heritage/:uuid\">\n            <HeritageRollLoader />\n          </Route>\n          <Route path=\"/heritage\">\n            <HeritageRoll />\n          </Route>\n          <Route path=\"/rolls/:id\">\n            <IdentifiedRoll />\n          </Route>\n          <Route path=\"/rolls\">\n            <List />\n          </Route>\n          <Route path=\"/\">\n            <Roller />\n          </Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rollerReducer from \"../features/roller/reducer\";\nimport userReducer from \"../features/user/reducer\";\nimport heritageReducer from \"../features/heritage/reducer\";\n\nexport default configureStore({\n  reducer: {\n    roll: rollerReducer,\n    user: userReducer,\n    heritage: heritageReducer,\n  },\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./app/store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Reroll_layout__1ZSoQ\",\"container\":\"Reroll_container__22Gl5\",\"title\":\"Reroll_title__1pQuN\",\"arrow-right\":\"Reroll_arrow-right__30zxm\",\"arrow-down\":\"Reroll_arrow-down__2N_iE\",\"empty\":\"Reroll_empty__2DGjW\",\"dices\":\"Reroll_dices__2VbI0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dices\":\"Dices_dices__1Cijf\",\"dice\":\"Dices_dice__cqowQ\",\"selectable\":\"Dices_selectable__2UH3q\",\"selected\":\"Dices_selected__1Gb1I\",\"unselectable\":\"Dices_unselectable__KQSGp\",\"theme-reroll\":\"Dices_theme-reroll__KWvOz\",\"theme-gray\":\"Dices_theme-gray__k0B1L\",\"theme-shiny\":\"Dices_theme-shiny__5M1Hc\",\"explosion\":\"Dices_explosion__3t8yW\"};"],"sourceRoot":""}